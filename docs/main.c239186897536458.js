"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2011:(pt,be,F)=>{F.d(be,{Dh:()=>ae,GT:()=>ie,cc:()=>Te,hO:()=>Ue,on:()=>H,pX:()=>ne,xv:()=>de});var m=F(4650),B=F(9260),N=F(2122);pt=F.hmd(pt);const J=["ngOnDestroy"],ne=(Ee,Ie,Re,Se={})=>new Proxy(Ee,{get:(xe,De)=>Re.runOutsideAngular(()=>{var $e;if(Ee[De])return!(null===($e=Se?.spy)||void 0===$e)&&$e.get&&Se.spy.get(De,Ee[De]),Ee[De];if(J.indexOf(De)>-1)return()=>{};const Z=Ie.toPromise().then(se=>{const ye=se&&se[De];return"function"==typeof ye?ye.bind(se):ye&&ye.then?ye.then(ze=>Re.run(()=>ze)):Re.run(()=>ye)});return new Proxy(()=>{},{get:(se,ye)=>Z[ye],apply:(se,ye,ze)=>Z.then(je=>{var Dt;const Xe=je&&je(...ze);return!(null===(Dt=Se?.spy)||void 0===Dt)&&Dt.apply&&Se.spy.apply(De,ze,Xe),Xe})})})}),ie=(Ee,Ie)=>{Ie.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(Se=>{Object.defineProperty(Ee.prototype,Se,Object.getOwnPropertyDescriptor(Re.prototype||Re,Se))})})};class fe{constructor(Ie){return Ie}}const ae=new m.OlP("angularfire2.app.options"),de=new m.OlP("angularfire2.app.name");function H(Ee,Ie,Re){const xe="object"==typeof Re&&Re||{};xe.name=xe.name||"string"==typeof Re&&Re||"[DEFAULT]";const $e=B.Z.apps.filter(Z=>Z&&Z.name===xe.name)[0]||Ie.runOutsideAngular(()=>B.Z.initializeApp(Ee,xe));try{JSON.stringify(Ee)!==JSON.stringify($e.options)&&G("error",`${$e.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe($e)}const G=(Ee,...Ie)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ee](...Ie)},q={provide:fe,useFactory:H,deps:[ae,m.R0b,[new m.FiY,de]]};let Ue=(()=>{class Ee{constructor(Re){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",m.q4F.full,Re.toString())}static initializeApp(Re,Se){return{ngModule:Ee,providers:[{provide:ae,useValue:Re},{provide:de,useValue:Se}]}}}return Ee.\u0275fac=function(Re){return new(Re||Ee)(m.LFG(m.Lbi))},Ee.\u0275mod=m.oAB({type:Ee}),Ee.\u0275inj=m.cJS({providers:[q]}),Ee})();function Te(Ee,Ie,Re,Se,xe){const[,De,$e]=globalThis.\u0275AngularfireInstanceCache.find(Z=>Z[0]===Ee)||[];if(De)return function Ge(Ee,Ie){try{return Ee.toString()===Ie.toString()}catch{return Ee===Ie}}(xe,$e)||(pe("error",`${Ie} was already initialized on the ${Re} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:xe,was:$e})),De;{const Z=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Z,xe]),Z}}const ot=!!pt.hot,pe=(Ee,...Ie)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ee](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,be,F)=>{F.d(be,{q4:()=>Ka,iC:()=>oa,HU:()=>zr,vb:()=>el,JM:()=>Hr});var m=F(4650),B=F(259),N=F(5861),J=F(9681),ne=F(2090),ie=F(4859),fe=F(1877),ae=F(8766);const de="@firebase/installations",H="0.6.4",G=1e4,q=`w:${H}`,Ue="FIS_v2",Te="https://firebaseinstallations.googleapis.com/v1",Ge=36e5,Ie=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Re(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`${Te}/projects/${D}/installations`}function xe(D){return{token:D.token,requestStatus:2,expiresIn:je(D.expiresIn),creationTime:Date.now()}}function De(D,T){return $e.apply(this,arguments)}function $e(){return($e=(0,N.Z)(function*(D,T){const V=(yield T.json()).error;return Ie.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Z({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ye(D){return ze.apply(this,arguments)}function ze(){return(ze=(0,N.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function je(D){return Number(D.replace("s","000"))}function re(){return(re=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:A}){const V=Se(D),K=Z(D),ee=T.getImmediate({optional:!0});if(ee){const rt=yield ee.getHeartbeatsHeader();rt&&K.append("x-firebase-client",rt)}const at={method:"POST",headers:K,body:JSON.stringify({fid:A,authVersion:Ue,appId:D.appId,sdkVersion:q})},ct=yield ye(()=>fetch(V,at));if(ct.ok){const rt=yield ct.json();return{fid:rt.fid||A,registrationStatus:2,refreshToken:rt.refreshToken,authToken:xe(rt.authToken)}}throw yield De("Create Installation",ct)})).apply(this,arguments)}function le(D){return new Promise(T=>{setTimeout(T,D)})}const Ae=/^[cdef][\w-]{21}$/,ke="";function Le(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const A=function Je(D){return function ve(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ae.test(A)?A:ke}catch{return ke}}function Ke(D){return`${D.appName}!${D.appId}`}const rn=new Map;function _t(D,T){const A=Ke(D);en(A,T),function kn(D,T){const A=function sn(){return!dn&&"BroadcastChannel"in self&&(dn=new BroadcastChannel("[Firebase] FID Change"),dn.onmessage=D=>{en(D.data.key,D.data.fid)}),dn}();A&&A.postMessage({key:D,fid:T}),function Jn(){0===rn.size&&dn&&(dn.close(),dn=null)}()}(A,T)}function en(D,T){const A=rn.get(D);if(A)for(const V of A)V(T)}let dn=null;const Fr="firebase-installations-database",ki=1,Ln="firebase-installations-store";let pi=null;function gi(){return pi||(pi=(0,ae.X3)(Fr,ki,{upgrade:(D,T)=>{0===T&&D.createObjectStore(Ln)}})),pi}function yn(D,T){return ar.apply(this,arguments)}function ar(){return(ar=(0,N.Z)(function*(D,T){const A=Ke(D),K=(yield gi()).transaction(Ln,"readwrite"),ee=K.objectStore(Ln),Me=yield ee.get(A);return yield ee.put(T,A),yield K.done,(!Me||Me.fid!==T.fid)&&_t(D,T.fid),T})).apply(this,arguments)}function st(D){return _r.apply(this,arguments)}function _r(){return(_r=(0,N.Z)(function*(D){const T=Ke(D),V=(yield gi()).transaction(Ln,"readwrite");yield V.objectStore(Ln).delete(T),yield V.done})).apply(this,arguments)}function wr(D,T){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,N.Z)(function*(D,T){const A=Ke(D),K=(yield gi()).transaction(Ln,"readwrite"),ee=K.objectStore(Ln),Me=yield ee.get(A),at=T(Me);return void 0===at?yield ee.delete(A):yield ee.put(at,A),yield K.done,at&&(!Me||Me.fid!==at.fid)&&_t(D,at.fid),at})).apply(this,arguments)}function Fn(D){return Qr.apply(this,arguments)}function Qr(){return Qr=(0,N.Z)(function*(D){let T;const A=yield wr(D.appConfig,V=>{const K=function Mt(D){return er(D||{fid:Le(),registrationStatus:0})}(V),ee=function ht(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ie.create("app-offline"))};const A={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function At(D,T){return vn.apply(this,arguments)}(D,A);return{installationEntry:A,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:xn(D)}:{installationEntry:T}}(D,K);return T=ee.registrationPromise,ee.installationEntry});return A.fid===ke?{installationEntry:yield T}:{installationEntry:A,registrationPromise:T}}),Qr.apply(this,arguments)}function vn(){return vn=(0,N.Z)(function*(D,T){try{const A=yield function Xe(D,T){return re.apply(this,arguments)}(D,T);return yn(D.appConfig,A)}catch(A){throw Re(A)&&409===A.customData.serverCode?yield st(D.appConfig):yield yn(D.appConfig,{fid:T.fid,registrationStatus:0}),A}}),vn.apply(this,arguments)}function xn(D){return qn.apply(this,arguments)}function qn(){return(qn=(0,N.Z)(function*(D){let T=yield Ir(D.appConfig);for(;1===T.registrationStatus;)yield le(100),T=yield Ir(D.appConfig);if(0===T.registrationStatus){const{installationEntry:A,registrationPromise:V}=yield Fn(D);return V||A}return T})).apply(this,arguments)}function Ir(D){return wr(D,T=>{if(!T)throw Ie.create("installation-not-found");return er(T)})}function er(D){return function Ci(D){return 1===D.registrationStatus&&D.registrationTime+G<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Si(){return(Si=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},A){const V=function jt(D,{fid:T}){return`${Se(D)}/${T}/authTokens:generate`}(D,A),K=function se(D,{refreshToken:T}){const A=Z(D);return A.append("Authorization",function Dt(D){return`${Ue} ${D}`}(T)),A}(D,A),ee=T.getImmediate({optional:!0});if(ee){const rt=yield ee.getHeartbeatsHeader();rt&&K.append("x-firebase-client",rt)}const at={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},ct=yield ye(()=>fetch(V,at));if(ct.ok)return xe(yield ct.json());throw yield De("Generate Auth Token",ct)})).apply(this,arguments)}function Ur(D){return Un.apply(this,arguments)}function Un(){return Un=(0,N.Z)(function*(D,T=!1){let A;const V=yield wr(D.appConfig,ee=>{if(!Kt(ee))throw Ie.create("not-registered");const Me=ee.authToken;if(!T&&function Vn(D){return 2===D.requestStatus&&!function $(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+Ge}(D)}(Me))return ee;if(1===Me.requestStatus)return A=function Ve(D,T){return we.apply(this,arguments)}(D,T),ee;{if(!navigator.onLine)throw Ie.create("app-offline");const at=function j(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}(ee);return A=function wt(D,T){return Ct.apply(this,arguments)}(D,at),at}});return A?yield A:V.authToken}),Un.apply(this,arguments)}function we(){return(we=(0,N.Z)(function*(D,T){let A=yield et(D.appConfig);for(;1===A.authToken.requestStatus;)yield le(100),A=yield et(D.appConfig);const V=A.authToken;return 0===V.requestStatus?Ur(D,T):V})).apply(this,arguments)}function et(D){return wr(D,T=>{if(!Kt(T))throw Ie.create("not-registered");return function P(D){return 1===D.requestStatus&&D.requestTime+G<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ct(){return Ct=(0,N.Z)(function*(D,T){try{const A=yield function Lt(D,T){return Si.apply(this,arguments)}(D,T),V=Object.assign(Object.assign({},T),{authToken:A});return yield yn(D.appConfig,V),A}catch(A){if(!Re(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield yn(D.appConfig,V)}else yield st(D.appConfig);throw A}}),Ct.apply(this,arguments)}function Kt(D){return void 0!==D&&2===D.registrationStatus}function R(){return(R=(0,N.Z)(function*(D){const T=D,{installationEntry:A,registrationPromise:V}=yield Fn(T);return V?V.catch(console.error):Ur(T).catch(console.error),A.fid})).apply(this,arguments)}function me(){return me=(0,N.Z)(function*(D,T=!1){const A=D;return yield function Ze(D){return We.apply(this,arguments)}(A),(yield Ur(A,T)).token}),me.apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(D){const{registrationPromise:T}=yield Fn(D);T&&(yield T)})).apply(this,arguments)}function _u(D){return Ie.create("missing-app-config-values",{valueName:D})}const wu="installations",Qs=D=>{const T=D.getProvider("app").getImmediate(),A=function Ys(D){if(!D||!D.options)throw _u("App Configuration");if(!D.name)throw _u("App Name");const T=["projectId","apiKey","appId"];for(const A of T)if(!D.options[A])throw _u(A);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:A,heartbeatServiceProvider:(0,J._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Mc=D=>{const T=D.getProvider("app").getImmediate(),A=(0,J._getProvider)(T,wu).getImmediate();return{getId:()=>function k(D){return R.apply(this,arguments)}(A),getToken:K=>function Y(D){return me.apply(this,arguments)}(A,K)}};(function Iu(){(0,J._registerComponent)(new ie.wA(wu,Qs,"PUBLIC")),(0,J._registerComponent)(new ie.wA("installations-internal",Mc,"PRIVATE"))})(),(0,J.registerVersion)(de,H),(0,J.registerVersion)(de,H,"esm2017");const Ta="@firebase/remote-config",Bn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hi{constructor(T,A,V,K){this.client=T,this.storage=A,this.storageCache=V,this.logger=K}isCachedDataFresh(T,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-A,K=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${K}.`),K}fetch(T){var A=this;return(0,N.Z)(function*(){const[V,K]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(K&&A.isCachedDataFresh(T.cacheMaxAgeMillis,V))return K;T.eTag=K&&K.eTag;const ee=yield A.client.fetch(T),Me=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Me.push(A.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Me),ee})()}}function Jr(D=navigator){return D.languages&&D.languages[0]||D.language}class mi{constructor(T,A,V,K,ee,Me){this.firebaseInstallations=T,this.sdkVersion=A,this.namespace=V,this.projectId=K,this.apiKey=ee,this.appId=Me}fetch(T){var A=this;return(0,N.Z)(function*(){const[V,K]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,at={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ct={sdk_version:A.sdkVersion,app_instance_id:V,app_instance_id_token:K,app_id:A.appId,language_code:Jr()},rt={method:"POST",headers:at,body:JSON.stringify(ct)},St=fetch(Me,rt),Et=new Promise((qr,Ri)=>{T.signal.addEventListener(()=>{const $s=new Error("The operation was aborted.");$s.name="AbortError",Ri($s)})});let Wr;try{yield Promise.race([St,Et]),Wr=yield St}catch(qr){let Ri="fetch-client-network";throw"AbortError"===qr?.name&&(Ri="fetch-timeout"),Bn.create(Ri,{originalErrorMessage:qr?.message})}let Gn=Wr.status;const ua=Wr.headers.get("ETag")||void 0;let js,ni;if(200===Wr.status){let qr;try{qr=yield Wr.json()}catch(Ri){throw Bn.create("fetch-client-parse",{originalErrorMessage:Ri?.message})}js=qr.entries,ni=qr.state}if("INSTANCE_STATE_UNSPECIFIED"===ni?Gn=500:"NO_CHANGE"===ni?Gn=304:("NO_TEMPLATE"===ni||"EMPTY_CONFIG"===ni)&&(js={}),304!==Gn&&200!==Gn)throw Bn.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:ua,config:js}})()}}class Kn{constructor(T,A){this.client=T,this.storage=A}fetch(T){var A=this;return(0,N.Z)(function*(){const V=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:A,backoffCount:V}){var K=this;return(0,N.Z)(function*(){yield function Eu(D,T){return new Promise((A,V)=>{const K=Math.max(T-Date.now(),0),ee=setTimeout(A,K);D.addEventListener(()=>{clearTimeout(ee),V(Bn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,A);try{const ee=yield K.client.fetch(T);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function wn(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ee))throw ee;const Me={throttleEndTimeMillis:Date.now()+(0,ne.$s)(V),backoffCount:V+1};return yield K.storage.setThrottleMetadata(Me),K.attemptFetch(T,Me)}})()}}class xa{constructor(T,A,V,K,ee){this.app=T,this._client=A,this._storageCache=V,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gi(D,T){const A=D.target.error||void 0;return Bn.create(T,{originalErrorMessage:A&&A?.message})}const yi="app_namespace_store";class ti{constructor(T,A,V,K=function ei(){return new Promise((D,T)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=V=>{T(Gi(V,"storage-open"))},A.onsuccess=V=>{D(V.target.result)},A.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(yi,{keyPath:"compositeKey"})}}catch(A){T(Bn.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=T,this.appName=A,this.namespace=V,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var A=this;return(0,N.Z)(function*(){const V=yield A.openDbPromise;return new Promise((K,ee)=>{const at=V.transaction([yi],"readonly").objectStore(yi),ct=A.createCompositeKey(T);try{const rt=at.get(ct);rt.onerror=St=>{ee(Gi(St,"storage-get"))},rt.onsuccess=St=>{const Et=St.target.result;K(Et?Et.value:void 0)}}catch(rt){ee(Bn.create("storage-get",{originalErrorMessage:rt?.message}))}})})()}set(T,A){var V=this;return(0,N.Z)(function*(){const K=yield V.openDbPromise;return new Promise((ee,Me)=>{const ct=K.transaction([yi],"readwrite").objectStore(yi),rt=V.createCompositeKey(T);try{const St=ct.put({compositeKey:rt,value:A});St.onerror=Et=>{Me(Gi(Et,"storage-set"))},St.onsuccess=()=>{ee()}}catch(St){Me(Bn.create("storage-set",{originalErrorMessage:St?.message}))}})})()}delete(T){var A=this;return(0,N.Z)(function*(){const V=yield A.openDbPromise;return new Promise((K,ee)=>{const at=V.transaction([yi],"readwrite").objectStore(yi),ct=A.createCompositeKey(T);try{const rt=at.delete(ct);rt.onerror=St=>{ee(Gi(St,"storage-delete"))},rt.onsuccess=()=>{K()}}catch(rt){ee(Bn.create("storage-delete",{originalErrorMessage:rt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class zi{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const A=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),K=T.storage.getActiveConfig(),ee=yield A;ee&&(T.lastFetchStatus=ee);const Me=yield V;Me&&(T.lastSuccessfulFetchTimestampMillis=Me);const at=yield K;at&&(T.activeConfig=at)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Pf(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function Vo(){(0,J._registerComponent)(new ie.wA("remote-config",function D(T,{instanceIdentifier:A}){const V=T.getProvider("app").getImmediate(),K=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Bn.create("registration-window");if(!(0,ne.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:ee,apiKey:Me,appId:at}=V.options;if(!ee)throw Bn.create("registration-project-id");if(!Me)throw Bn.create("registration-api-key");if(!at)throw Bn.create("registration-app-id");const ct=new ti(at,V.name,A=A||"firebase"),rt=new zi(ct),St=new fe.Yd(Ta);St.logLevel=fe.in.ERROR;const Et=new mi(K,J.SDK_VERSION,A,ee,Me,at),Wr=new Kn(Et,ct),Gn=new Hi(Wr,ct,rt,St),ua=new xa(V,Gn,rt,ct,St);return function _n(D){const T=(0,ne.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ua),ua},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(Ta,"0.4.4"),(0,J.registerVersion)(Ta,"0.4.4","esm2017")}();const Wi="/firebase-messaging-sw.js",eo="/firebase-cloud-messaging-push-scope",Bo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Of="https://fcmregistrations.googleapis.com/v1",Rc="google.c.a.c_id",kf="google.c.a.c_l",Lf="google.c.a.ts",jo="google.c.a.e";var Ui=(()=>{return(D=Ui||(Ui={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ui;var D})();function Cs(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ff(D){const A=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(A),K=new Uint8Array(V.length);for(let ee=0;ee<V.length;++ee)K[ee]=V.charCodeAt(ee);return K}const Ra="fcm_token_details_db",vi=5,Na="fcm_token_object_Store";function Pa(){return Pa=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(Ra))return null;let T=null;return(yield(0,ae.X3)(Ra,vi,{upgrade:(V=(0,N.Z)(function*(K,ee,Me,at){var ct;if(ee<2||!K.objectStoreNames.contains(Na))return;const rt=at.objectStore(Na),St=yield rt.index("fcmSenderId").get(D);if(yield rt.clear(),St)if(2===ee){const Et=St;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(ct=Et.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Cs(Et.vapidKey)}}}else if(3===ee){const Et=St;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Cs(Et.auth),p256dh:Cs(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Cs(Et.vapidKey)}}}else if(4===ee){const Et=St;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Cs(Et.auth),p256dh:Cs(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Cs(Et.vapidKey)}}}}),function(ee,Me,at,ct){return V.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Ra),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),function Pc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(T)?T:null;var V}),Pa.apply(this,arguments)}const Oc="firebase-messaging-database",Ss=1,to="firebase-messaging-store";let no=null;function ro(){return no||(no=(0,ae.X3)(Oc,Ss,{upgrade:(D,T)=>{0===T&&D.createObjectStore(to)}})),no}function Oa(D){return As.apply(this,arguments)}function As(){return As=(0,N.Z)(function*(D){const T=xs(D),V=yield(yield ro()).transaction(to).objectStore(to).get(T);if(V)return V;{const K=yield function Nc(D){return Pa.apply(this,arguments)}(D.appConfig.senderId);if(K)return yield io(D,K),K}}),As.apply(this,arguments)}function io(D,T){return ka.apply(this,arguments)}function ka(){return(ka=(0,N.Z)(function*(D,T){const A=xs(D),K=(yield ro()).transaction(to,"readwrite");return yield K.objectStore(to).put(T,A),yield K.done,T})).apply(this,arguments)}function $o(){return($o=(0,N.Z)(function*(D){const T=xs(D),V=(yield ro()).transaction(to,"readwrite");yield V.objectStore(to).delete(T),yield V.done})).apply(this,arguments)}function xs({appConfig:D}){return D.appId}const jn=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cu(D,T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*(D,T){const A=yield qi(D),V=Fa(T),K={method:"POST",headers:A,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(La(D.appConfig),K)).json()}catch(Me){throw jn.create("token-subscribe-failed",{errorInfo:Me?.toString()})}if(ee.error)throw jn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw jn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function cs(){return(cs=(0,N.Z)(function*(D,T){const A=yield qi(D),V=Fa(T.subscriptionOptions),K={method:"PATCH",headers:A,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(`${La(D.appConfig)}/${T.token}`,K)).json()}catch(Me){throw jn.create("token-update-failed",{errorInfo:Me?.toString()})}if(ee.error)throw jn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw jn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function fr(D,T){return Go.apply(this,arguments)}function Go(){return(Go=(0,N.Z)(function*(D,T){const V={method:"DELETE",headers:yield qi(D)};try{const ee=yield(yield fetch(`${La(D.appConfig)}/${T}`,V)).json();if(ee.error)throw jn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(K){throw jn.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function La({projectId:D}){return`${Of}/projects/${D}/registrations`}function qi(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,N.Z)(function*({appConfig:D,installations:T}){const A=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Fa({p256dh:D,auth:T,endpoint:A,vapidKey:V}){const K={web:{endpoint:A,auth:T,p256dh:D}};return V!==Bo&&(K.web.applicationPubKey=V),K}const Ms=6048e5;function Ai(){return Ai=(0,N.Z)(function*(D){const T=yield function pd(D,T){return Wo.apply(this,arguments)}(D.swRegistration,D.vapidKey),A={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Cs(T.getKey("auth")),p256dh:Cs(T.getKey("p256dh"))},V=yield Oa(D.firebaseDependencies);if(V){if(function kc(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}(V.subscriptionOptions,A))return Date.now()>=V.createTime+Ms?function Pt(D,T){return so.apply(this,arguments)}(D,{token:V.token,createTime:Date.now(),subscriptionOptions:A}):V.token;try{yield fr(D.firebaseDependencies,V.token)}catch(K){console.warn(K)}return fd(D.firebaseDependencies,A)}return fd(D.firebaseDependencies,A)}),Ai.apply(this,arguments)}function Rs(){return Rs=(0,N.Z)(function*(D){const T=yield Oa(D.firebaseDependencies);T&&(yield fr(D.firebaseDependencies,T.token),yield function Tu(D){return $o.apply(this,arguments)}(D.firebaseDependencies));const A=yield D.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),Rs.apply(this,arguments)}function so(){return so=(0,N.Z)(function*(D,T){try{const A=yield function Ho(D,T){return cs.apply(this,arguments)}(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:A,createTime:Date.now()});return yield io(D.firebaseDependencies,V),A}catch(A){throw yield function Su(D){return Rs.apply(this,arguments)}(D),A}}),so.apply(this,arguments)}function fd(D,T){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(D,T){const V={token:yield Cu(D,T),createTime:Date.now(),subscriptionOptions:T};return yield io(D,V),V.token})).apply(this,arguments)}function Wo(){return(Wo=(0,N.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ff(T)})})).apply(this,arguments)}function Au(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function gd(D,T){if(!T.notification)return;D.notification={};const A=T.notification.title;A&&(D.notification.title=A);const V=T.notification.body;V&&(D.notification.body=V);const K=T.notification.image;K&&(D.notification.image=K);const ee=T.notification.icon;ee&&(D.notification.icon=ee)}(T,D),function he(D,T){T.data&&(D.data=T.data)}(T,D),function Yt(D,T){var A,V,K,ee,Me;if(!(T.fcmOptions||null!==(A=T.notification)&&void 0!==A&&A.click_action))return;D.fcmOptions={};const at=null!==(K=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==K?K:null===(ee=T.notification)||void 0===ee?void 0:ee.click_action;at&&(D.fcmOptions.link=at);const ct=null===(Me=T.fcmOptions)||void 0===Me?void 0:Me.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(T,D),T}function Lc(D,T){const A=[];for(let V=0;V<D.length;V++)A.push(D.charAt(V)),V<T.length&&A.push(T.charAt(V));return A.join("")}function xu(D){return jn.create("missing-app-config-values",{valueName:D})}Lc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Lc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class oo{constructor(T,A,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function rr(D){if(!D||!D.options)throw xu("App Configuration Object");if(!D.name)throw xu("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:A}=D;for(const V of T)if(!A[V])throw xu(V);return{appName:D.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:K,installations:A,analyticsProvider:V}}_delete(){return Promise.resolve()}}function xi(D){return ao.apply(this,arguments)}function ao(){return(ao=(0,N.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Wi,{scope:eo}),D.swRegistration.update().catch(()=>{})}catch(T){throw jn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Ua(){return(Ua=(0,N.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield xi(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function uo(){return(uo=(0,N.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Bo)})).apply(this,arguments)}function Rr(){return Rr=(0,N.Z)(function*(D,T){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield function yd(D,T){return uo.apply(this,arguments)}(D,T?.vapidKey),yield function Fc(D,T){return Ua.apply(this,arguments)}(D,T?.serviceWorkerRegistration),function hd(D){return Ai.apply(this,arguments)}(D)}),Rr.apply(this,arguments)}function Ki(){return(Ki=(0,N.Z)(function*(D,T,A){const V=function ls(D){switch(D){case Ui.NOTIFICATION_CLICKED:return"notification_open";case Ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:A[Rc],message_name:A[kf],message_time:A[Lf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lo(){return lo=(0,N.Z)(function*(D,T){const A=T.data;if(!A.isFirebaseMessaging)return;D.onMessageHandler&&A.messageType===Ui.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Au(A)):D.onMessageHandler.next(Au(A)));const V=A.data;(function md(D){return"object"==typeof D&&!!D&&Rc in D})(V)&&"1"===V[jo]&&(yield function co(D,T,A){return Ki.apply(this,arguments)}(D,A.messageType,V))}),lo.apply(this,arguments)}const Mu="@firebase/messaging",ds=D=>{const T=new oo(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Uc(D,T){return lo.apply(this,arguments)}(T,A)),T},qo=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function br(D,T){return Rr.apply(this,arguments)}(T,V)}};function Ru(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,N.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function _d(){(0,J._registerComponent)(new ie.wA("messaging",ds,"PUBLIC")),(0,J._registerComponent)(new ie.wA("messaging-internal",qo,"PRIVATE")),(0,J.registerVersion)(Mu,"0.12.4"),(0,J.registerVersion)(Mu,"0.12.4","esm2017")}();const jc="analytics",jr="firebase_id",Zi="origin",pn=6e4,$c="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Id="https://www.googletagmanager.com/gtag/js",Tr=new fe.Yd("@firebase/analytics");function Ed(D){return Promise.all(D.map(T=>T.catch(A=>A)))}function Zo(){return(Zo=(0,N.Z)(function*(D,T,A,V,K,ee){const Me=V[K];try{if(Me)yield T[Me];else{const ct=(yield Ed(A)).find(rt=>rt.measurementId===K);ct&&(yield T[ct.appId])}}catch(at){Tr.error(at)}D("config",K,ee)})).apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*(D,T,A,V,K){try{let ee=[];if(K&&K.send_to){let Me=K.send_to;Array.isArray(Me)||(Me=[Me]);const at=yield Ed(A);for(const ct of Me){const rt=at.find(Et=>Et.measurementId===ct),St=rt&&T[rt.appId];if(!St){ee=[];break}ee.push(St)}}0===ee.length&&(ee=Object.values(T)),yield Promise.all(ee),D("event",V,K||{})}catch(ee){Tr.error(ee)}})).apply(this,arguments)}const $r=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hf=30,Gc=new class Gf{constructor(T={},A=1e3){this.throttleMetadata=T,this.intervalMillis=A}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,A){this.throttleMetadata[T]=A}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Xo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Dn(){return(Dn=(0,N.Z)(function*(D){var T;const{appId:A,apiKey:V}=D,K={method:"GET",headers:Xo(V)},ee=$c.replace("{app-id}",A),Me=yield fetch(ee,K);if(200!==Me.status&&304!==Me.status){let at="";try{const ct=yield Me.json();null!==(T=ct.error)&&void 0!==T&&T.message&&(at=ct.error.message)}catch{}throw $r.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:at})}return Me.json()})).apply(this,arguments)}function Ps(){return(Ps=(0,N.Z)(function*(D,T=Gc,A){const{appId:V,apiKey:K,measurementId:ee}=D.options;if(!V)throw $r.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:V};throw $r.create("no-api-key")}const Me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},at=new go;return setTimeout((0,N.Z)(function*(){at.abort()}),void 0!==A?A:pn),Os({appId:V,apiKey:K,measurementId:ee},Me,at,T)})).apply(this,arguments)}function Os(D,T,A){return Mi.apply(this,arguments)}function Mi(){return Mi=(0,N.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:A},V,K=Gc){var ee;const{appId:Me,measurementId:at}=D;try{yield function $a(D,T){return new Promise((A,V)=>{const K=Math.max(T-Date.now(),0),ee=setTimeout(A,K);D.addEventListener(()=>{clearTimeout(ee),V($r.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(V,T)}catch(ct){if(at)return Tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:Me,measurementId:at};throw ct}try{const ct=yield function Nu(D){return Dn.apply(this,arguments)}(D);return K.deleteThrottleMetadata(Me),ct}catch(ct){const rt=ct;if(!function Pu(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(rt)){if(K.deleteThrottleMetadata(Me),at)return Tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${at} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:Me,measurementId:at};throw ct}const St=503===Number(null===(ee=rt?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,ne.$s)(A,K.intervalMillis,Hf):(0,ne.$s)(A,K.intervalMillis),Et={throttleEndTimeMillis:Date.now()+St,backoffCount:A+1};return K.setThrottleMetadata(Me,Et),Tr.debug(`Calling attemptFetch again in ${St} millis`),Os(D,Et,V,K)}}),Mi.apply(this,arguments)}class go{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Ou,Fs;function mo(){return(mo=(0,N.Z)(function*(D,T,A,V,K){if(K&&K.global)D("event",A,V);else{const ee=yield T;D("event",A,Object.assign(Object.assign({},V),{send_to:ee}))}})).apply(this,arguments)}function ea(){return(ea=(0,N.Z)(function*(){if(!(0,ne.hl)())return Tr.warn($r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(D){return Tr.warn($r.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function ta(){return ta=(0,N.Z)(function*(D,T,A,V,K,ee,Me){var at;const ct=function ja(D){return Ps.apply(this,arguments)}(D);ct.then(Gn=>{A[Gn.measurementId]=Gn.appId,D.options.measurementId&&Gn.measurementId!==D.options.measurementId&&Tr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>Tr.error(Gn)),T.push(ct);const rt=function za(){return ea.apply(this,arguments)}().then(Gn=>{if(Gn)return V.getId()}),[St,Et]=yield Promise.all([ct,rt]);(function po(D){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(Id)&&A.src.includes(D))return A;return null})(ee)||function $f(D,T){const A=document.createElement("script");A.src=`${Id}?l=${D}&id=${T}`,A.async=!0,document.head.appendChild(A)}(ee,St.measurementId),Fs&&(K("consent","default",Fs),function Ha(D){Fs=D}(void 0)),K("js",new Date);const Wr=null!==(at=Me?.config)&&void 0!==at?at:{};return Wr[Zi]="firebase",Wr.update=!0,null!=Et&&(Wr[jr]=Et),K("config",St.measurementId,Wr),Ou&&(K("set",Ou),function Ga(D){Ou=D}(void 0)),St.measurementId}),ta.apply(this,arguments)}class qc{constructor(T){this.app=T}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},Kc=[];const fs={};let Wa,wi,Vi="dataLayer",Dd="gtag",ps=!1;function yo(D,T,A){!function Zc(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,K)=>`(${K+1}) ${V}`).join(" "),A=$r.create("invalid-analytics-context",{errorInfo:T});Tr.warn(A.message)}}();const V=D.options.appId;if(!V)throw $r.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw $r.create("no-api-key");Tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_i[V])throw $r.create("already-exists",{id:V});if(!ps){!function Hc(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Vi);const{wrappedGtag:ee,gtagCore:Me}=function Yo(D,T,A,V,K){let ee=function(...Me){window[V].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function Ba(D,T,A,V){function ee(){return ee=(0,N.Z)(function*(Me,at,ct){try{"event"===Me?yield function ho(D,T,A,V,K){return fo.apply(this,arguments)}(D,T,A,at,ct):"config"===Me?yield function Ko(D,T,A,V,K,ee){return Zo.apply(this,arguments)}(D,T,A,V,at,ct):"consent"===Me?D("consent","update",ct):D("set",at)}catch(rt){Tr.error(rt)}}),ee.apply(this,arguments)}return function K(Me,at,ct){return ee.apply(this,arguments)}}(ee,D,T,A),{gtagCore:ee,wrappedGtag:window[K]}}(_i,Kc,fs,Vi,Dd);wi=ee,Wa=Me,ps=!0}return _i[V]=function Wc(D,T,A,V,K,ee,Me){return ta.apply(this,arguments)}(D,Kc,fs,T,Wa,Vi,A),new qc(D)}function qa(){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,N.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const hn="@firebase/analytics";!function Cd(){(0,J._registerComponent)(new ie.wA(jc,(T,{options:A})=>yo(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,J._registerComponent)(new ie.wA("analytics-internal",function D(T){try{const A=T.getProvider(jc).getImmediate();return{logEvent:(V,K,ee)=>function Uu(D,T,A,V){D=(0,ne.m9)(D),function ks(D,T,A,V,K){return mo.apply(this,arguments)}(wi,_i[D.app.options.appId],T,A,V).catch(K=>Tr.error(K))}(A,V,K,ee)}}catch(A){throw $r.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,J.registerVersion)(hn,"0.9.4"),(0,J.registerVersion)(hn,"0.9.4","esm2017")}();var Sd=F(4408),Vu=F(7565);const Qc=new class Yc extends Vu.v{}(class Xi extends Sd.o{constructor(T,A){super(T,A),this.scheduler=T,this.work=A}schedule(T,A=0){return A>0?super.schedule(T,A):(this.delay=A,this.state=T,this.scheduler.flush(this),this)}execute(T,A){return A>0||this.closed?super.execute(T,A):this._execute(T,A)}requestAsyncId(T,A,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,A,V):(T.flush(this),0)}});var Im=F(4986),sa=F(8505),$n=F(9468),Bu=F(5363);const Ka=new m.GfV("7.5.0"),Xc="__angularfire_symbol__analyticsIsSupportedValue",Nr="__angularfire_symbol__analyticsIsSupported",Ji="__angularfire_symbol__remoteConfigIsSupportedValue",ju="__angularfire_symbol__remoteConfigIsSupported",vo="__angularfire_symbol__messagingIsSupportedValue",gs="__angularfire_symbol__messagingIsSupported";function Hr(D,T,A){if(T){if(1===T.length)return T[0];const ee=T.filter(Me=>Me.app===A);if(1===ee.length)return ee[0]}return A.container.getProvider(D).getImmediate({optional:!0})}globalThis[Nr]||(globalThis[Nr]=qa().then(D=>globalThis[Xc]=D).catch(()=>globalThis[Xc]=!1)),globalThis[gs]||(globalThis[gs]=Ru().then(D=>globalThis[vo]=D).catch(()=>globalThis[vo]=!1)),globalThis[ju]||(globalThis[ju]=Pf().then(D=>globalThis[Ji]=D).catch(()=>globalThis[Ji]=!1));const el=(D,T)=>{const A=T?[T]:(0,B.C6)(),V=[];return A.forEach(K=>{K.container.getProvider(D).instances.forEach(Me=>{V.includes(Me)||V.push(Me)})}),V};function Gr(){}class Ad{constructor(T,A=Qc){this.zone=T,this.delegate=A}now(){return this.delegate.now()}schedule(T,A,V){const K=this.zone;return this.delegate.schedule(function(Me){K.runGuarded(()=>{T.apply(this,[Me])})},A,V)}}class xd{constructor(T){this.zone=T,this.task=null}call(T,A){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gr,{},Gr,Gr)),A.pipe((0,sa.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zr=(()=>{class D{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Ad(Zone.current)),this.insideAngular=A.run(()=>new Ad(Zone.current,Im.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(A){return new(A||D)(m.LFG(m.R0b))},D.\u0275prov=m.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Sr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function oa(D){return Sr(),function Bs(D){return function(A){return(A=A.lift(new xd(D.ngZone))).pipe((0,$n.R)(D.outsideAngular),(0,Bu.Q)(D.insideAngular))}}(Sr())(D)}},8401:(pt,be,F)=>{F.d(be,{$:()=>La,A:()=>G,B:()=>Te,G:()=>Mc,H:()=>En,J:()=>Kn,L:()=>Vn,M:()=>Ma,N:()=>Of,P:()=>Im,Q:()=>Rc,R:()=>Td,T:()=>kf,U:()=>Bo,V:()=>Ui,W:()=>Cs,X:()=>Nc,Y:()=>Br,Z:()=>Cu,_:()=>Ho,a:()=>Qo,a0:()=>hd,a1:()=>Su,a2:()=>Pt,a3:()=>fd,a4:()=>pd,a5:()=>kc,a6:()=>gd,a7:()=>he,a8:()=>md,a9:()=>Lc,aA:()=>$,aB:()=>ct,aC:()=>gt,aD:()=>an,aE:()=>cr,aI:()=>Xo,aL:()=>jo,aa:()=>xi,ab:()=>Fc,ac:()=>yd,af:()=>co,ag:()=>ls,ah:()=>Uc,ak:()=>to,al:()=>Va,an:()=>Id,ao:()=>Zo,ap:()=>ye,aq:()=>$t,ar:()=>Ze,as:()=>Re,at:()=>ir,au:()=>qr,av:()=>Rt,aw:()=>Se,ax:()=>Z,ay:()=>Gn,az:()=>je,b:()=>$r,c:()=>vo,d:()=>Em,e:()=>Jc,f:()=>Bs,g:()=>V,h:()=>D,i:()=>ea,j:()=>Me,k:()=>tp,l:()=>Kf,m:()=>rp,o:()=>ae,r:()=>Sd,s:()=>qf,u:()=>Qc});var m=F(5861),B=F(2090),N=F(9681),J=F(1877),ne=F(655),ie=F(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ge=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new J.Yd("@firebase/auth");function Ie(v,...f){Ee.logLevel<=J.in.ERROR&&Ee.error(`Auth (${N.SDK_VERSION}): ${v}`,...f)}function Re(v,...f){throw $e(v,...f)}function Se(v,...f){return $e(v,...f)}function xe(v,f,g){const I=Object.assign(Object.assign({},Ge()),{[f]:g});return new B.LL("auth","Firebase",I).create(f,{appName:v.name})}function De(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Re(v,"argument-error"),xe(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...f){if("string"!=typeof v){const g=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(g,...I)}return ot.create(v,...f)}function Z(v,f,...g){if(!v)throw $e(f,...g)}function se(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ie(f),new Error(f)}function ye(v,f){v||se(f)}const ze=new Map;function je(v){ye(v instanceof Function,"Expected a class definition");let f=ze.get(v);return f?(ye(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,ze.set(v,f),f)}function re(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function le(){return"http:"===ve()||"https:"===ve()}function ve(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Le{constructor(f,g){this.shortDelay=f,this.longDelay=g,ye(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(le()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Je(v,f){ye(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ke{static initialize(f,g,I){this.fetchImpl=f,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_t=new Le(3e4,6e4);function yt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function it(v,f,g,I){return en.apply(this,arguments)}function en(){return(en=(0,m.Z)(function*(v,f,g,I,x={}){return kn(v,x,(0,m.Z)(function*(){let L={},Q={};I&&("GET"===f?Q=I:L={body:JSON.stringify(I)});const Ce=(0,B.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),tt=yield v._getAdditionalHeaders();return tt["Content-Type"]="application/json",v.languageCode&&(tt["X-Firebase-Locale"]=v.languageCode),Ke.fetch()(Fr(v,v.config.apiHost,g,Ce),Object.assign({method:f,headers:tt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function kn(v,f,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,m.Z)(function*(v,f,g){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},rn),f);try{const x=new ki(v),L=yield Promise.race([g(),x.promise]);x.clearNetworkTimeout();const Q=yield L.json();if("needConfirmation"in Q)throw Ln(v,"account-exists-with-different-credential",Q);if(L.ok&&!("errorMessage"in Q))return Q;{const Ce=L.ok?Q.errorMessage:Q.error.message,[tt,dt]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw Ln(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===tt)throw Ln(v,"email-already-in-use",Q);if("USER_DISABLED"===tt)throw Ln(v,"user-disabled",Q);const qt=I[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw xe(v,qt,dt);Re(v,qt)}}catch(x){if(x instanceof B.ZR)throw x;Re(v,"internal-error",{message:String(x)})}})).apply(this,arguments)}function sn(v,f,g,I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(v,f,g,I,x={}){const L=yield it(v,f,g,I,x);return"mfaPendingCredential"in L&&Re(v,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Fr(v,f,g,I){const x=`${f}${g}?${I}`;return v.config.emulator?Je(v.config,x):`${v.config.apiScheme}://${x}`}class ki{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Se(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ln(v,f,g){const I={appName:v.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const x=Se(v,f,I);return x.customData._tokenResponse=g,x}function gi(){return(gi=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function wr(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Qr(){return(Qr=(0,m.Z)(function*(v,f=!1){const g=(0,B.m9)(v),I=yield g.getIdToken(f),x=ht(I);Z(x&&x.exp&&x.auth_time&&x.iat,g.auth,"internal-error");const L="object"==typeof x.firebase?x.firebase:void 0,Q=L?.sign_in_provider;return{claims:x,token:I,authTime:wr(Mt(x.auth_time)),issuedAtTime:wr(Mt(x.iat)),expirationTime:wr(Mt(x.exp)),signInProvider:Q||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Mt(v){return 1e3*Number(v)}function ht(v){const[f,g,I]=v.split(".");if(void 0===f||void 0===g||void 0===I)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,B.tV)(g);return x?JSON.parse(x):(Ie("Failed to decode base64 JWT payload"),null)}catch(x){return Ie("Caught error parsing JWT payload as JSON",x?.toString()),null}}function vn(v,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(I){throw I instanceof B.ZR&&function qn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class Ir{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),I)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class er{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ci(v){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,m.Z)(function*(v){var f;const g=v.auth,I=yield v.getIdToken(),x=yield vn(v,function st(v,f){return _r.apply(this,arguments)}(g,{idToken:I}));Z(x?.users.length,g,"internal-error");const L=x.users[0];v._notifyReloadListener(L);const Q=null!==(f=L.providerUserInfo)&&void 0!==f&&f.length?function Un(v){return v.map(f=>{var{providerId:g}=f,I=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(L.providerUserInfo):[],Ce=function Ur(v,f){return[...v.filter(I=>!f.some(x=>x.providerId===I.providerId)),...f]}(v.providerData,Q),qt=!!v.isAnonymous&&!(v.email&&L.passwordHash||Ce?.length),Sn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Ce,metadata:new er(L.createdAt,L.lastLoginAt),isAnonymous:qt};Object.assign(v,Sn)}),Lt.apply(this,arguments)}function jt(){return(jt=(0,m.Z)(function*(v){const f=(0,B.m9)(v);yield Ci(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function we(){return(we=(0,m.Z)(function*(v,f){const g=yield kn(v,{},(0,m.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:x,apiKey:L}=v.config,Q=Fr(v,x,"/v1/token",`key=${L}`),Ce=yield v._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",Ke.fetch()(Q,{method:"POST",headers:Ce,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Z(f.idToken,"internal-error"),Z(typeof f.idToken<"u","internal-error"),Z(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function At(v){const f=ht(v);return Z(f,"internal-error"),Z(typeof f.exp<"u","internal-error"),Z(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var I=this;return(0,m.Z)(function*(){return Z(!I.accessToken||I.refreshToken,f,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var I=this;return(0,m.Z)(function*(){const{accessToken:x,refreshToken:L,expiresIn:Q}=yield function Ve(v,f){return we.apply(this,arguments)}(f,g);I.updateTokensAndExpiration(x,L,Number(Q))})()}updateTokensAndExpiration(f,g,I){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,g){const{refreshToken:I,accessToken:x,expirationTime:L}=g,Q=new et;return I&&(Z("string"==typeof I,"internal-error",{appName:f}),Q.refreshToken=I),x&&(Z("string"==typeof x,"internal-error",{appName:f}),Q.accessToken=x),L&&(Z("number"==typeof L,"internal-error",{appName:f}),Q.expirationTime=L),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return se("not implemented")}}function wt(v,f){Z("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Ct{constructor(f){var{uid:g,auth:I,stsTokenManager:x}=f,L=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new er(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const I=yield vn(g,g.stsTokenManager.getToken(g.auth,f));return Z(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(f){return function Fn(v){return Qr.apply(this,arguments)}(this,f)}reload(){return function Si(v){return jt.apply(this,arguments)}(this)}_assign(f){this!==f&&(Z(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ct(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var I=this;return(0,m.Z)(function*(){let x=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),x=!0),g&&(yield Ci(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield vn(f,function pi(v,f){return gi.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var I,x,L,Q,Ce,tt,dt,qt;const Sn=null!==(I=g.displayName)&&void 0!==I?I:void 0,Bi=null!==(x=g.email)&&void 0!==x?x:void 0,ys=null!==(L=g.phoneNumber)&&void 0!==L?L:void 0,Ya=null!==(Q=g.photoURL)&&void 0!==Q?Q:void 0,Hs=null!==(Ce=g.tenantId)&&void 0!==Ce?Ce:void 0,Qa=null!==(tt=g._redirectEventId)&&void 0!==tt?tt:void 0,Gu=null!==(dt=g.createdAt)&&void 0!==dt?dt:void 0,Vd=null!==(qt=g.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:Gs,emailVerified:sp,isAnonymous:rl,providerData:zu,stsTokenManager:op}=g;Z(Gs&&op,f,"internal-error");const Bd=et.fromJSON(this.name,op);Z("string"==typeof Gs,f,"internal-error"),wt(Sn,f.name),wt(Bi,f.name),Z("boolean"==typeof sp,f,"internal-error"),Z("boolean"==typeof rl,f,"internal-error"),wt(ys,f.name),wt(Ya,f.name),wt(Hs,f.name),wt(Qa,f.name),wt(Gu,f.name),wt(Vd,f.name);const il=new Ct({uid:Gs,auth:f,email:Bi,emailVerified:sp,displayName:Sn,isAnonymous:rl,photoURL:Ya,phoneNumber:ys,tenantId:Hs,stsTokenManager:Bd,createdAt:Gu,lastLoginAt:Vd});return zu&&Array.isArray(zu)&&(il.providerData=zu.map(jd=>Object.assign({},jd))),Qa&&(il._redirectEventId=Qa),il}static _fromIdTokenResponse(f,g,I=!1){return(0,m.Z)(function*(){const x=new et;x.updateFromServerResponse(g);const L=new Ct({uid:g.localId,auth:f,stsTokenManager:x,isAnonymous:I});return yield Ci(L),L})()}}const Vn=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,I){var x=this;return(0,m.Z)(function*(){x.storage[g]=I})()}_get(g){var I=this;return(0,m.Z)(function*(){const x=I.storage[g];return void 0===x?null:x})()}_remove(g){var I=this;return(0,m.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return v.type="NONE",v})();function $(v,f,g){return`firebase:${v}:${f}:${g}`}class j{constructor(f,g,I){this.persistence=f,this.auth=g,this.userKey=I;const{config:x,name:L}=this.auth;this.fullUserKey=$(this.userKey,x.apiKey,L),this.fullPersistenceKey=$("persistence",x.apiKey,L),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Ct._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,I="authUser"){return(0,m.Z)(function*(){if(!g.length)return new j(je(Vn),f,I);const x=(yield Promise.all(g.map(function(){var dt=(0,m.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let L=x[0]||je(Vn);const Q=$(I,f.config.apiKey,f.name);let Ce=null;for(const dt of g)try{const qt=yield dt._get(Q);if(qt){const Sn=Ct._fromJSON(f,qt);dt!==L&&(Ce=Sn),L=dt;break}}catch{}const tt=x.filter(dt=>dt._shouldAllowMigration);return L._shouldAllowMigration&&tt.length?(L=tt[0],Ce&&(yield L._set(Q,Ce.toJSON())),yield Promise.all(g.map(function(){var dt=(0,m.Z)(function*(qt){if(qt!==L)try{yield qt._remove(Q)}catch{}});return function(qt){return dt.apply(this,arguments)}}())),new j(L,f,I)):new j(L,f,I)})()}}function P(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(me(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(k(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(We(f))return"Blackberry";if(bt(f))return"Webos";if(R(f))return"Safari";if((f.includes("chrome/")||Y(f))&&!f.includes("edge/"))return"Chrome";if(Ze(f))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function k(v=(0,B.z$)()){return/firefox\//i.test(v)}function R(v=(0,B.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Y(v=(0,B.z$)()){return/crios\//i.test(v)}function me(v=(0,B.z$)()){return/iemobile/i.test(v)}function Ze(v=(0,B.z$)()){return/android/i.test(v)}function We(v=(0,B.z$)()){return/blackberry/i.test(v)}function bt(v=(0,B.z$)()){return/webos/i.test(v)}function $t(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Rt(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function ur(v=(0,B.z$)()){return $t(v)||Ze(v)||bt(v)||We(v)||/windows phone/i.test(v)||me(v)}function Ys(v,f=[]){let g;switch(v){case"Browser":g=P((0,B.z$)());break;case"Worker":g=`${P((0,B.z$)())}-${v}`;break;default:g=v}const I=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${N.SDK_VERSION}/${I}`}class _u{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const I=L=>new Promise((Q,Ce)=>{try{Q(f(L))}catch(tt){Ce(tt)}});I.onAbort=g,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,m.Z)(function*(){if(g.auth.currentUser===f)return;const I=[];try{for(const x of g.queue)yield x(f),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const L of I)try{L()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class wu{constructor(f,g,I){this.app=f,this.heartbeatServiceProvider=g,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new _u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(f,g){var I=this;return g&&(this._popupRedirectResolver=je(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var x,L;if(!I._deleted&&(I.persistenceManager=yield j.create(I,f),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(L=I.currentUser)||void 0===L?void 0:L.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var I;const x=yield g.assertedPersistence.getCurrentUser();let L=x,Q=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ce=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,tt=L?._redirectEventId,dt=yield g.tryRedirectSignIn(f);(!Ce||Ce===tt)&&dt?.user&&(L=dt.user,Q=!0)}if(!L)return g.directlySetCurrentUser(null);if(!L._redirectEventId){if(Q)try{yield g.beforeStateQueue.runMiddleware(L)}catch(Ce){L=x,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ce))}return L?g.reloadAndSetCurrentUserOrClear(L):g.directlySetCurrentUser(null)}return Z(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===L._redirectEventId?g.directlySetCurrentUser(L):g.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield Ci(f)}catch(I){if("auth/network-request-failed"!==I?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ke(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const I=f?(0,B.m9)(f):null;return I&&Z(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(f,g=!1){var I=this;return(0,m.Z)(function*(){if(!I._deleted)return f&&Z(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,m.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(je(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new B.LL("auth","Firebase",f())}onAuthStateChanged(f,g,I){return this.registerStateListener(this.authStateSubscription,f,g,I)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,I){return this.registerStateListener(this.idTokenSubscription,f,g,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var I=this;return(0,m.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(g);return null===f?x.removeCurrentUser():x.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const I=f&&je(f)||g._popupRedirectResolver;Z(I,g,"argument-error"),g.redirectPersistenceManager=yield j.create(g,[je(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var I,x;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===f?g._currentUser:(null===(x=g.redirectUser)||void 0===x?void 0:x._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,I,x){if(this._deleted)return()=>{};const L="function"==typeof g?g:g.next.bind(g),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return Z(Q,this,"internal-error"),Q.then(()=>L(this.currentUser)),"function"==typeof g?f.addObserver(g,I,x):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ys(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const x=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function cr(v){return(0,B.m9)(v)}class Qs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,B.ne)(g=>this.observer=g)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mc(v,f,g){const I=cr(v);Z(I._canInitEmulator,I,"emulator-config-failed"),Z(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const x=!!g?.disableWarnings,L=Iu(f),{host:Q,port:Ce}=function Ta(v){const f=Iu(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const L=x[1];return{host:L,port:Xs(I.substr(L.length+1))}}{const[L,Q]=I.split(":");return{host:L,port:Xs(Q)}}}(f);I.config.emulator={url:`${L}//${Q}${null===Ce?"":`:${Ce}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Q,port:Ce,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function tn(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Iu(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Xs(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class En{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return se("not implemented")}_getIdTokenResponse(f){return se("not implemented")}_linkToIdToken(f,g){return se("not implemented")}_getReauthenticationResolver(f){return se("not implemented")}}function Er(v,f){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:resetPassword",yt(v,f))})).apply(this,arguments)}function Vr(v,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Nt(){return(Nt=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:update",yt(v,f))})).apply(this,arguments)}function Dr(){return(Dr=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithPassword",yt(v,f))})).apply(this,arguments)}function Li(v,f){return tr.apply(this,arguments)}function tr(){return(tr=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:sendOobCode",yt(v,f))})).apply(this,arguments)}function _n(){return(_n=(0,m.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function Fo(){return(Fo=(0,m.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function Uo(){return(Uo=(0,m.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithEmailLink",yt(v,f))})).apply(this,arguments)}function Hi(){return(Hi=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithEmailLink",yt(v,f))})).apply(this,arguments)}class Jr extends En{constructor(f,g,I,x=null){super("password",I),this._email=f,this._password=g,this._tenantId=x}static _fromEmailAndPassword(f,g){return new Jr(f,g,"password")}static _fromEmailAndCode(f,g,I=null){return new Jr(f,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function Cn(v,f){return Dr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function $i(v,f){return lr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Re(f,"internal-error")}})()}_linkToIdToken(f,g){var I=this;return(0,m.Z)(function*(){switch(I.signInMethod){case"password":return Vr(f,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Sa(v,f){return Hi.apply(this,arguments)}(f,{idToken:g,email:I._email,oobCode:I._password});default:Re(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function mi(v,f){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithIdp",yt(v,f))})).apply(this,arguments)}class Kn extends En{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Kn(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Re("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:x}=g,L=(0,ne._T)(g,["providerId","signInMethod"]);if(!I||!x)return null;const Q=new Kn(I,x);return Q.idToken=L.idToken||void 0,Q.accessToken=L.accessToken||void 0,Q.secret=L.secret,Q.nonce=L.nonce,Q.pendingToken=L.pendingToken||null,Q}_getIdTokenResponse(f){return mi(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,mi(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,mi(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,B.xO)(g)}return f}}function Aa(){return(Aa=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:sendVerificationCode",yt(v,f))})).apply(this,arguments)}function Gi(){return(Gi=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,f))})).apply(this,arguments)}function dr(){return(dr=(0,m.Z)(function*(v,f){const g=yield sn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,f));if(g.temporaryProof)throw Ln(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Nf={USER_NOT_FOUND:"user-not-found"};function ti(){return(ti=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithPhoneNumber",yt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Nf)})).apply(this,arguments)}class zi extends En{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new zi({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new zi({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function xa(v,f){return Gi.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function yi(v,f){return dr.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ei(v,f){return ti.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:I,verificationCode:x}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:I,code:x}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:I,phoneNumber:x,temporaryProof:L}=f;return I||g||x||L?new zi({verificationId:g,verificationCode:I,phoneNumber:x,temporaryProof:L}):null}}class hr{constructor(f){var g,I,x,L,Q,Ce;const tt=(0,B.zd)((0,B.pd)(f)),dt=null!==(g=tt.apiKey)&&void 0!==g?g:null,qt=null!==(I=tt.oobCode)&&void 0!==I?I:null,Sn=function Vo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=tt.mode)&&void 0!==x?x:null);Z(dt&&qt&&Sn,"argument-error"),this.apiKey=dt,this.operation=Sn,this.code=qt,this.continueUrl=null!==(L=tt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(Q=tt.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(Ce=tt.tenantId)&&void 0!==Ce?Ce:null}static parseLink(f){const g=function bu(v){const f=(0,B.zd)((0,B.pd)(v)).link,g=f?(0,B.zd)((0,B.pd)(f)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||g||f||v}(f);try{return new hr(g)}catch{return null}}}let Ma=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,I){return Jr._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const x=hr.parseLink(I);return Z(x,"argument-error"),Jr._fromEmailAndCode(g,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Wi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class eo extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Bo extends eo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Z("providerId"in g&&"signInMethod"in g,"argument-error"),Kn._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Z(f.idToken||f.accessToken,"argument-error"),Kn._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Bo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Bo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:L,nonce:Q,providerId:Ce}=f;if(!I&&!x&&!g&&!L||!Ce)return null;try{return new Bo(Ce)._credential({idToken:g,accessToken:I,nonce:Q,pendingToken:L})}catch{return null}}}let Of=(()=>{class v extends eo{constructor(){super("facebook.com")}static credential(g){return Kn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Rc=(()=>{class v extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return Kn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:x}=g;if(!I&&!x)return null;try{return v.credential(I,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),kf=(()=>{class v extends eo{constructor(){super("github.com")}static credential(g){return Kn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class jo extends En{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return mi(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,mi(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,mi(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:x,pendingToken:L}=g;return I&&x&&L&&I===x?new jo(I,L):null}static _create(f,g){return new jo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ui extends Wi{constructor(f){Z(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ui.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ui.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=jo.fromJSON(f);return Z(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:I}=f;if(!g||!I)return null;try{return jo._create(I,g)}catch{return null}}}let Cs=(()=>{class v extends eo{constructor(){super("twitter.com")}static credential(g,I){return Kn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=g;if(!I||!x)return null;try{return v.credential(I,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ff(v,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signUp",yt(v,f))})).apply(this,arguments)}class vi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,I,x=!1){return(0,m.Z)(function*(){const L=yield Ct._fromIdTokenResponse(f,I,x),Q=Na(I);return new vi({user:L,providerId:Q,_tokenResponse:I,operationType:g})})()}static _forOperation(f,g,I){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const x=Na(I);return new vi({user:f,providerId:x,_tokenResponse:I,operationType:g})})()}}function Na(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Nc(v){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(v){var f;const g=cr(v);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new vi({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Ff(g,{returnSecureToken:!0}),x=yield vi._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(x.user),x})).apply(this,arguments)}class Pc extends B.ZR{constructor(f,g,I,x){var L;super(g.code,g.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:f.name,tenantId:null!==(L=f.tenantId)&&void 0!==L?L:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,g,I,x){return new Pc(f,g,I,x)}}function Oc(v,f,g,I){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Pc._fromErrorAndOperation(v,L,f,I):L})}function Ss(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function to(v,f){return no.apply(this,arguments)}function no(){return no=(0,m.Z)(function*(v,f){const g=(0,B.m9)(v);yield As(!0,g,f);const{providerUserInfo:I}=yield function yn(v,f){return ar.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),x=Ss(I||[]);return g.providerData=g.providerData.filter(L=>x.has(L.providerId)),x.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),no.apply(this,arguments)}function ro(v,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(v,f,g=!1){const I=yield vn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return vi._forOperation(v,"link",I)})).apply(this,arguments)}function As(v,f,g){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(v,f,g){yield Ci(f);const x=!1===v?"provider-already-linked":"no-such-provider";Z(Ss(f.providerData).has(g)===v,f.auth,x)})).apply(this,arguments)}function ka(v,f){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(v,f,g=!1){const{auth:I}=v,x="reauthenticate";try{const L=yield vn(v,Oc(I,x,f,v),g);Z(L.idToken,I,"internal-error");const Q=ht(L.idToken);Z(Q,I,"internal-error");const{sub:Ce}=Q;return Z(v.uid===Ce,I,"user-mismatch"),vi._forOperation(v,x,L)}catch(L){throw"auth/user-not-found"===L?.code&&Re(I,"user-mismatch"),L}})).apply(this,arguments)}function $o(v,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,m.Z)(function*(v,f,g=!1){const I="signIn",x=yield Oc(v,I,f),L=yield vi._fromIdTokenResponse(v,I,x);return g||(yield v._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Br(v,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,m.Z)(function*(v,f){return $o(cr(v),f)})).apply(this,arguments)}function Cu(v,f){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(v,f){const g=(0,B.m9)(v);return yield As(!1,g,f.providerId),ro(g,f)})).apply(this,arguments)}function Ho(v,f){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(v,f){return ka((0,B.m9)(v),f)})).apply(this,arguments)}function Go(){return(Go=(0,m.Z)(function*(v,f){return sn(v,"POST","/v1/accounts:signInWithCustomToken",yt(v,f))})).apply(this,arguments)}function La(v,f){return qi.apply(this,arguments)}function qi(){return qi=(0,m.Z)(function*(v,f){const g=cr(v),I=yield function fr(v,f){return Go.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),x=yield vi._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(x.user),x}),qi.apply(this,arguments)}class nr{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Fa._fromServerResponse(f,g):Re(f,"internal-error")}}class Fa extends nr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Fa(g)}}function Ms(v,f,g){var I;Z((null===(I=g.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),Z(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Z(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Z(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function hd(v,f,g){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v),x={requestType:"PASSWORD_RESET",email:f};g&&Ms(I,x,g),yield function Ca(v,f){return Fi.apply(this,arguments)}(I,x)}),Ai.apply(this,arguments)}function Su(v,f,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,m.Z)(function*(v,f,g){yield Er((0,B.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Pt(v,f){return so.apply(this,arguments)}function so(){return so=(0,m.Z)(function*(v,f){yield function nt(v,f){return Nt.apply(this,arguments)}((0,B.m9)(v),{oobCode:f})}),so.apply(this,arguments)}function fd(v,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,m.Z)(function*(v,f){const g=(0,B.m9)(v),I=yield Er(g,{oobCode:f}),x=I.requestType;switch(Z(x,g,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Z(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Z(I.mfaInfo,g,"internal-error");default:Z(I.email,g,"internal-error")}let L=null;return I.mfaInfo&&(L=nr._fromServerResponse(cr(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:L},operation:x}})).apply(this,arguments)}function pd(v,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,m.Z)(function*(v,f){const{data:g}=yield fd((0,B.m9)(v),f);return g.email})).apply(this,arguments)}function kc(v,f,g){return Au.apply(this,arguments)}function Au(){return(Au=(0,m.Z)(function*(v,f,g){const I=cr(v),x=yield Ff(I,{returnSecureToken:!0,email:f,password:g}),L=yield vi._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(L.user),L})).apply(this,arguments)}function gd(v,f,g){return Br((0,B.m9)(v),Ma.credential(f,g))}function he(v,f,g){return Yt.apply(this,arguments)}function Yt(){return Yt=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v),x={requestType:"EMAIL_SIGNIN",email:f};Z(g.handleCodeInApp,I,"argument-error"),g&&Ms(I,x,g),yield function Ht(v,f){return Fo.apply(this,arguments)}(I,x)}),Yt.apply(this,arguments)}function md(v,f){return"EMAIL_SIGNIN"===hr.parseLink(f)?.operation}function Lc(v,f,g){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v),x=Ma.credentialWithLink(f,g||re());return Z(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Br(I,x)})).apply(this,arguments)}function oo(){return(oo=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:createAuthUri",yt(v,f))})).apply(this,arguments)}function xi(v,f){return ao.apply(this,arguments)}function ao(){return ao=(0,m.Z)(function*(v,f){const I={identifier:f,continueUri:le()?re():"http://localhost"},{signinMethods:x}=yield function xu(v,f){return oo.apply(this,arguments)}((0,B.m9)(v),I);return x||[]}),ao.apply(this,arguments)}function Fc(v,f){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,m.Z)(function*(v,f){const g=(0,B.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Ms(g.auth,x,f);const{email:L}=yield function us(v,f){return _n.apply(this,arguments)}(g.auth,x);L!==v.email&&(yield v.reload())}),Ua.apply(this,arguments)}function yd(v,f,g){return uo.apply(this,arguments)}function uo(){return uo=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&Ms(I.auth,L,g);const{email:Q}=yield function Js(v,f){return Uo.apply(this,arguments)}(I.auth,L);Q!==v.email&&(yield v.reload())}),uo.apply(this,arguments)}function Rr(){return(Rr=(0,m.Z)(function*(v,f){return it(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function co(v,f){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,m.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const I=(0,B.m9)(v),L={idToken:yield I.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Q=yield vn(I,function br(v,f){return Rr.apply(this,arguments)}(I.auth,L));I.displayName=Q.displayName||null,I.photoURL=Q.photoUrl||null;const Ce=I.providerData.find(({providerId:tt})=>"password"===tt);Ce&&(Ce.displayName=I.displayName,Ce.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Q)}),Ki.apply(this,arguments)}function ls(v,f){return lo((0,B.m9)(v),f,null)}function Uc(v,f){return lo((0,B.m9)(v),null,f)}function lo(v,f,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,m.Z)(function*(v,f,g){const{auth:I}=v,L={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(L.email=f),g&&(L.password=g);const Q=yield vn(v,Vr(I,L));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ds{constructor(f,g,I={}){this.isNewUser=f,this.providerId=g,this.profile=I}}class qo extends ds{constructor(f,g,I,x){super(f,g,I),this.username=x}}class _d extends ds{constructor(f,g){super(f,"facebook.com",g)}}class Ru extends qo{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Vc extends ds{constructor(f,g){super(f,"google.com",g)}}class wd extends qo{constructor(f,g,I){super(f,"twitter.com",g,I)}}function Va(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function vd(v){var f,g;if(!v)return null;const{providerId:I}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},L=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const Q=null===(g=null===(f=ht(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Q)return new ds(L,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!I)return null;switch(I){case"facebook.com":return new _d(L,x);case"github.com":return new Ru(L,x);case"google.com":return new Vc(L,x);case"twitter.com":return new wd(L,x,v.screenName||null);case"custom":case"anonymous":return new ds(L,null);default:return new ds(L,I,x)}}(g)}class pn{constructor(f,g,I){this.type=f,this.credential=g,this.auth=I}static _fromIdtoken(f,g){return new pn("enroll",f,g)}static _fromMfaPendingCredential(f){return new pn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,I;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return pn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return pn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $c{constructor(f,g,I){this.session=f,this.hints=g,this.signInResolver=I}static _fromError(f,g){const I=cr(f),x=g.customData._serverResponse,L=(x.mfaInfo||[]).map(Ce=>nr._fromServerResponse(I,Ce));Z(x.mfaPendingCredential,I,"internal-error");const Q=pn._fromMfaPendingCredential(x.mfaPendingCredential);return new $c(Q,L,function(){var Ce=(0,m.Z)(function*(tt){const dt=yield tt._process(I,Q);delete x.mfaInfo,delete x.mfaPendingCredential;const qt=Object.assign(Object.assign({},x),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(g.operationType){case"signIn":const Sn=yield vi._fromIdTokenResponse(I,g.operationType,qt);return yield I._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return Z(g.user,I,"internal-error"),vi._forOperation(g.user,g.operationType,qt);default:Re(I,"internal-error")}});return function(tt){return Ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function Id(v,f){var g;const I=(0,B.m9)(v),x=f;return Z(f.customData.operationType,I,"argument-error"),Z(null===(g=x.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),$c._fromError(I,x)}class Hc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>nr._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new Hc(f)}getSession(){var f=this;return(0,m.Z)(function*(){return pn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var I=this;return(0,m.Z)(function*(){const x=f,L=yield I.getSession(),Q=yield vn(I.user,x._process(I.user.auth,L,g));return yield I.user._updateTokensIfNecessary(Q),I.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const I="string"==typeof f?f:f.uid,x=yield g.user.getIdToken();try{const L=yield vn(g.user,function $f(v,f){return it(v,"POST","/v2/accounts/mfaEnrollment:withdraw",yt(v,f))}(g.user.auth,{idToken:x,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Q})=>Q!==I),yield g.user._updateTokensIfNecessary(L),yield g.user.reload()}catch(L){throw L}})()}}const Ko=new WeakMap;function Zo(v){const f=(0,B.m9)(v);return Ko.has(f)||Ko.set(f,Hc._fromUser(f)),Ko.get(f)}const ho="__sak";class fo{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ho,"1"),this.storage.removeItem(ho),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const $r=(()=>{class v extends fo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ba(){const v=(0,B.z$)();return R(v)||$t(v)}()&&function vu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ur(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),L=this.localCache[I];x!==L&&g(I,L,x)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((Ce,tt,dt)=>{this.notifyListeners(Ce,dt)});const x=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(x);if(g.newValue!==Ce)null!==g.newValue?this.storage.setItem(x,g.newValue):this.storage.removeItem(x);else if(this.localCache[x]===g.newValue&&!I)return}const L=()=>{const Ce=this.storage.getItem(x);!I&&this.localCache[x]===Ce||this.notifyListeners(x,Ce)},Q=this.storage.getItem(x);!function Tt(){return(0,B.w1)()&&10===document.documentMode}()||Q===g.newValue||g.newValue===g.oldValue?L():setTimeout(L,10)}notifyListeners(g,I){this.localCache[g]=I;const x=this.listeners[g];if(x)for(const L of Array.from(x))L(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var x=()=>super._set,L=this;return(0,m.Z)(function*(){yield x().call(L,g,I),L.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,x=this;return(0,m.Z)(function*(){const L=yield I().call(x,g);return x.localCache[g]=JSON.stringify(L),L})()}_remove(g){var I=()=>super._remove,x=this;return(0,m.Z)(function*(){yield I().call(x,g),delete x.localCache[g]})()}}return v.type="LOCAL",v})(),Qo=(()=>{class v extends fo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return v.type="SESSION",v})();let Gc=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(L=>L.isListeningto(g));if(I)return I;const x=new v(g);return this.receivers.push(x),x}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,m.Z)(function*(){const x=g,{eventId:L,eventType:Q,data:Ce}=x.data,tt=I.handlersMap[Q];if(!tt?.size)return;x.ports[0].postMessage({status:"ack",eventId:L,eventType:Q});const dt=Array.from(tt).map(function(){var Sn=(0,m.Z)(function*(Bi){return Bi(x.origin,Ce)});return function(Bi){return Sn.apply(this,arguments)}}()),qt=yield function Gf(v){return Promise.all(v.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return f.apply(this,arguments)}}()))}(dt);x.ports[0].postMessage({status:"done",eventId:L,eventType:Q,response:qt})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Xo(v="",f=10){let g="";for(let I=0;I<f;I++)g+=Math.floor(10*Math.random());return v+g}class Nu{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,I=50){var x=this;return(0,m.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let Q,Ce;return new Promise((tt,dt)=>{const qt=Xo("",20);L.port1.start();const Sn=setTimeout(()=>{dt(new Error("unsupported_event"))},I);Ce={messageChannel:L,onMessage(Bi){const ys=Bi;if(ys.data.eventId===qt)switch(ys.data.status){case"ack":clearTimeout(Sn),Q=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),tt(ys.data.response);break;default:clearTimeout(Sn),clearTimeout(Q),dt(new Error("invalid_response"))}}},x.handlers.add(Ce),L.port1.addEventListener("message",Ce.onMessage),x.target.postMessage({eventType:f,eventId:qt,data:g},[L.port2])}).finally(()=>{Ce&&x.removeMessageHandler(Ce)})})()}}function Dn(){return window}function Ps(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function Mi(){return(Mi=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const go="firebaseLocalStorageDb",Ou=1,ks="firebaseLocalStorage",mo="fbase_key";class Yi{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Jo(v,f){return v.transaction([ks],f?"readwrite":"readonly").objectStore(ks)}function Ls(){const v=indexedDB.open(go,Ou);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(ks,{keyPath:mo})}catch(x){g(x)}}),v.addEventListener("success",(0,m.Z)(function*(){const I=v.result;I.objectStoreNames.contains(ks)?f(I):(I.close(),yield function zc(){const v=indexedDB.deleteDatabase(go);return new Yi(v).toPromise()}(),f(yield Ls()))}))})}function ku(v,f,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,m.Z)(function*(v,f,g){const I=Jo(v,!0).put({[mo]:f,value:g});return new Yi(I).toPromise()})).apply(this,arguments)}function hs(){return(hs=(0,m.Z)(function*(v,f){const g=Jo(v,!1).get(f),I=yield new Yi(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Fs(v,f){const g=Jo(v,!0).delete(f);return new Yi(g).toPromise()}const ea=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Ls()),g.db})()}_withRetries(g){var I=this;return(0,m.Z)(function*(){let x=0;for(;;)try{const L=yield I._openDb();return yield g(L)}catch(L){if(x++>3)throw L;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Ps()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Gc._getInstance(function Pu(){return Ps()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,m.Z)(function*(x,L){return{keyProcessed:(yield g._poll()).includes(L.key)}});return function(x,L){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,m.Z)(function*(x,L){return["keyChanged"]});return function(x,L){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var I,x;if(g.activeServiceWorker=yield function Os(){return Mi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Nu(g.activeServiceWorker);const L=yield g.sender._send("ping",{},800);L&&null!==(I=L[0])&&void 0!==I&&I.fulfilled&&null!==(x=L[0])&&void 0!==x&&x.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,m.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function $a(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ls();return yield ku(g,ho,"1"),yield Fs(g,ho),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,m.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var x=this;return(0,m.Z)(function*(){return x._withPendingWrite((0,m.Z)(function*(){return yield x._withRetries(L=>ku(L,g,I)),x.localCache[g]=I,x.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,m.Z)(function*(){const x=yield I._withRetries(L=>function Lu(v,f){return hs.apply(this,arguments)}(L,g));return I.localCache[g]=x,x})()}_remove(g){var I=this;return(0,m.Z)(function*(){return I._withPendingWrite((0,m.Z)(function*(){return yield I._withRetries(x=>Fs(x,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const I=yield g._withRetries(Q=>{const Ce=Jo(Q,!1).getAll();return new Yi(Ce).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const x=[],L=new Set;for(const{fbase_key:Q,value:Ce}of I)L.add(Q),JSON.stringify(g.localCache[Q])!==JSON.stringify(Ce)&&(g.notifyListeners(Q,Ce),x.push(Q));for(const Q of Object.keys(g.localCache))g.localCache[Q]&&!L.has(Q)&&(g.notifyListeners(Q,null),x.push(Q));return x})()}notifyListeners(g,I){this.localCache[g]=I;const x=this.listeners[g];if(x)for(const L of Array.from(x))L(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function _i(){return(_i=(0,m.Z)(function*(v){return(yield it(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fs(v){return new Promise((f,g)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=f,I.onerror=x=>{const L=Se("internal-error");L.customData=x,g(L)},I.type="text/javascript",I.charset="UTF-8",function Kc(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(I)})}function Vi(v){return`__${v}${Math.floor(1e6*Math.random())}`}const wi=1e12;class ps{constructor(f){this.auth=f,this.counter=wi,this._widgets=new Map}render(f,g){const I=this.counter;return this._widgets.set(I,new zf(f,this.auth.name,g||{})),this.counter++,I}reset(f){var g;const I=f||wi;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(f){var g;return(null===(g=this._widgets.get(f||wi))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var I;return null===(I=g._widgets.get(f||wi))||void 0===I||I.execute(),""})()}}class zf{constructor(f,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof f?document.getElementById(f):f;Z(x,"argument-error",{appName:g}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Zc(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yo=Vi("rcb"),Wf=new Le(3e4,6e4);class qa{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Dn().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return Z(function Qi(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Dn().grecaptcha):new Promise((I,x)=>{const L=Dn().setTimeout(()=>{x(Se(f,"network-request-failed"))},Wf.get());Dn()[yo]=()=>{Dn().clearTimeout(L),delete Dn()[yo];const Ce=Dn().grecaptcha;if(!Ce)return void x(Se(f,"internal-error"));const tt=Ce.render;Ce.render=(dt,qt)=>{const Sn=tt(dt,qt);return this.counter++,Sn},this.hostLanguage=g,I(Ce)},fs(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:yo,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(L),x(Se(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Dn().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class na{load(f){return(0,m.Z)(function*(){return new ps(f)})()}clearedOneInstance(){}}const ra="recaptcha",bd={theme:"light",type:"image"};class Td{constructor(f,g=Object.assign({},bd),I){this.parameters=g,this.type=ra,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cr(I),this.isInvisible="invisible"===this.parameters.size,Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof f?document.getElementById(f):f;Z(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new na:new qa,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(g)||new Promise(L=>{const Q=Ce=>{Ce&&(f.tokenChangeListeners.delete(Q),L(Ce))};f.tokenChangeListeners.add(Q),f.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof f)f(g);else if("string"==typeof f){const I=Dn()[f];"function"==typeof I&&I(g)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){Z(le()&&!Ps(),f.auth,"internal-error"),yield function ia(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function qc(v){return _i.apply(this,arguments)}(f.auth);Z(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Uu{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=zi._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function qf(v,f,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(v,f,g){const I=cr(v),x=yield Vu(I,f,(0,B.m9)(g));return new Uu(x,L=>Br(I,L))})).apply(this,arguments)}function Kf(v,f,g){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v);yield As(!1,I,"phone");const x=yield Vu(I.auth,f,(0,B.m9)(g));return new Uu(x,L=>Cu(I,L))})).apply(this,arguments)}function Sd(v,f,g){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v),x=yield Vu(I.auth,f,(0,B.m9)(g));return new Uu(x,L=>Ho(I,L))})).apply(this,arguments)}function Vu(v,f,g){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,m.Z)(function*(v,f,g){var I;const x=yield g.verify();try{let L;if(Z("string"==typeof x,v,"argument-error"),Z(g.type===ra,v,"argument-error"),L="string"==typeof f?{phoneNumber:f}:f,"session"in L){const Q=L.session;if("phoneNumber"in L)return Z("enroll"===Q.type,v,"internal-error"),(yield function Tr(v,f){return it(v,"POST","/v2/accounts/mfaEnrollment:start",yt(v,f))}(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Z("signin"===Q.type,v,"internal-error");const Ce=(null===(I=L.multiFactorHint)||void 0===I?void 0:I.uid)||L.multiFactorUid;return Z(Ce,v,"missing-multi-factor-info"),(yield function Wc(v,f){return it(v,"POST","/v2/accounts/mfaSignIn:start",yt(v,f))}(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Du(v,f){return Aa.apply(this,arguments)}(v,{phoneNumber:L.phoneNumber,recaptchaToken:x});return Q}}finally{g._reset()}}),Yc.apply(this,arguments)}function Qc(v,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(v,f){yield ro((0,B.m9)(v),f)})).apply(this,arguments)}let Im=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=cr(g)}verifyPhoneNumber(g,I){return Vu(this.auth,g,(0,B.m9)(I))}static credential(g,I){return zi._fromVerification(g,I)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:x}=g;return I&&x?zi._fromTokenResponse(I,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function sa(v,f){return f?je(f):(Z(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class $n extends En{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return mi(f,this._buildIdpRequest())}_linkToIdToken(f,g){return mi(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return mi(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Bu(v){return $o(v.auth,new $n(v),v.bypassAuthState)}function Ka(v){const{auth:f,user:g}=v;return Z(g,f,"internal-error"),ka(g,new $n(v),v.bypassAuthState)}function Xc(v){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(v){const{auth:f,user:g}=v;return Z(g,f,"internal-error"),ro(g,new $n(v),v.bypassAuthState)})).apply(this,arguments)}class Ji{constructor(f,g,I,x,L=!1){this.auth=f,this.resolver=I,this.user=x,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(I,x){f.pendingPromise={resolve:I,reject:x};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(L){f.reject(L)}});return function(I,x){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:L,tenantId:Q,error:Ce,type:tt}=f;if(Ce)return void g.reject(Ce);const dt={auth:g.auth,requestUri:I,sessionId:x,tenantId:Q||void 0,postBody:L||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(tt)(dt))}catch(qt){g.reject(qt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Bu;case"linkViaPopup":case"linkViaRedirect":return Xc;case"reauthViaPopup":case"reauthViaRedirect":return Ka;default:Re(this.auth,"internal-error")}}resolve(f){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ju=new Le(2e3,1e4);function vo(v,f,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(v,f,g){const I=cr(v);De(v,f,Wi);const x=sa(I,g);return new Hr(I,"signInViaPopup",f,x).executeNotNull()})).apply(this,arguments)}function Jc(v,f,g){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v);De(I.auth,f,Wi);const x=sa(I.auth,g);return new Hr(I.auth,"reauthViaPopup",f,x,I).executeNotNull()})).apply(this,arguments)}function Em(v,f,g){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v);De(I.auth,f,Wi);const x=sa(I.auth,g);return new Hr(I.auth,"linkViaPopup",f,x,I).executeNotNull()})).apply(this,arguments)}let Hr=(()=>{class v extends Ji{constructor(g,I,x,L,Q){super(g,I,L,Q),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const I=yield g.execute();return Z(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,m.Z)(function*(){ye(1===g.filter.length,"Popup operations only handle one event");const I=Xo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(x=>{g.reject(x)}),g.resolver._isIframeWebStorageSupported(g.auth,x=>{x||g.reject(Se(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ju.get())};g()}}return v.currentPopupAction=null,v})();const el="pendingRedirect",Gr=new Map;class Ad extends Ji{constructor(f,g,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let I=Gr.get(g.auth._key());if(!I){try{const L=(yield function xd(v,f){return zr.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;I=()=>Promise.resolve(L)}catch(x){I=()=>Promise.reject(x)}Gr.set(g.auth._key(),I)}return g.bypassAuthState||Gr.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,I=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(I,f);if("unknown"!==f.type){if(f.eventId){const x=yield I.auth._redirectUserForId(f.eventId);if(x)return I.user=x,g().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function zr(){return(zr=(0,m.Z)(function*(v,f){const g=oa(f),I=ms(v);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(g));return yield I._remove(g),x})).apply(this,arguments)}function Sr(v,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(v,f){return ms(v)._set(oa(f),"true")})).apply(this,arguments)}function an(){Gr.clear()}function gt(v,f){Gr.set(v._key(),f)}function ms(v){return je(v._redirectPersistence)}function oa(v){return $(el,v.config.apiKey,v.name)}function Bs(v,f,g){return function aa(v,f,g){return Hn.apply(this,arguments)}(v,f,g)}function Hn(){return(Hn=(0,m.Z)(function*(v,f,g){const I=cr(v);De(v,f,Wi),yield I._initializationPromise;const x=sa(I,g);return yield Sr(x,I),x._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function D(v,f,g){return function T(v,f,g){return A.apply(this,arguments)}(v,f,g)}function A(){return(A=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v);De(I.auth,f,Wi),yield I.auth._initializationPromise;const x=sa(I.auth,g);yield Sr(x,I.auth);const L=yield St(I);return x._openRedirect(I.auth,f,"reauthViaRedirect",L)})).apply(this,arguments)}function V(v,f,g){return function K(v,f,g){return ee.apply(this,arguments)}(v,f,g)}function ee(){return(ee=(0,m.Z)(function*(v,f,g){const I=(0,B.m9)(v);De(I.auth,f,Wi),yield I.auth._initializationPromise;const x=sa(I.auth,g);yield As(!1,I,f.providerId),yield Sr(x,I.auth);const L=yield St(I);return x._openRedirect(I.auth,f,"linkViaRedirect",L)})).apply(this,arguments)}function Me(v,f){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(v,f){return yield cr(v)._initializationPromise,ct(v,f,!1)})).apply(this,arguments)}function ct(v,f){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(v,f,g=!1){const I=cr(v),x=sa(I,f),Q=yield new Ad(I,x,g).execute();return Q&&!g&&(delete Q.user._redirectEventId,yield I._persistUserIfCurrent(Q.user),yield I._setRedirectUser(null,f)),Q})).apply(this,arguments)}function St(v){return Et.apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(v){const f=Xo(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class Gn{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(g=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ni(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return js(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var I;if(f.error&&!js(f)){const x=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Se(this.auth,x))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const I=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(f))}saveEventToCache(f){this.cachedEventUids.add(ua(f)),this.lastProcessedEventTime=Date.now()}}function ua(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function js({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function qr(v){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(v,f={}){return it(v,"GET","/v1/projects",f)})).apply(this,arguments)}const $s=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ar=/^https?/;function ca(){return(ca=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield qr(v);for(const g of f)try{if(B_(g))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function B_(v){const f=re(),{protocol:g,hostname:I}=new URL(f);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===I?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Q.hostname===I}if(!Ar.test(g))return!1;if($s.test(v))return I===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Dm=new Le(3e4,6e4);function bm(){const v=Dn().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Rd=null;const j_=new Le(5e3,15e3),$_="__/auth/iframe",Jf="emulator/auth/iframe",GE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WE(v){const f=v.config;Z(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?Je(f,Jf):`https://${v.config.authDomain}/${$_}`,I={apiKey:f.apiKey,appName:v.name,v:N.SDK_VERSION},x=zE.get(v.config.apiHost);x&&(I.eid=x);const L=v._getFrameworks();return L.length&&(I.fw=L.join(",")),`${g}?${(0,B.xO)(I).slice(1)}`}function Tm(){return Tm=(0,m.Z)(function*(v){const f=yield function Xf(v){return Rd=Rd||function Md(v){return new Promise((f,g)=>{var I,x,L;function Q(){bm(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{bm(),g(Se(v,"network-request-failed"))},timeout:Dm.get()})}if(null!==(x=null===(I=Dn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)f(gapi.iframes.getContext());else{if(null===(L=Dn().gapi)||void 0===L||!L.load){const Ce=Vi("iframefcb");return Dn()[Ce]=()=>{gapi.load?Q():g(Se(v,"network-request-failed"))},fs(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(tt=>g(tt))}Q()}}).catch(f=>{throw Rd=null,f})}(v),Rd}(v),g=Dn().gapi;return Z(g,v,"internal-error"),f.open({where:document.body,url:WE(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GE,dontclear:!0},I=>new Promise(function(){var x=(0,m.Z)(function*(L,Q){yield I.restyle({setHideOnLeave:!1});const Ce=Se(v,"network-request-failed"),tt=Dn().setTimeout(()=>{Q(Ce)},j_.get());function dt(){Dn().clearTimeout(tt),L(I)}I.ping(dt).then(dt,()=>{Q(Ce)})});return function(L,Q){return x.apply(this,arguments)}}()))}),Tm.apply(this,arguments)}const H_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cm=500,ge=600,_o="_blank",$u="http://localhost";class nn{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ep="__/auth/handler",Sm="emulator/auth/handler";function ir(v,f,g,I,x,L){Z(v.config.authDomain,v,"auth-domain-config-required"),Z(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:I,v:N.SDK_VERSION,eventId:x};if(f instanceof Wi){f.setDefaultLanguage(v.languageCode),Q.providerId=f.providerId||"",(0,B.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tt,dt]of Object.entries(L||{}))Q[tt]=dt}if(f instanceof eo){const tt=f.getScopes().filter(dt=>""!==dt);tt.length>0&&(Q.scopes=tt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const Ce=Q;for(const tt of Object.keys(Ce))void 0===Ce[tt]&&delete Ce[tt];return`${function Pd({config:v}){return v.emulator?Je(v,Sm):`https://${v.authDomain}/${ep}`}(v)}?${(0,B.xO)(Ce).slice(1)}`}const Za="webStorageSupport",tp=class Od{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qo,this._completeRedirectFn=ct,this._overrideRedirectResult=gt}_openPopup(f,g,I,x){var L=this;return(0,m.Z)(function*(){var Q;ye(null===(Q=L.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const Ce=ir(f,g,I,re(),x);return function Pr(v,f,g,I=Cm,x=ge){const L=Math.max((window.screen.availHeight-x)/2,0).toString(),Q=Math.max((window.screen.availWidth-I)/2,0).toString();let Ce="";const tt=Object.assign(Object.assign({},H_),{width:I.toString(),height:x.toString(),top:L,left:Q}),dt=(0,B.z$)().toLowerCase();g&&(Ce=Y(dt)?_o:g),k(dt)&&(f=f||$u,tt.scrollbars="yes");const qt=Object.entries(tt).reduce((Bi,[ys,Ya])=>`${Bi}${ys}=${Ya},`,"");if(function Tn(v=(0,B.z$)()){var f;return $t(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(dt)&&"_self"!==Ce)return function Nd(v,f){const g=document.createElement("a");g.href=v,g.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(f||"",Ce),new nn(null);const Sn=window.open(f||"",Ce,qt);Z(Sn,v,"popup-blocked");try{Sn.focus()}catch{}return new nn(Sn)}(f,Ce,Xo())})()}_openRedirect(f,g,I,x){var L=this;return(0,m.Z)(function*(){return yield L._originValidation(f),function ja(v){Dn().location.href=v}(ir(f,g,I,re(),x)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:x,promise:L}=this.eventManagers[g];return x?Promise.resolve(x):(ye(L,"If manager is not set, promise should be"),L)}const I=this.initAndGetManager(f);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const I=yield function qE(v){return Tm.apply(this,arguments)}(f),x=new Gn(f);return I.register("authEvent",L=>(Z(L?.authEvent,f,"invalid-auth-event"),{status:x.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:x},g.iframes[f._key()]=I,x})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Za,{type:Za},x=>{var L;const Q=null===(L=x?.[0])||void 0===L?void 0:L[Za];void 0!==Q&&g(!!Q),Re(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Qf(v){return ca.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ur()||R()||$t()}};class np{constructor(f){this.factorId=f}_process(f,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,I);case"signin":return this._finalizeSignIn(f,g.credential);default:return se("unexpected MultiFactorSessionType")}}}class kd extends np{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new kd(f)}_finalizeEnroll(f,g,I){return function Ed(v,f){return it(v,"POST","/v2/accounts/mfaEnrollment:finalize",yt(v,f))}(f,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ta(v,f){return it(v,"POST","/v2/accounts/mfaSignIn:finalize",yt(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let rp=(()=>{class v{constructor(){}static assertion(g){return kd._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var ri="@firebase/auth";class ip{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(I=>{f(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function gn(v){(0,N._registerComponent)(new ie.wA("auth",(f,{options:g})=>{const I=f.getProvider("app").getImmediate(),x=f.getProvider("heartbeat"),{apiKey:L,authDomain:Q}=I.options;return((Ce,tt)=>{Z(L&&!L.includes(":"),"invalid-api-key",{appName:Ce.name}),Z(!Q?.includes(":"),"argument-error",{appName:Ce.name});const dt={apiKey:L,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ys(v)},qt=new wu(Ce,tt,dt);return function Xe(v,f){const g=f?.persistence||[],I=(Array.isArray(g)?g:[g]).map(je);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(I,f?.popupRedirectResolver)}(qt,g),qt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,I)=>{f.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ie.wA("auth-internal",f=>{const g=cr(f.getProvider("auth").getImmediate());return new ip(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(ri,"0.21.4",function Ld(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(ri,"0.21.4","esm2017")}("Browser")},2090:(pt,be,F)=>{F.d(be,{$s:()=>wt,BH:()=>De,G6:()=>Ae,L:()=>de,LL:()=>_t,Pz:()=>xe,Sg:()=>$e,UG:()=>ye,US:()=>ie,ZB:()=>q,ZR:()=>rn,aH:()=>Se,b$:()=>Dt,eu:()=>Le,hl:()=>ke,jU:()=>ze,m9:()=>Vn,ne:()=>Mt,pd:()=>Fn,r3:()=>Ln,ru:()=>je,tV:()=>H,uI:()=>se,vZ:()=>ar,w1:()=>re,xO:()=>wr,xb:()=>gi,z$:()=>Z,zI:()=>Je,zd:()=>Wn});const J=function($){const j=[];let P=0;for(let k=0;k<$.length;k++){let R=$.charCodeAt(k);R<128?j[P++]=R:R<2048?(j[P++]=R>>6|192,j[P++]=63&R|128):55296==(64512&R)&&k+1<$.length&&56320==(64512&$.charCodeAt(k+1))?(R=65536+((1023&R)<<10)+(1023&$.charCodeAt(++k)),j[P++]=R>>18|240,j[P++]=R>>12&63|128,j[P++]=R>>6&63|128,j[P++]=63&R|128):(j[P++]=R>>12|224,j[P++]=R>>6&63|128,j[P++]=63&R|128)}return j},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const P=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let R=0;R<$.length;R+=3){const Y=$[R],me=R+1<$.length,Ze=me?$[R+1]:0,We=R+2<$.length,bt=We?$[R+2]:0;let Tn=(15&Ze)<<2|bt>>6,Tt=63&bt;We||(Tt=64,me||(Tn=64)),k.push(P[Y>>2],P[(3&Y)<<4|Ze>>4],P[Tn],P[Tt])}return k.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(J($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let P=0,k=0;for(;P<$.length;){const R=$[P++];if(R<128)j[k++]=String.fromCharCode(R);else if(R>191&&R<224){const Y=$[P++];j[k++]=String.fromCharCode((31&R)<<6|63&Y)}else if(R>239&&R<365){const We=((7&R)<<18|(63&$[P++])<<12|(63&$[P++])<<6|63&$[P++])-65536;j[k++]=String.fromCharCode(55296+(We>>10)),j[k++]=String.fromCharCode(56320+(1023&We))}else{const Y=$[P++],me=$[P++];j[k++]=String.fromCharCode((15&R)<<12|(63&Y)<<6|63&me)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const P=j?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let R=0;R<$.length;){const Y=P[$.charAt(R++)],Ze=R<$.length?P[$.charAt(R)]:0;++R;const bt=R<$.length?P[$.charAt(R)]:64;++R;const Rt=R<$.length?P[$.charAt(R)]:64;if(++R,null==Y||null==Ze||null==bt||null==Rt)throw new fe;k.push(Y<<2|Ze>>4),64!==bt&&(k.push(Ze<<4&240|bt>>2),64!==Rt&&k.push(bt<<6&192|Rt))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const de=function($){return function($){const j=J($);return ie.encodeByteArray(j,!0)}($).replace(/\./g,"")},H=function($){try{return ie.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function q($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const P in j)!j.hasOwnProperty(P)||!Ue(P)||($[P]=q($[P],j[P]));return $}function Ue($){return"__proto__"!==$}const Ee=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=$&&H($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Se=()=>{var $;return null===($=Ee())||void 0===$?void 0:$.config},xe=$=>{var j;return null===(j=Ee())||void 0===j?void 0:j[`_${$}`]};class De{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,P)=>{this.resolve=j,this.reject=P})}wrapCallback(j){return(P,k)=>{P?this.reject(P):this.resolve(k),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(P):j(P,k))}}}function $e($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=j||"demo-project",R=$.iat||0,Y=$.sub||$.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const me=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:R,exp:R+3600,auth_time:R,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},$);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(me)),""].join(".")}function Z(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function ye(){var $;const j=null===($=Ee())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function je(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Dt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const $=Z();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Ae(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function Le(){return new Promise(($,j)=>{try{let P=!0;const k="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(k);R.onsuccess=()=>{R.result.close(),P||self.indexedDB.deleteDatabase(k),$(!0)},R.onupgradeneeded=()=>{P=!1},R.onerror=()=>{var Y;j((null===(Y=R.error)||void 0===Y?void 0:Y.message)||"")}}catch(P){j(P)}})}function Je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(j,P,k){super(P),this.code=j,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_t.prototype.create)}}class _t{constructor(j,P,k){this.service=j,this.serviceName=P,this.errors=k}create(j,...P){const k=P[0]||{},R=`${this.service}/${j}`,Y=this.errors[j],me=Y?function yt($,j){return $.replace(it,(P,k)=>{const R=j[k];return null!=R?String(R):`<${k}?>`})}(Y,k):"Error";return new rn(R,`${this.serviceName}: ${me} (${R}).`,k)}}const it=/\{\$([^}]+)}/g;function Ln($,j){return Object.prototype.hasOwnProperty.call($,j)}function gi($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function ar($,j){if($===j)return!0;const P=Object.keys($),k=Object.keys(j);for(const R of P){if(!k.includes(R))return!1;const Y=$[R],me=j[R];if(st(Y)&&st(me)){if(!ar(Y,me))return!1}else if(Y!==me)return!1}for(const R of k)if(!P.includes(R))return!1;return!0}function st($){return null!==$&&"object"==typeof $}function wr($){const j=[];for(const[P,k]of Object.entries($))Array.isArray(k)?k.forEach(R=>{j.push(encodeURIComponent(P)+"="+encodeURIComponent(R))}):j.push(encodeURIComponent(P)+"="+encodeURIComponent(k));return j.length?"&"+j.join("&"):""}function Wn($){const j={};return $.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[R,Y]=k.split("=");j[decodeURIComponent(R)]=decodeURIComponent(Y)}}),j}function Fn($){const j=$.indexOf("?");if(!j)return"";const P=$.indexOf("#",j);return $.substring(j,P>0?P:void 0)}function Mt($,j){const P=new ht($,j);return P.subscribe.bind(P)}class ht{constructor(j,P){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=P,this.task.then(()=>{j(this)}).catch(k=>{this.error(k)})}next(j){this.forEachObserver(P=>{P.next(j)})}error(j){this.forEachObserver(P=>{P.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,P,k){let R;if(void 0===j&&void 0===P&&void 0===k)throw new Error("Missing Observer.");R=function vn($,j){if("object"!=typeof $||null===$)return!1;for(const P of j)if(P in $&&"function"==typeof $[P])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:P,complete:k},void 0===R.next&&(R.next=xn),void 0===R.error&&(R.error=xn),void 0===R.complete&&(R.complete=xn);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Y}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let P=0;P<this.observers.length;P++)this.sendOne(P,j)}sendOne(j,P){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{P(this.observers[j])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}const Un=1e3,Ve=2,we=144e5,et=.5;function wt($,j=Un,P=Ve){const k=j*Math.pow(P,$),R=Math.round(et*k*(Math.random()-.5)*2);return Math.min(we,k+R)}function Vn($){return $&&$._delegate?$._delegate:$}},1456:(pt,be,F)=>{var m=F(4650);let B=null;function N(){return B}class ne{}const ie=new m.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ae(){return(0,m.LFG)(H)}()},providedIn:"platform"}),n})();const de=new m.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){G()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){G()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ie))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function q(){return new H((0,m.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ot=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Ee)},providedIn:"root"}),n})();const pe=new m.OlP("appBaseHref");let Ee=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+Ge(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+Ge(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ie=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+Ge(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+Ge(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(fe),m.LFG(pe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(De(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function xe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,De(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Ue,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(m.LFG(ot))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Se(){return new Re((0,m.LFG)(ot))}()},providedIn:"root"}),n})();function De(n){return n.replace(/\/index.html$/,"")}let Fi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ht,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ht{constructor(){this.$implicit=null,this.ngIf=null}}function Fo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Ra=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const Na="server";function Oc(n){return n===Na}let ro=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Oa((0,m.LFG)(ie),window)}),n})();class Oa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function io(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=As(this.window.history)||As(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function As(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fo extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ba extends fo{static makeCurrent(){!function J(n){B||(B=n)}(new Ba)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function po(){return Yo=Yo||document.querySelector("base"),Yo?Yo.getAttribute("href"):null}();return null==t?null:function $r(n){Ns=Ns||document.createElement("a"),Ns.setAttribute("href",n);const e=Ns.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Vr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Ns,Yo=null;const Hf=new m.OlP("TRANSITION_ID"),Gf=[{provide:m.ip1,useFactory:function Qo(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Hf,ie,m.zs3],multi:!0}];let Xo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Nu=new m.OlP("EventManagerPlugins");let Dn=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Nu),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ps=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Os=(()=>{class n extends Ps{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ie))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Mi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$a=/%COMP%/g,Yi=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ls(n,e){return e.flat(100).map(t=>t.replace($a,n))}function ku(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Cr=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Lu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof ea?o.applyToHost(t):o instanceof za&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case m.ifc.Emulated:u=new ea(l,p,r,this.appId,_);break;case m.ifc.ShadowDom:return new Ga(l,p,t,r);default:u=new za(l,p,r,_)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Dn),m.LFG(Os),m.LFG(m.AFp),m.LFG(Yi))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Lu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Mi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ha(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ha(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Mi[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Mi[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ku(r)):this.eventManager.addEventListener(e,t,ku(r))}}function Ha(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ga extends Lu{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ls(o.id,o.styles);for(const l of u){const p=document.createElement("style");p.textContent=l,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class za extends Lu{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=Ls(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ea extends za{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Jo(n){return"_ngcontent-%COMP%".replace($a,n)}(l),this.hostAttr=function zc(n){return"_nghost-%COMP%".replace($a,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Wc=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ie))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ta=["alt","control","meta","shift"],qc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_i={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Kc=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),l="code."),ta.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let o=qc[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ta.forEach(l=>{l!==o&&(0,_i[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ie))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Wf=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function ps(){Ba.makeCurrent()},multi:!0},{provide:ie,useFactory:function Zc(){return(0,m.RDi)(document),document},deps:[]}]),Fu=new m.OlP(""),qa=[{provide:m.rWj,useClass:class Gc{addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const p=function(_){l=l||_,u--,0==u&&r(l)};o.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],Qi=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function zf(){return new m.qLn},deps:[]},{provide:Nu,useClass:Wc,multi:!0,deps:[ie,m.R0b,m.Lbi]},{provide:Nu,useClass:Kc,multi:!0,deps:[ie]},{provide:Cr,useClass:Cr,deps:[Dn,Os,m.AFp,Yi]},{provide:m.FYo,useExisting:Cr},{provide:Ps,useExisting:Os},{provide:Os,useClass:Os,deps:[ie]},{provide:Dn,useClass:Dn,deps:[Nu,m.R0b]},{provide:class Tu{},useClass:Xo,deps:[]},[]];let na=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Hf,useExisting:m.AFp},Gf]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fu,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...Qi,...qa],imports:[Ra,m.hGG]}),n})(),Uu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ie))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ia(){return new Uu((0,m.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var zr=F(2011),Sr=F(7579),Vs=F(7669),an=F(8996);function gt(...n){const e=(0,Vs.yG)(n);return(0,an.D)(n,e)}var ms=F(9751),oa=F(6451),Bs=F(5363),aa=F(8421),Hn=F(4482),D=F(5403);function T(n,e){return(0,Hn.e)((t,r)=>{let o=null,u=0,l=!1;const p=()=>l&&!o&&r.complete();t.subscribe((0,D.x)(r,_=>{o?.unsubscribe();let b=0;const S=u++;(0,aa.Xf)(n(_,S)).subscribe(o=(0,D.x)(r,O=>r.next(e?e(_,O,S,b++):O),()=>{o=null,p()}))},()=>{l=!0,p()}))})}var A=F(4004),V=F(6063);class K extends Sr.x{constructor(e=1/0,t=1/0,r=V.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)p=_;p&&r.splice(0,p+1)}}}var ee=F(3099);function Me(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,ee.B)({connector:()=>new K(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const ct=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rt(n,e){return(0,Hn.e)((t,r)=>{let o=0;t.subscribe((0,D.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var St=F(515);function Et(n){return n<=0?()=>St.E:(0,Hn.e)((e,t)=>{let r=0;e.subscribe((0,D.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Wr(n){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe((0,D.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Gn(n=ua){return(0,Hn.e)((e,t)=>{let r=!1;e.subscribe((0,D.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ua(){return new ct}var js=F(4671);function ni(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rt((o,u)=>n(o,u,r)):js.y,Et(1),t?Wr(e):Gn(()=>new ct))}var qr=F(576);function Ri(n,e){return(0,qr.m)(e)?T(()=>n,e):T(()=>n)}var $s=F(9468),Ar=F(2122);F(259);var ge=F(5861),_o=F(9681),$u=F(4859),nn=F(2090),Pr=F(1877);const Nd=new Map,ep={activated:!1,tokenObservers:[]},Sm={initialized:!1,enabled:!1};function ir(n){return Nd.get(n)||Object.assign({},ep)}function Za(){return Sm}const Od="https://content-firebaseappcheck.googleapis.com/v1",kd="exchangeDebugToken",rp={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tl{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function ip(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gn=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ud(n,e){return v.apply(this,arguments)}function v(){return(v=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const O=yield o.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,p;try{l=yield fetch(n,u)}catch(O){throw gn.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==l.status)throw gn.create("fetch-status-error",{httpStatus:l.status});try{p=yield l.json()}catch(O){throw gn.create("fetch-parse-error",{originalErrorMessage:O?.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw gn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:p.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}})).apply(this,arguments)}const x="firebase-app-check-database",L=1,Q="firebase-app-check-store";let tt=null;function Ya(n,e){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,ge.Z)(function*(n,e){const r=(yield function dt(){return tt||(tt=new Promise((n,e)=>{try{const t=indexedDB.open(x,L);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(gn.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Q,{keyPath:"compositeKey"})}}catch(t){e(gn.create("storage-open",{originalErrorMessage:t?.message}))}}),tt)}()).transaction(Q,"readwrite"),u=r.objectStore(Q).put({compositeKey:n,value:e});return new Promise((l,p)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var b;p(gn.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Gs=new Pr.Yd("@firebase/app-check");function zu(n,e){return(0,nn.hl)()?function Sn(n,e){return Ya(function Vd(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Gs.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jd(){return $d.apply(this,arguments)}function $d(){return($d=(0,ge.Z)(function*(){const n=Za();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Am={error:"UNKNOWN_ERROR"};function KE(n){return nn.US.encodeString(JSON.stringify(n),!1)}function ap(n){return up.apply(this,arguments)}function up(){return(up=(0,ge.Z)(function*(n,e=!1){const t=n.app;!function Fd(n){if(!ir(n).activated)throw gn.create("use-before-activation",{appName:n.name})}(t);const r=ir(t);let u,o=r.token;if(o&&!Hd(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(Hd(_)?o=_:yield zu(t,void 0))}if(!e&&o&&Hd(o))return{token:o.token};let p,l=!1;if(function il(){return Za().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Ud(function I(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${Od}/projects/${t}/apps/${r}:${kd}?key=${o}`,body:{debug_token:e}}}(t,yield jd()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield zu(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield ir(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Gs.warn(_.message):Gs.error(_),u=_}return o?u?p=Hd(o)?{token:o.token,internalError:u}:Gd(u):(p={token:o.token},r.token=o,yield zu(t,o)):p=Gd(u),l&&function W_(n,e){const t=ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,p),p})).apply(this,arguments)}function la(n,e){const t=ir(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xm(n){const{app:e}=n,t=ir(e);let r=t.tokenRefresher;r||(r=function z_(n){const{app:e}=n;return new tl((0,ge.Z)(function*(){let r;if(r=ir(e).token?yield ap(n,!0):yield ap(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},rp.RETRIAL_MIN_WAIT,rp.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Hd(n){return n.expireTimeMillis-Date.now()>0}function Gd(n){return{token:KE(Am),error:n}}class ZE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ir(this.app);for(const t of e)la(this.app,t.next);return Promise.resolve()}}const r0="app-check-internal";!function s0(){(0,_o._registerComponent)(new $u.wA("app-check",n=>function q_(n,e){return new ZE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(r0).initialize()})),(0,_o._registerComponent)(new $u.wA(r0,n=>function K_(n){return{getToken:e=>ap(n,e),addTokenListener:e=>function cp(n,e,t,r){const{app:o}=n,u=ir(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Hd(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),xm(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>xm(n))}(n,"INTERNAL",e),removeTokenListener:e=>la(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_o.registerVersion)("@firebase/app-check","0.6.4")}();class pp{constructor(){return(0,Ar.vb)("app-check")}}typeof window<"u"&&window;var TS=F(9260);const a0=new m.OlP("angularfire2.auth.use-emulator"),u0=new m.OlP("angularfire2.auth.settings"),c0=new m.OlP("angularfire2.auth.tenant-id"),l0=new m.OlP("angularfire2.auth.langugage-code"),mp=new m.OlP("angularfire2.auth.use-device-language"),Io=new m.OlP("angularfire.auth.persistence"),al=(n,e,t,r,o,u,l,p)=>(0,zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))_.settings[b]=S;return p&&_.setPersistence(p),_},[t,r,o,u,l,p]);let Zd=(()=>{class n{constructor(t,r,o,u,l,p,_,b,S,O,z,te){const ue=new Sr.x,Fe=gt(void 0).pipe((0,Bs.Q)(l.outsideAngular),T(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,A.U)(()=>(0,zr.on)(t,u,r)),(0,A.U)(He=>al(He,u,p,b,S,O,_,z)),Me({bufferSize:1,refCount:!1}));if(Oc(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Fe.pipe(ni()).subscribe();const Zt=Fe.pipe(T(Wt=>Wt.getRedirectResult().then(Bt=>Bt,()=>null)),Ar.iC,Me({bufferSize:1,refCount:!1})),Qt=Fe.pipe(T(Wt=>new ms.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Wt.onAuthStateChanged(Jt=>Bt.next(Jt),Jt=>Bt.error(Jt),()=>Bt.complete()))})))),zt=Fe.pipe(T(Wt=>new ms.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Wt.onIdTokenChanged(Jt=>Bt.next(Jt),Jt=>Bt.error(Jt),()=>Bt.complete()))}))));this.authState=Zt.pipe(Ri(Qt),(0,$s.R)(l.outsideAngular),(0,Bs.Q)(l.insideAngular)),this.user=Zt.pipe(Ri(zt),(0,$s.R)(l.outsideAngular),(0,Bs.Q)(l.insideAngular)),this.idToken=this.user.pipe(T(Wt=>Wt?(0,an.D)(Wt.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(T(Wt=>Wt?(0,an.D)(Wt.getIdTokenResult()):gt(null))),this.credential=(0,oa.T)(Zt,ue,this.authState.pipe(rt(Wt=>!Wt))).pipe((0,A.U)(Wt=>Wt?.user?Wt:null),(0,$s.R)(l.outsideAngular),(0,Bs.Q)(l.insideAngular))}return(0,zr.pX)(this,Fe,u,{spy:{apply:(He,Zt,Qt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Qt.then(zt=>ue.next(zt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(zr.Dh),m.LFG(zr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ar.HU),m.LFG(a0,8),m.LFG(u0,8),m.LFG(c0,8),m.LFG(l0,8),m.LFG(mp,8),m.LFG(Io,8),m.LFG(pp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d0=(()=>{class n{constructor(){TS.Z.registerVersion("angularfire",Ar.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Zd]}),n})();class vs extends Sr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:CS}=Array,{getPrototypeOf:SS,prototype:AS,keys:Om}=Object;const{isArray:MS}=Array;var sD=F(9672);function f0(...n){const e=(0,Vs.yG)(n),t=(0,Vs.jO)(n),{args:r,keys:o}=function km(n){if(1===n.length){const e=n[0];if(CS(e))return{args:e,keys:null};if(function xS(n){return n&&"object"==typeof n&&SS(n)===AS}(e)){const t=Om(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,an.D)([],e);const u=new ms.y(function p0(n,e,t=js.y){return r=>{Yd(e,()=>{const{length:o}=n,u=new Array(o);let l=o,p=o;for(let _=0;_<o;_++)Yd(e,()=>{const b=(0,an.D)(n[_],e);let S=!1;b.subscribe((0,D.x)(r,O=>{u[_]=O,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function iD(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):js.y));return t?u.pipe(function rD(n){return(0,A.U)(e=>function h0(n,e){return MS(e)?n(...e):n(e)}(n,e))}(t)):u}function Yd(n,e,t){n?(0,sD.f)(t,n,e):e()}var Qd=F(8189);function Fm(...n){return function Lm(){return(0,Qd.J)(1)}()((0,an.D)(n,(0,Vs.yG)(n)))}function pr(n){return new ms.y(e=>{(0,aa.Xf)(n()).subscribe(e)})}var oD=F(9635);function Xd(n,e){const t=(0,qr.m)(n)?n:()=>n,r=o=>o.error(t());return new ms.y(e?o=>e.schedule(r,0,o):r)}var yp=F(727);function vp(){return(0,Hn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,D.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class g0 extends ms.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,D.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yp.w0.EMPTY)}return e}refCount(){return vp()(this)}}function _p(...n){const e=(0,Vs.yG)(n);return(0,Hn.e)((t,r)=>{(e?Fm(n,t,e):Fm(n,t)).subscribe(r)})}var Ni=F(5577);function Ku(n,e){return(0,qr.m)(e)?(0,Ni.z)(n,e,1):(0,Ni.z)(n,1)}var ii=F(8505);function Zu(n){return(0,Hn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,D.x)(t,void 0,void 0,l=>{u=(0,aa.Xf)(n(l,Zu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function da(n,e){return(0,Hn.e)(function RS(n,e,t,r,o){return(u,l)=>{let p=t,_=e,b=0;u.subscribe((0,D.x)(l,S=>{const O=b++;_=p?n(_,S,O):(p=!0,S),r&&l.next(_)},o&&(()=>{p&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Jd(n){return n<=0?()=>St.E:(0,Hn.e)((e,t)=>{let r=[];e.subscribe((0,D.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Um(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rt((o,u)=>n(o,u,r)):js.y,Jd(1),t?Wr(e):Gn(()=>new ct))}function v0(n){return(0,Hn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Gt="primary",ul=Symbol("RouteTitle");class _0{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xa(n){return new _0(n)}function NS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],p=n[u];if(l.startsWith(":"))o[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Eo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!wp(n[o],e[o]))return!1;return!0}function wp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Bm(n){return Array.prototype.concat.apply([],n)}function jm(n){return n.length>0?n[n.length-1]:null}function si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Do(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,an.D)(Promise.resolve(n)):gt(n)}const Yu=!1,aD={exact:function $m(n,e,t){if(!ha(n.segments,e.segments)||!th(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$m(n.children[r],e.children[r],t))return!1;return!0},subset:w0},Ip={exact:function Qu(n,e){return Eo(n,e)},subset:function Hm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wp(n[t],e[t]))},ignored:()=>!0};function eh(n,e,t){return aD[t.paths](n.root,e.root,t.matrixParams)&&Ip[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function w0(n,e,t){return I0(n,e,e.segments,t)}function I0(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ha(o,t)||e.hasChildren()||!th(o,t,r))}if(n.segments.length===t.length){if(!ha(n.segments,t)||!th(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!w0(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ha(n.segments,o)&&th(n.segments,o,r)&&n.children[Gt])&&I0(n.children[Gt],e,u,r)}}function th(n,e,t){return e.every((r,o)=>Ip[t](n[o].parameters,r.parameters))}class es{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xa(this.queryParams)),this._queryParamMap}toString(){return E0.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,si(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zm(this)}}class nh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xa(this.parameters)),this._parameterMap}toString(){return D0(this)}}function ha(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ll=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new Gm},providedIn:"root"}),n})();class Gm{parse(e){const t=new sh(e);return new es(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rh(e.root,!0)}`,r=function dD(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ep(t)}=${Ep(o)}`).join("&"):`${Ep(t)}=${Ep(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const E0=new Gm;function zm(n){return n.segments.map(e=>D0(e)).join("/")}function rh(n,e){if(!n.hasChildren())return zm(n);if(e){const t=n.children[Gt]?rh(n.children[Gt],!1):"",r=[];return si(n.children,(o,u)=>{u!==Gt&&r.push(`${u}:${rh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function cD(n,e){let t=[];return si(n.children,(r,o)=>{o===Gt&&(t=t.concat(e(r,o)))}),si(n.children,(r,o)=>{o!==Gt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Gt?[rh(n.children[Gt],!1)]:[`${o}:${rh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${zm(n)}/${t[0]}`:`${zm(n)}/(${t.join("//")})`}}function dl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ep(n){return dl(n).replace(/%3B/gi,";")}function Xu(n){return dl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dp(n){return decodeURIComponent(n)}function Wm(n){return Dp(n.replace(/\+/g,"%20"))}function D0(n){return`${Xu(n.path)}${function lD(n){return Object.keys(n).map(e=>`;${Xu(e)}=${Xu(n[e])}`).join("")}(n.parameters)}`}const b0=/^[^\/()?;=#]+/;function ih(n){const e=n.match(b0);return e?e[0]:""}const qm=/^[^=?&#]+/,hD=/^[^&#]+/;class sh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Gt]=new Xt(e,t)),r}parseSegment(){const e=ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,Yu);return this.capture(e),new nh(Dp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ih(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ih(this.remaining);o&&(r=o,this.capture(r))}e[Dp(t)]=Dp(r)}parseQueryParam(e){const t=function Km(n){const e=n.match(qm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Zm(n){const e=n.match(hD);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=Wm(t),u=Wm(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ih(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new m.vHH(4010,Yu);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Gt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Gt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,Yu)}}function Ym(n){return n.segments.length>0?new Xt([],{[Gt]:n}):n}function bp(n){const e={};for(const r of Object.keys(n.children)){const u=bp(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function fD(n){if(1===n.numberOfChildren&&n.children[Gt]){const e=n.children[Gt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Ju(n){return n instanceof es}const Qm=!1;function fa(n,e,t,r,o){if(0===t.length)return uh(e.root,e.root,e.root,r,o);const u=function gD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Xm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return si(u.outlets,(_,b)=>{p[b]="string"==typeof _?_.split("/"):_}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new Xm(t,e,r)}(t);return u.toRoot()?uh(e.root,e.root,new Xt([],{}),r,o):function l(_){const b=function mD(n,e,t,r){if(n.isAbsolute)return new tc(e.root,!0,0);if(-1===r)return new tc(t,t===e.root,0);return function Jm(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new m.vHH(4005,Qm&&"Invalid number of '../'");o=r.segments.length}return new tc(r,!1,o-u)}(t,r+(oh(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),S=b.processChildren?Ii(b.segmentGroup,b.index,u.commands):ey(b.segmentGroup,b.index,u.commands);return uh(e.root,b.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function oh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ah(n){return"object"==typeof n&&null!=n&&n.outlets}function uh(n,e,t,r,o){let l,u={};r&&si(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),l=n===e?t:pD(n,e,t);const p=Ym(bp(l));return new es(p,u,o)}function pD(n,e,t){const r={};return si(n.children,(o,u)=>{r[u]=o===e?t:pD(o,e,t)}),new Xt(n.segments,r)}class Xm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oh(r[0]))throw new m.vHH(4003,Qm&&"Root segment cannot have matrix parameters");const o=r.find(ah);if(o&&o!==jm(r))throw new m.vHH(4004,Qm&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ey(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return Ii(n,e,t);const r=function vD(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],p=t[r];if(ah(p))break;const _=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!A0(_,b,l))return u;r+=2}else{if(!A0(_,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[Gt]=new Xt(n.segments.slice(r.pathIndex),n.children),Ii(u,0,o)}return r.match&&0===o.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Tp(n,e,t):r.match?Ii(n,0,o):Tp(n,e,t)}function Ii(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function yD(n){return ah(n[0])?n[0].outlets:{[Gt]:n}}(t),o={};return!r[Gt]&&n.children[Gt]&&1===n.numberOfChildren&&0===n.children[Gt].segments.length?Ii(n.children[Gt],e,t):(si(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=ey(n.children[l],e,u))}),si(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Xt(n.segments,o))}}function Tp(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(ah(u)){const _=_D(u.outlets);return new Xt(r,_)}if(0===o&&oh(t[0])){r.push(new nh(n.segments[e].path,S0(t[0]))),o++;continue}const l=ah(u)?u.outlets[Gt]:`${u}`,p=o<t.length-1?t[o+1]:null;l&&p&&oh(p)?(r.push(new nh(l,S0(p))),o+=2):(r.push(new nh(l,{})),o++)}return new Xt(r,{})}function _D(n){const e={};return si(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tp(new Xt([],{}),0,t))}),e}function S0(n){const e={};return si(n,(t,r)=>e[r]=`${t}`),e}function A0(n,e,t){return n==t.path&&Eo(e,t.parameters)}const ch="imperative";class zs{constructor(e,t){this.id=e,this.url=t}}class ty extends zs{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nc extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cp extends zs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ot extends zs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class Sp extends zs{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class x0 extends zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M0 extends zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wD extends zs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ID extends zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R0 extends zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ED{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class N0{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DD{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class OS{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class P0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ny{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ry=(()=>{class n{createUrlTree(t,r,o,u,l,p){return fa(t||r.root,o,u,l,p)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),CD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(e){return ry.\u0275fac(e)},providedIn:"root"}),n})();class SD{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=O0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=O0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=k0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return k0(e,this._root).map(t=>t.value)}}function O0(n,e){if(n===e.value)return e;for(const t of e.children){const r=O0(n,t);if(r)return r}return null}function k0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=k0(n,t);if(r.length)return r.unshift(e),r}return[]}class pa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ic(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class AD extends SD{constructor(e,t){super(e),this.snapshot=t,ay(this,e)}toString(){return this.snapshot.toString()}}function L0(n,e){const t=function fl(n,e){const l=new xp([],{},{},"",{},Gt,e,null,n.root,-1,{});return new oy("",new pa(l,[]))}(n,e),r=new vs([new nh("",{})]),o=new vs({}),u=new vs({}),l=new vs({}),p=new vs(""),_=new pl(r,o,l,p,u,Gt,e,t.root);return _.snapshot=t.root,new AD(new pa(_,[]),t)}class pl{constructor(e,t,r,o,u,l,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.pipe((0,A.U)(b=>b[ul]))??gt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,A.U)(e=>Xa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,A.U)(e=>Xa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ap(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xp{get title(){return this.data?.[ul]}constructor(e,t,r,o,u,l,p,_,b,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=p,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oy extends SD{constructor(e,t){super(t),this.url=e,ay(this,t)}toString(){return F0(this._root)}}function ay(n,e){e.value._routerState=n,e.children.forEach(t=>ay(n,t))}function F0(n){const e=n.children.length>0?` { ${n.children.map(F0).join(", ")} } `:"";return`${n.value}${e}`}function uy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Eo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Eo(e.params,t.params)||n.params.next(t.params),function Vm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Eo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Eo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cy(n,e){const t=Eo(n.params,e.params)&&function uD(n,e){return ha(n,e)&&n.every((t,r)=>Eo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cy(n.parent,e.parent))}function gl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function MD(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return gl(n,r,o);return gl(n,r)})}(n,e,t);return new pa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>gl(n,p)),l}}const r=function U0(n){return new pl(new vs(n.url),new vs(n.params),new vs(n.queryParams),new vs(n.fragment),new vs(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>gl(n,u));return new pa(r,o)}}const Mp="ngNavigationCancelingError";function Rp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=RD(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function RD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Mp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Np(n){return V0(n)&&Ju(n.url)}function V0(n){return n&&n[Mp]}class kS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new bo,this.attachRef=null}}let bo=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kS,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lh=!1;let ly=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(bo),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,lh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,lh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,lh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,lh);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new B0(t,p,o.injector);if(r&&function ND(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,_)}else this.activated=o.createComponent(l,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),n})();class B0{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===pl?this.route:e===bo?this.childContexts:this.parent.get(e,t)}}let dy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[ly],encapsulation:2}),n})();function dh(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fh(n){const e=n.children&&n.children.map(fh),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Gt&&(t.component=dy),t}function ts(n){return n.outlet||Gt}function Op(n,e){const t=n.filter(r=>ts(r)===e);return t.push(...n.filter(r=>ts(r)!==e)),t}function ph(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G0{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ic(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),si(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ic(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ic(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ic(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new P0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bD(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(uy(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),uy(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=ph(o.snapshot),_=p?.get(m._Vd)??null;l.attachRef=null,l.route=o,l.resolver=_,l.injector=p,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class z0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gh{constructor(e,t){this.component=e,this.route=t}}function W0(n,e,t){const r=n._root;return oi(r,e?e._root:null,t,[r.value])}function yl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function oi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ic(e);return n.children.forEach(l=>{(function q0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function kD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ha(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ha(n.url,e.url)||!Eo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cy(n,e)||!Eo(n.queryParams,e.queryParams);default:return!cy(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new z0(r)):(u.data=l.data,u._resolvedData=l._resolvedData),oi(n,e,u.component?p?p.children:null:t,r,o),_&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new gh(p.outlet.component,l))}else l&&kp(e,p,o),o.canActivateChecks.push(new z0(r)),oi(n,null,u.component?p?p.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),si(u,(l,p)=>kp(l,t.getContext(p),o)),o}function kp(n,e,t){const r=ic(n),o=n.value;si(r,(u,l)=>{kp(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new gh(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function sc(n){return"function"==typeof n}function gy(n){return n instanceof ct||"EmptyError"===n?.name}const Lp=Symbol("INITIAL_VALUE");function vl(){return T(n=>f0(n.map(e=>e.pipe(Et(1),_p(Lp)))).pipe((0,A.U)(e=>{for(const t of e)if(!0!==t){if(t===Lp)return Lp;if(!1===t||t instanceof es)return t}return!0}),rt(e=>e!==Lp),Et(1)))}function Q0(n){return(0,oD.z)((0,ii.b)(e=>{if(Ju(e))throw Rp(0,e)}),(0,A.U)(e=>!0===e))}const vy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function X0(n,e,t,r,o){const u=_l(n,e,t);return u.matched?function yy(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?gt(o.map(l=>{const p=yl(l,n);return Do(function VD(n){return n&&sc(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(vl(),Q0()):gt(!0)}(r=dh(e,r),e,t).pipe((0,A.U)(l=>!0===l?u:{...vy})):gt(u)}function _l(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...vy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||NS)(t,n,e);if(!o)return{...vy};const u={};si(o.posParams,(p,_)=>{u[_]=p.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function wl(n,e,t,r){if(t.length>0&&function _y(n,e,t){return t.some(r=>mh(n,e,r)&&ts(r)!==Gt)}(n,t,r)){const u=new Xt(e,function FS(n,e,t,r){const o={};o[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ts(u)!==Gt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[ts(u)]=l}return o}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function US(n,e,t){return t.some(r=>mh(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function Fp(n,e,t,r,o){const u={};for(const l of r)if(mh(n,t,l)&&!o[ts(l)]){const p=new Xt([],{});p._sourceSegment=n,p._segmentIndexShift=e.length,u[ts(l)]=p}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Xt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function mh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wy(n,e,t,r){return!!(ts(n)===r||r!==Gt&&mh(e,t,n))&&("**"===n.path||_l(e,n,t).matched)}function Iy(n,e,t){return 0===e.length&&!n.children[t]}const yh=!1;class Il{constructor(e){this.segmentGroup=e||null}}class Co{constructor(e){this.urlTree=e}}function Ja(n){return Xd(new Il(n))}function vh(n){return Xd(new Co(n))}class ew{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=wl(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Gt).pipe((0,A.U)(u=>this.createUrlTree(bp(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zu(u=>{if(u instanceof Co)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Il?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Gt).pipe((0,A.U)(o=>this.createUrlTree(bp(o),e.queryParams,e.fragment))).pipe(Zu(o=>{throw o instanceof Il?this.noMatchError(o):o}))}noMatchError(e){return new m.vHH(4002,yh)}createUrlTree(e,t,r){const o=Ym(e);return new es(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,A.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,an.D)(o).pipe(Ku(u=>{const l=r.children[u],p=Op(t,u);return this.expandSegmentGroup(e,p,l,u).pipe((0,A.U)(_=>({segment:_,outlet:u})))}),da((u,l)=>(u[l.outlet]=l.segment,u),{}),Um())}expandSegment(e,t,r,o,u,l){return(0,an.D)(r).pipe(Ku(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,l).pipe(Zu(b=>{if(b instanceof Il)return gt(null);throw b}))),ni(p=>!!p),Zu((p,_)=>{if(gy(p))return Iy(t,o,u)?gt(new Xt([],{})):Ja(t);throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,l,p){return wy(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Ja(t):Ja(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vh(u):this.lineralizeSegments(r,u).pipe((0,Ni.z)(l=>{const p=new Xt(l,{});return this.expandSegment(e,p,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:p,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=_l(t,o,u);if(!p)return Ja(t);const O=this.applyRedirectCommands(_,o.redirectTo,S);return o.redirectTo.startsWith("/")?vh(O):this.lineralizeSegments(o,O).pipe((0,Ni.z)(z=>this.expandSegment(e,t,r,z.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=dh(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,A.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Xt(o,{})))):gt(new Xt(o,{}))):X0(t,r,o,e).pipe(T(({matched:l,consumedSegments:p,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Ni.z)(S=>{const O=S.injector??e,z=S.routes,{segmentGroup:te,slicedSegments:ue}=wl(t,p,_,z),Fe=new Xt(te.segments,te.children);if(0===ue.length&&Fe.hasChildren())return this.expandChildren(O,z,Fe).pipe((0,A.U)(zt=>new Xt(p,zt)));if(0===z.length&&0===ue.length)return gt(new Xt(p,{}));const He=ts(r)===u;return this.expandSegment(O,Fe,z,ue,He?Gt:u,!0).pipe((0,A.U)(Qt=>new Xt(p.concat(Qt.segments),Qt.children)))})):Ja(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function zD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?gt(!0):gt(o.map(l=>{const p=yl(l,n);return Do(function LD(n){return n&&sc(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(vl(),Q0())}(e,t,r).pipe((0,Ni.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ii.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function WD(n){return Xd(RD(yh,3))}())):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[Gt])return e.redirectTo,Xd(new m.vHH(4e3,yh));o=o.children[Gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new es(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return si(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return si(t.children,(p,_)=>{l[_]=this.createSegmentGroup(e,p,r,o)}),new Xt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new m.vHH(4001,yh);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class wh{}class ZD{constructor(e,t,r,o,u,l,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=p}recognize(){const e=wl(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Gt).pipe((0,A.U)(t=>{if(null===t)return null;const r=new xp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new pa(r,t),u=new oy(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,an.D)(Object.keys(r.children)).pipe(Ku(o=>{const u=r.children[o],l=Op(t,o);return this.processSegmentGroup(e,l,u,o)}),da((o,u)=>o&&u?(o.push(...u),o):null),function m0(n,e=!1){return(0,Hn.e)((t,r)=>{let o=0;t.subscribe((0,D.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),Wr(null),Um(),(0,A.U)(o=>{if(null===o)return null;const u=nw(o);return function YD(n){n.sort((e,t)=>e.value.outlet===Gt?-1:t.value.outlet===Gt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,an.D)(t).pipe(Ku(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),ni(l=>!!l),Zu(l=>{if(gy(l))return Iy(r,o,u)?gt([]):gt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!wy(t,r,o,u))return gt(null);let l;if("**"===t.path){const p=o.length>0?jm(o).parameters:{},_=Ey(r)+o.length;l=gt({snapshot:new xp(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iw(t),ts(t),t.component??t._loadedComponent??null,t,rw(r),_,Up(t)),consumedSegments:[],remainingSegments:[]})}else l=X0(r,t,o,e).pipe((0,A.U)(({matched:p,consumedSegments:_,remainingSegments:b,parameters:S})=>{if(!p)return null;const O=Ey(r)+_.length;return{snapshot:new xp(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,iw(t),ts(t),t.component??t._loadedComponent??null,t,rw(r),O,Up(t)),consumedSegments:_,remainingSegments:b}}));return l.pipe(T(p=>{if(null===p)return gt(null);const{snapshot:_,consumedSegments:b,remainingSegments:S}=p;e=t._injector??e;const O=t._loadedInjector??e,z=function QD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:te,slicedSegments:ue}=wl(r,b,S,z.filter(He=>void 0===He.redirectTo));if(0===ue.length&&te.hasChildren())return this.processChildren(O,z,te).pipe((0,A.U)(He=>null===He?null:[new pa(_,He)]));if(0===z.length&&0===ue.length)return gt([new pa(_,[])]);const Fe=ts(t)===u;return this.processSegment(O,z,te,ue,Fe?Gt:u).pipe((0,A.U)(He=>null===He?null:[new pa(_,He)]))}))}}function XD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nw(n){const e=[],t=new Set;for(const r of n){if(!XD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=nw(r.children);e.push(new pa(r.value,o))}return e.filter(r=>!t.has(r))}function rw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ey(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function iw(n){return n.data||{}}function Up(n){return n.resolve||{}}function sw(n){return"string"==typeof n.title||null===n.title}function Vp(n){return T(e=>{const t=n(e);return t?(0,an.D)(t).pipe((0,A.U)(()=>e)):gt(e)})}const Ih=new m.OlP("ROUTES");let Bp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Do(t.loadComponent()).pipe((0,A.U)(Eh),(0,ii.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),v0(()=>{this.componentLoaders.delete(t)})),o=new g0(r,()=>new Sr.x).pipe(vp());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,A.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,S=!1;Array.isArray(p)?b=p:(_=p.create(t).injector,b=Bm(_.get(Ih,[],m.XFs.Self|m.XFs.Optional)));return{routes:b.map(fh),injector:_}}),v0(()=>{this.childrenLoaders.delete(r)})),l=new g0(u,()=>new Sr.x).pipe(vp());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Do(t()).pipe((0,A.U)(Eh),(0,Ni.z)(o=>o instanceof m.YKP||Array.isArray(o)?gt(o):(0,an.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3),m.LFG(m.Sil))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Eh(n){return function BS(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $p=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Sr.x,this.configLoader=(0,m.f3M)(Bp),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(ll),this.rootContexts=(0,m.f3M)(bo),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new N0(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new ED(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new vs({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ch,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rt(r=>0!==r.id),(0,A.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),T(r=>{let o=!1,u=!1;return gt(r).pipe((0,ii.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),T(l=>{const p=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==p||p!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Ot(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),St.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Hp(l.source)&&(t.browserUrlTree=l.extractedUrl),gt(l).pipe(T(S=>{const O=this.transitions?.getValue();return this.events.next(new ty(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions?.getValue()?St.E:Promise.resolve(S)}),function qD(n,e,t,r){return T(o=>function J0(n,e,t,r,o){return new ew(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,A.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,ii.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function tb(n,e,t,r,o){return(0,Ni.z)(u=>function VS(n,e,t,r,o,u,l="emptyOnly"){return new ZD(n,e,t,r,o,l,u).recognize().pipe(T(p=>null===p?function KD(n){return new ms.y(e=>e.error(n))}(new wh):gt(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,A.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ii.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const z=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(z,S)}t.browserUrlTree=S.urlAfterRedirects}const O=new x0(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(O)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:O,source:z,restoredState:te,extras:ue}=l,Fe=new ty(S,this.urlSerializer.serialize(O),z,te);this.events.next(Fe);const He=L0(O,this.rootComponentType).snapshot;return gt(r={...l,targetSnapshot:He,urlAfterRedirects:O,extras:{...ue,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Ot(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),St.E}}),(0,ii.b)(l=>{const p=new M0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(p)}),(0,A.U)(l=>r={...l,guards:W0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function BD(n,e){return(0,Ni.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?gt({...t,guardsResult:!0}):function jD(n,e,t,r){return(0,an.D)(n).pipe((0,Ni.z)(o=>function GD(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(p=>{const _=ph(e)??o,b=yl(p,_);return Do(function Z0(n){return n&&sc(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(ni())})).pipe(vl()):gt(!0)}(o.component,o.route,t,e,r)),ni(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Ni.z)(p=>p&&function K0(n){return"boolean"==typeof n}(p)?function To(n,e,t,r){return(0,an.D)(e).pipe(Ku(o=>Fm(function $D(n,e){return null!==n&&e&&e(new DD(n)),gt(!0)}(o.route.parent,r),function my(n,e){return null!==n&&e&&e(new OS(n)),gt(!0)}(o.route,r),function Y0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function OD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>pr(()=>gt(l.guards.map(_=>{const b=ph(l.node)??t,S=yl(_,b);return Do(function UD(n){return n&&sc(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(ni())})).pipe(vl())));return gt(u).pipe(vl())}(n,o.path,t),function HD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>pr(()=>{const l=ph(e)??t,p=yl(u,l);return Do(function FD(n){return n&&sc(n.canActivate)}(p)?p.canActivate(e,n):l.runInContext(()=>p(e,n))).pipe(ni())}));return gt(o).pipe(vl())}(n,o.route,t))),ni(o=>!0!==o,!0))}(r,u,n,e):gt(p)),(0,A.U)(p=>({...t,guardsResult:p})))})}(this.environmentInjector,l=>this.events.next(l)),(0,ii.b)(l=>{if(r.guardsResult=l.guardsResult,Ju(l.guardsResult))throw Rp(0,l.guardsResult);const p=new wD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(p)}),rt(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Vp(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe((0,ii.b)(p=>{const _=new ID(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),T(p=>{let _=!1;return gt(p).pipe(function nb(n,e){return(0,Ni.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,an.D)(o).pipe(Ku(l=>function rb(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!sw(o)&&(u[ul]=o.title),function ib(n,e,t,r){const o=function sb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return gt({});const u={};return(0,an.D)(o).pipe((0,Ni.z)(l=>function ob(n,e,t,r){const o=ph(e)??r,u=yl(n,o);return Do(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ni(),(0,ii.b)(p=>{u[l]=p}))),Jd(1),function y0(n){return(0,A.U)(()=>n)}(u),Zu(l=>gy(l)?St.E:Xd(l)))}(u,n,e,r).pipe((0,A.U)(l=>(n._resolvedData=l,n.data=sy(n,t).resolve,o&&sw(o)&&(n.data[ul]=o.title),null)))}(l.route,r,n,e)),(0,ii.b)(()=>u++),Jd(1),(0,Ni.z)(l=>u===o.length?gt(t):St.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,ii.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,ii.b)(p=>{const _=new R0(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}))}),Vp(l=>{const p=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,ii.b)(S=>{_.component=S}),(0,A.U)(()=>{})));for(const S of _.children)b.push(...p(S));return b};return f0(p(l.targetSnapshot.root)).pipe(Wr(),Et(1))}),Vp(()=>this.afterPreactivation()),(0,A.U)(l=>{const p=function xD(n,e,t){const r=gl(n,e._root,t?t._root:void 0);return new AD(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:p}}),(0,ii.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,A.U)(r=>(new G0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,ii.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new nc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),v0(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Zu(l=>{if(u=!0,V0(l)){Np(l)||(t.navigated=!0,t.restoreHistory(r,!0));const p=new Cp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(p),Np(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Hp(r.source)};t.scheduleNavigation(_,ch,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const p=new Sp(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(p);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return St.E}))}))}cancelNavigationTransition(t,r,o){const u=new Cp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Hp(n){return n!==ch}let uw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Gt);return r}getResolvedTitleForRoute(t){return t.data[ul]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(So)},providedIn:"root"}),n})(),So=(()=>{class n extends uw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Uu))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(oc)},providedIn:"root"}),n})();class Ei{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oc=(()=>{class n extends Ei{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pi=new m.OlP("",{providedIn:"root",factory:()=>({})});let Dy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(El)},providedIn:"root"}),n})(),El=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dl(n){throw n}function bl(n,e,t){return e.parse("/")}const Tl={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(Pi,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Dl,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(Dy),this.routeReuseStrategy=(0,m.f3M)(Dh),this.urlCreationStrategy=(0,m.f3M)(CD),this.titleStrategy=(0,m.f3M)(uw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Bm((0,m.f3M)(Ih,{optional:!0})??[]),this.navigationTransitions=(0,m.f3M)($p),this.urlSerializer=(0,m.f3M)(ll),this.location=(0,m.f3M)(Re),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new es,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=L0(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ch,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const _={...o};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t);this.scheduleNavigation(p,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(fh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:p,preserveFragment:_}=r,b=_?this.currentUrlTree.fragment:l;let S=null;switch(p){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ju(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,ch,null,r)}navigate(t,r={skipLocationChange:!1}){return function Sl(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...Tl}:!1===r?{...Cl}:r,Ju(t))return eh(this.currentUrlTree,t,o);const u=this.parseUrl(t);return eh(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let p,_,b,S;return l?(p=l.resolve,_=l.reject,b=l.promise):b=new Promise((O,z)=>{p=O,_=z}),S="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ws=(()=>{class n{constructor(t,r,o,u,l,p){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=p,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Sr.x;const _=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof nc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,m.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,m.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,m.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(xr),m.Y36(pl),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(ot))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&m.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&m.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),n})();class by{}let dw=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(rt(t=>t instanceof nc),Ku(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,p=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,an.D)(o).pipe((0,Qd.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const u=o.pipe((0,Ni.z)(l=>null===l?gt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,an.D)([u,l]).pipe((0,Qd.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(xr),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(by),m.LFG(Bp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zp=new m.OlP("");let Ty=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ty?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ny&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ny(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();var ji=(()=>((ji=ji||{})[ji.COMPLETE=0]="COMPLETE",ji[ji.FAILED=1]="FAILED",ji[ji.REDIRECTING=2]="REDIRECTING",ji))();const Al=!1;function ga(n,e){return{\u0275kind:n,\u0275providers:e}}const bh=new m.OlP("",{providedIn:"root",factory:()=>!1});function Th(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(xr),o=n.get(Wp);1===n.get(Ay)&&r.initialNavigation(),n.get(Ry,null,m.XFs.Optional)?.setUpPreloading(),n.get(zp,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const Wp=new m.OlP(Al?"bootstrap done indicator":"",{factory:()=>new Sr.x}),Ay=new m.OlP(Al?"initial navigation":"",{providedIn:"root",factory:()=>1});function fw(){let n=[];return n=Al?[{provide:m.Xts,multi:!0,useFactory:()=>{const e=(0,m.f3M)(xr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function rc(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],ga(1,n)}const Ry=new m.OlP(Al?"router preloader":"");function Ny(n){return ga(0,[{provide:Ry,useExisting:dw},{provide:by,useExisting:n}])}const xl=!1,Py=new m.OlP(xl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),gw=[Re,{provide:ll,useClass:Gm},xr,bo,{provide:pl,useFactory:function hw(n){return n.routerState.root},deps:[xr]},Bp,xl?{provide:bh,useValue:!0}:[]];function mw(){return new m.PXZ("Router",xr)}let yw=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gw,xl&&r?.enableTracing?fw().\u0275providers:[],{provide:Ih,multi:!0,useValue:t},{provide:Py,useFactory:Oy,deps:[[xr,new m.FiY,new m.tp0]]},{provide:Pi,useValue:r||{}},r?.useHash?{provide:ot,useClass:Ie}:{provide:ot,useClass:Ee},{provide:zp,useFactory:()=>{const n=(0,m.f3M)(ro),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(Pi),r=(0,m.f3M)($p),o=(0,m.f3M)(ll);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ty(o,r,n,e,t)}},r?.preloadingStrategy?Ny(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:mw},r?.initialNavigation?ky(r):[],[{provide:Ly,useFactory:Th},{provide:m.tb,multi:!0,useExisting:Ly}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ih,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Py,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[dy]}),n})();function Oy(n){if(xl&&n)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function ky(n){return["disabled"===n.initialNavigation?ga(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(xr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ay,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ga(2,[{provide:Ay,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(de,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(xr),u=e.get(Wp);(function cb(n,e){n.events.pipe(rt(t=>t instanceof nc||t instanceof Cp||t instanceof Sp||t instanceof Ot),(0,A.U)(t=>t instanceof nc||t instanceof Ot?ji.COMPLETE:t instanceof Cp&&(0===t.code||1===t.code)?ji.REDIRECTING:ji.FAILED),rt(t=>t!==ji.REDIRECTING),Et(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get($p).afterPreactivation=()=>(r(!0),u.closed?gt(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const Ly=new m.OlP(xl?"Router Initializer":"");var _w=F(8401),ww=F(4986);function qp(){return(0,Hn.e)((n,e)=>{let t,r=!1;n.subscribe((0,D.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Ew(n,e){return n===e}F(9568);var ft,tu=F(3942),yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ma={},ya=ya||{},kt=yb||self;function Kp(){}function Ml(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Uy="closure_uid_"+(1e9*Math.random()>>>0),vb=0;function Dw(n,e,t){return n.call.apply(n.bind,arguments)}function _b(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function un(n,e,t){return(un=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Dw:_b).apply(null,arguments)}function Ch(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ai(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[o].apply(r,l)}}function nu(){this.s=this.s,this.o=this.o}nu.prototype.s=!1,nu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function HS(n){Object.prototype.hasOwnProperty.call(n,Uy)&&n[Uy]||(n[Uy]=++vb)}(this)},nu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Tw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Yp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Vy(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ml(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function gr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gr.prototype.h=function(){this.defaultPrevented=!0};var wb=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",Kp,e),kt.removeEventListener("test",Kp,e)}catch{}return n}();function Qp(n){return/^[\s\xa0]*$/.test(n)}var By=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function jy(n,e){return n<e?-1:n>e?1:0}function Sh(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function va(n){return-1!=Sh().indexOf(n)}function Xp(n){return Xp[" "](n),n}Xp[" "]=Kp;var Ah,n,Ao=va("Opera"),Rl=va("Trident")||va("MSIE"),Sw=va("Edge"),_s=Sw||Rl,ws=va("Gecko")&&!(-1!=Sh().toLowerCase().indexOf("webkit")&&!va("Edge"))&&!(va("Trident")||va("MSIE"))&&!va("Edge"),qs=-1!=Sh().toLowerCase().indexOf("webkit")&&!va("Edge");function $y(){var n=kt.document;return n?n.documentMode:void 0}e:{var Hy="",Gy=(n=Sh(),ws?/rv:([^\);]+)(\)|;)/.exec(n):Sw?/Edge\/([\d\.]+)/.exec(n):Rl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qs?/WebKit\/(\S+)/.exec(n):Ao?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gy&&(Hy=Gy?Gy[1]:""),Rl){var zy=$y();if(null!=zy&&zy>parseFloat(Hy)){Ah=String(zy);break e}}Ah=Hy}var Ib={};var xw=kt.document&&Rl&&($y()||parseInt(Ah,10))||void 0;function xh(n,e){if(gr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ws){e:{try{Xp(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Mw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xh.X.h.call(this)}}ai(xh,gr);var Mw={2:"touch",3:"pen",4:"mouse"};xh.prototype.h=function(){xh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nl="closure_listenable_"+(1e6*Math.random()|0),Jp=0;function Eb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Jp,this.ba=this.ea=!1}function Mh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function eg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function tg(n){const e={};for(const t in n)e[t]=n[t];return e}const ng="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qy(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ng.length;u++)t=ng[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Rh(n){this.src=n,this.g={},this.h=0}function rg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Tw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Mh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ig(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Rh.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=ig(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new Eb(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var sg="closure_lm_"+(1e6*Math.random()|0),og={};function Ky(n,e,t,r,o){if(r&&r.once)return Rw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ky(n,e[u],t,r,o);return null}return t=Jy(t),n&&n[Nl]?n.N(e,t,Zp(r)?!!r.capture:!!r,o):Zy(n,e,t,!1,r,o)}function Zy(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Zp(o)?!!o.capture:!!o,p=Qy(n);if(p||(n[sg]=p=new Rh(n)),(t=p.add(e,t,r,l,u)).proxy)return t;if(r=function Db(){const e=bb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wb||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Pw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Rw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rw(n,e[u],t,r,o);return null}return t=Jy(t),n&&n[Nl]?n.O(e,t,Zp(r)?!!r.capture:!!r,o):Zy(n,e,t,!0,r,o)}function Nw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Nw(n,e[u],t,r,o);else r=Zp(r)?!!r.capture:!!r,t=Jy(t),n&&n[Nl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ig(u=n.g[e],t,r,o))&&(Mh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Qy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ig(e,t,r,o)),(t=-1<n?e[n]:null)&&Yy(t))}function Yy(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Nl])rg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Pw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Qy(e))?(rg(t,n),0==t.h&&(t.src=null,e[sg]=null)):Mh(n)}}}function Pw(n){return n in og?og[n]:og[n]="on"+n}function bb(n,e){if(n.ba)n=!0;else{e=new xh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Yy(n),n=t.call(r,e)}return n}function Qy(n){return(n=n[sg])instanceof Rh?n:null}var Xy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jy(n){return"function"==typeof n?n:(n[Xy]||(n[Xy]=function(e){return n.handleEvent(e)}),n[Xy])}function Kr(){nu.call(this),this.i=new Rh(this),this.P=this,this.I=null}function ui(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gr(e,n);else if(e instanceof gr)e.target=e.target||n;else{var o=e;qy(e=new gr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=ag(l,r,!0,e)&&o}if(o=ag(l=e.g=n,r,!0,e)&&o,o=ag(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ag(l=e.g=t[u],r,!1,e)&&o}function ag(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var p=l.listener,_=l.ha||l.src;l.ea&&rg(n.i,l),o=!1!==p.call(_,r)&&o}}return o&&!r.defaultPrevented}ai(Kr,nu),Kr.prototype[Nl]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){Nw(this,n,e,t,r)},Kr.prototype.M=function(){if(Kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mh(t[r]);delete n.g[e],n.h--}}this.I=null},Kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ev=kt.JSON.stringify;function Tb(){var n=nv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ug,Ow=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Sb,n=>n.reset());class Sb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ab(n){kt.setTimeout(()=>{throw n},0)}function tv(n,e){ug||function kw(){var n=kt.Promise.resolve(void 0);ug=function(){n.then(Lw)}}(),cg||(ug(),cg=!0),nv.add(n,e)}var cg=!1,nv=new class Cb{constructor(){this.h=this.g=null}add(e,t){const r=Ow.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Lw(){for(var n;n=Tb();){try{n.h.call(n.g)}catch(t){Ab(t)}var e=Ow;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cg=!1}function Nh(n,e){Kr.call(this),this.h=n||1,this.g=e||kt,this.j=un(this.lb,this),this.l=Date.now()}function lg(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function dg(n,e,t){if("function"==typeof n)t&&(n=un(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=un(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function rv(n){n.g=dg(()=>{n.g=null,n.i&&(n.i=!1,rv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ai(Nh,Kr),(ft=Nh.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ui(this,"tick"),this.ca&&(lg(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){Nh.X.M.call(this),lg(this),delete this.g};class Fw extends nu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:rv(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(n){nu.call(this),this.h=n,this.g={}}ai(Ks,nu);var Uw=[];function Vw(n,e,t,r){Array.isArray(t)||(t&&(Uw[0]=t.toString()),t=Uw);for(var o=0;o<t.length;o++){var u=Ky(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function uc(n){eg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Yy(e)},n),n.g={}}function iv(){this.g=!0}function cc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zS(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return ev(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ks.prototype.M=function(){Ks.X.M.call(this),uc(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iv.prototype.Aa=function(){this.g=!1},iv.prototype.info=function(){};var It={},jw=null;function hg(){return jw=jw||new Kr}function $w(n){gr.call(this,It.Pa,n)}function xo(n){const e=hg();ui(e,new $w(e))}function Hw(n,e){gr.call(this,It.STAT_EVENT,n),this.stat=e}function Zr(n){const e=hg();ui(e,new Hw(e,n))}function Ph(n,e){gr.call(this,It.Qa,n),this.size=e}function An(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}It.Pa="serverreachability",ai($w,gr),It.STAT_EVENT="statevent",ai(Hw,gr),It.Qa="timingevent",ai(Ph,gr);var ov={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},av={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function fg(){}function uv(){}fg.prototype.h=null;var cv,Pl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pg(){gr.call(this,"d")}function gg(){gr.call(this,"c")}function mg(){}function Oh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ks(this),this.O=xb,this.T=new Nh(n=_s?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}ai(pg,gr),ai(gg,gr),ai(mg,fg),mg.prototype.g=function(){return new XMLHttpRequest},mg.prototype.i=function(){return{}},cv=new mg;var xb=45e3,lv={},yg={};function kl(n,e,t){n.K=1,n.v=hc(ru(e)),n.s=t,n.P=!0,dv(n,null)}function dv(n,e){n.F=Date.now(),_a(n),n.A=ru(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Yw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ol,n.g=Mv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Fw(un(n.La,n,n.g),n.N)),Vw(n.S,n.g,"readystatechange",n.ib),e=n.H?tg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),xo(),function sv(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",p=u.split("&"),_=0;_<p.length;_++){var b=p[_].split("=");if(1<b.length){var S=b[0];b=b[1];var O=S.split("_");l=2<=O.length&&"type"==O[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function hv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function fv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Mb(n,t),o==yg){4==e&&(n.o=4,Zr(14),r=!1),cc(n.j,n.m,null,"[Incomplete Response]");break}if(o==lv){n.o=4,Zr(15),cc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}cc(n.j,n.m,o,null),_g(n,o)}hv(n)&&o!=yg&&o!=lv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Zr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cv(e),e.K=!0,Zr(11))):(cc(n.j,n.m,t,"[Invalid Chunked Response]"),lc(n),kh(n))}function Mb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?yg:(t=Number(e.substring(t,r)),isNaN(t)?lv:(r+=1)+t>e.length?yg:(e=e.substr(r,t),n.C=r+t,e))}function _a(n){n.V=Date.now()+n.O,Ll(n,n.O)}function Ll(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=An(un(n.gb,n),e)}function vg(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function kh(n){0==n.l.G||n.I||Sv(n.l,n)}function lc(n){vg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,lg(n.T),uc(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _g(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||_v(t.h,n)))if(!n.J&&_v(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ag(t),Vl(t)}Gh(t),Zr(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=An(un(t.cb,t),6e3));if(1>=vv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else su(t,11)}else if((n.J||t.g==n)&&Ag(t),!Qp(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const O=b[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const z=b[5];null!=z&&"number"==typeof z&&0<z&&(t.J=r=1.5*z,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const te=n.g;if(te){const ue=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var u=r.h;u.g||-1==ue.indexOf("spdy")&&-1==ue.indexOf("quic")&&-1==ue.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Uh(u,u.h),u.h=null))}if(r.D){const Fe=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.za=Fe,Rn(r.F,r.D,Fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=xv(r,r.H?r.ka:null,r.V),l.J){tI(r.h,l);var p=l,_=r.J;_&&p.setTimeout(_),p.B&&(vg(p),_a(p)),r.g=l}else Tv(r);0<t.i.length&&Cg(t)}else"stop"!=b[0]&&"close"!=b[0]||su(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?su(t,7):Dv(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}xo()}catch{}}function qw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ml(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ww(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ml(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function zw(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ml(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=Oh.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==wa(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const S=wa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||_s||this.g&&(this.h.h||this.g.fa()||Dg(this.g)))){this.I||4!=S||7==e||xo(),vg(this);var t=this.g.aa();this.Y=t;t:if(hv(this)){var r=Dg(this.g);n="";var o=r.length,u=4==wa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lc(this),kh(this);var l="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function GS(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qp(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Zr(12),lc(this),kh(this);break e}cc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_g(this,t)}this.P?(fv(this,S,l),_s&&this.i&&3==S&&(Vw(this.S,this.T,"tick",this.hb),this.T.start())):(cc(this.j,this.m,l,null),_g(this,l)),4==S&&lc(this),this.i&&!this.I&&(4==S?Sv(this.l,this):(this.i=!1,_a(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Zr(12)):(this.o=0,Zr(13)),lc(this),kh(this)}}}catch{}},ft.hb=function(){if(this.g){var n=wa(this.g),e=this.g.fa();this.C<e.length&&(vg(this),fv(this,n,e),this.i&&4!=n&&_a(this))}},ft.cancel=function(){this.I=!0,lc(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Bw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xo(),Zr(17)),lc(this),this.o=2,kh(this)):Ll(this,this.V-n)};var pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof dc){this.h=void 0!==e?e:n.h,gv(this,n.j),this.s=n.s,this.g=n.g,mv(this,n.m),this.l=n.l,e=n.i;var t=new wg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Nb(this,t),this.o=n.o}else n&&(t=String(n).match(pv))?(this.h=!!e,gv(this,t[1]||"",!0),this.s=Lh(t[2]||""),this.g=Lh(t[3]||"",!0),mv(this,t[4]),this.l=Lh(t[5]||"",!0),Nb(this,t[6]||"",!0),this.o=Lh(t[7]||"")):(this.h=!!e,this.i=new wg(null,this.h))}function ru(n){return new dc(n)}function gv(n,e,t){n.j=t?Lh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Nb(n,e,t){e instanceof wg?(n.i=e,function Fb(n,e){e&&!n.j&&(iu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(yv(this,r),Yw(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fh(e,kb)),n.i=new wg(e,n.h))}function Rn(n,e,t){n.i.set(e,t)}function hc(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Kw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fh(e,Fl,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fh(e,Fl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fh(t,"/"==t.charAt(0)?Ob:Pb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fh(t,Lb)),n.join("")};var Fl=/[#\/\?@]/g,Pb=/[#\?:]/g,Ob=/[#\?]/g,kb=/[#\?@]/g,Lb=/#/g;function wg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function iu(n){n.g||(n.g=new Map,n.h=0,n.i&&function Rb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yv(n,e){iu(n),e=Mo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Zw(n,e){return iu(n),e=Mo(n,e),n.g.has(e)}function Yw(n,e,t){yv(n,e),0<t.length&&(n.i=null,n.g.set(Mo(n,e),Yp(t)),n.h+=t.length)}function Mo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Xw(n){this.l=n||Jw,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ga&&kt.g.Ga()&&kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=wg.prototype).add=function(n,e){iu(this),this.i=null,n=Mo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){iu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ft.oa=function(){iu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ft.W=function(n){iu(this);let e=[];if("string"==typeof n)Zw(this,n)&&(e=e.concat(this.g.get(Mo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return iu(this),this.i=null,Zw(this,n=Mo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var Jw=10;function eI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function vv(n){return n.h?1:n.g?n.g.size:0}function _v(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Uh(n,e){n.g?n.g.add(e):n.h=e}function tI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yp(n.i)}function Ig(){}function Ub(){this.g=new Ig}function Vb(n,e,t){const r=t||"";try{qw(n,function(o,u){let l=o;Zp(o)&&(l=ev(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Ul(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Vh(n){this.l=n.ac||null,this.j=n.jb||!1}function Bh(n,e){Kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Iv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xw.prototype.cancel=function(){if(this.i=wv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ig.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},Ig.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},ai(Vh,fg),Vh.prototype.g=function(){return new Bh(this.l,this.j)},Vh.prototype.i=function(n){return function(){return n}}({}),ai(Bh,Kr);var Iv=0;function nI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function jh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$h(n)}function $h(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=Bh.prototype).open=function(n,e){if(this.readyState!=Iv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$h(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jh(this)),this.readyState=Iv},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$h(this)),this.g&&(this.readyState=3,$h(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jh(this):$h(this),3==this.readyState&&nI(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,jh(this))},ft.Ua=function(n){this.g&&(this.response=n,jh(this))},ft.ga=function(){this.g&&jh(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Bh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jb=kt.JSON.parse;function sr(n){Kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rI,this.K=this.L=!1}ai(sr,Kr);var rI="",$b=/^https?$/i,iI=["POST","PUT"];function oI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aI(n),Eg(n)}function aI(n){n.D||(n.D=!0,ui(n,"complete"),ui(n,"error"))}function Ev(n){if(n.h&&typeof ya<"u"&&(!n.C[1]||4!=wa(n)||2!=n.aa()))if(n.v&&4==wa(n))dg(n.Ha,0,n);else if(ui(n,"readystatechange"),4==wa(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(pv)[1]||null;if(!o&&kt.self&&kt.self.location){var u=kt.self.location.protocol;o=u.substr(0,u.length-1)}r=!$b.test(o?o.toLowerCase():"")}t=r}if(t)ui(n,"complete"),ui(n,"success");else{n.m=6;try{var l=2<wa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",aI(n)}}finally{Eg(n)}}}function Eg(n,e){if(n.g){uI(n);const t=n.g,r=n.C[0]?Kp:null;n.g=null,n.C=null,e||ui(n,"ready");try{t.onreadystatechange=r}catch{}}}function uI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function wa(n){return n.g?n.g.readyState:0}function Dg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function bg(n){let e="";return eg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Tg(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=bg(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function fc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cI(n){this.Ca=0,this.i=[],this.j=new iv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=fc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=fc("baseRetryDelayMs",5e3,n),this.bb=fc("retryDelaySeedMs",1e4,n),this.$a=fc("forwardChannelMaxRetries",2,n),this.ta=fc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Xw(n&&n.concurrentRequestLimit),this.Fa=new Ub,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Dv(n){if(lI(n),3==n.G){var e=n.U++,t=ru(n.F);Rn(t,"SID",n.I),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),Hh(n,t),(e=new Oh(n,n.j,e,void 0)).K=2,e.v=hc(ru(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Mv(e.l,null),e.g.da(e.v)),e.F=Date.now(),_a(e)}Av(n)}function Vl(n){n.g&&(Cv(n),n.g.cancel(),n.g=null)}function lI(n){Vl(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Ag(n),n.h.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Cg(n){eI(n.h)||n.m||(n.m=!0,tv(n.Ja,n),n.C=0)}function bv(n,e){var t;t=e?e.m:n.U++;const r=ru(n.F);Rn(r,"SID",n.I),Rn(r,"RID",t),Rn(r,"AID",n.T),Hh(n,r),n.o&&n.s&&Tg(r,n.o,n.s),t=new Oh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Hb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Uh(n.h,t),kl(t,r,e)}function Hh(n,e){n.ia&&eg(n.ia,function(t,r){Rn(e,r,t)}),n.l&&qw({},function(t,r){Rn(e,r,t)})}function Hb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?un(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let b=o[_].h;const S=o[_].g;if(b-=u,0>b)u=Math.max(0,o[_].h-100),p=!1;else try{Vb(S,l,"req"+b+"_")}catch{r&&r(S)}}if(p){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Tv(n){n.g||n.u||(n.Z=1,tv(n.Ia,n),n.A=0)}function Gh(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=An(un(n.Ia,n),xg(n,n.A)),n.A++,0))}function Cv(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function Sg(n){n.g=new Oh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ru(n.sa);Rn(e,"RID","rpc"),Rn(e,"SID",n.I),Rn(e,"CI",n.L?"0":"1"),Rn(e,"AID",n.T),Rn(e,"TYPE","xmlhttp"),Hh(n,e),n.o&&n.s&&Tg(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=hc(ru(e)),t.s=null,t.P=!0,dv(t,n)}function Ag(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function Sv(n,e){var t=null;if(n.g==e){Ag(n),Cv(n),n.g=null;var r=2}else{if(!_v(n.h,e))return;t=e.D,tI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ui(r=hg(),new Ph(r,t)),Cg(n)}else Tv(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Bl(n,e){return!(vv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=An(un(n.Ja,n,e),xg(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gh(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:su(n,5);break;case 4:su(n,10);break;case 3:su(n,6);break;default:su(n,2)}}function xg(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function su(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=un(n.kb,n);t||(t=new dc("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||gv(t,"https"),hc(t)),function Bb(n,e){const t=new iv;if(kt.Image){const r=new Image;r.onload=Ch(Ul,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ch(Ul,t,r,"TestLoadImage: error",!1,e),r.onabort=Ch(Ul,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ch(Ul,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Zr(2);n.G=0,n.l&&n.l.va(e),Av(n),lI(n)}function Av(n){if(n.G=0,n.la=[],n.l){const e=wv(n.h);(0!=e.length||0!=n.i.length)&&(Vy(n.la,e),Vy(n.la,n.i),n.h.i.length=0,Yp(n.i),n.i.length=0),n.l.ua()}}function xv(n,e,t){var r=t instanceof dc?ru(t):new dc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),mv(r,r.m);else{var o=kt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new dc(null,void 0);r&&gv(u,r),e&&(u.g=e),o&&mv(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Rn(r,t,e),Rn(r,"VER",n.ma),Hh(n,r),r}function Mv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Da&&!n.ra?new Vh({jb:!0}):n.ra)).Ka(n.H),e}function dI(){}function Mg(){if(Rl&&!(10<=Number(xw)))throw Error("Environmental error: no available transport.")}function ns(n,e){Kr.call(this),this.g=new cI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Qp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zh(this)}function hI(n){pg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Rv(){gg.call(this),this.status=1}function zh(n){this.g=n}(ft=sr.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cv.g(),this.C=function Gw(n){return n.h||(n.h=n.i())}(this.u?this.u:cv),this.g.onreadystatechange=un(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void oI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=kt.FormData&&n instanceof kt.FormData,!(0<=Tw(iI,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uI(this),0<this.B&&((this.K=function sI(n){return Rl&&function Wy(){return function Cw(n){var e=Ib;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=By(String(Ah)).split("."),t=By("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=jy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||jy(0==o[2].length,0==u[2].length)||jy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=un(this.qa,this)):this.A=dg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){oI(this,u)}},ft.qa=function(){typeof ya<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ui(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ui(this,"complete"),ui(this,"abort"),Eg(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eg(this,!0)),sr.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?Ev(this):this.fb())},ft.fb=function(){Ev(this)},ft.aa=function(){try{return 2<wa(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jb(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=cI.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Oh(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=tg(u),qy(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hb(this,o,e),Rn(t=ru(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),Hh(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(bg(u)))+"&"+e:this.o&&Tg(t,this.o,u)),Uh(this.h,o),this.Ya&&Rn(t,"TYPE","init"),this.O?(Rn(t,"$req",e),Rn(t,"SID","null"),o.Z=!0,kl(o,t,null)):kl(o,t,e),this.G=2}}else 3==this.G&&(n?bv(this,n):0==this.i.length||eI(this.h)||bv(this))},ft.Ia=function(){if(this.u=null,Sg(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=An(un(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zr(10),Vl(this),Sg(this))},ft.cb=function(){null!=this.v&&(this.v=null,Vl(this),Gh(this),Zr(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Zr(2)):(this.j.info("Failed to ping google.com"),Zr(1))},(ft=dI.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},Mg.prototype.g=function(n,e){return new ns(n,e)},ai(ns,Kr),ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Zr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=xv(n,null,n.V),Cg(n)},ns.prototype.close=function(){Dv(this.g)},ns.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ev(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Cg(e)},ns.prototype.M=function(){this.g.l=null,delete this.j,Dv(this.g),delete this.g,ns.X.M.call(this)},ai(hI,pg),ai(Rv,gg),ai(zh,dI),zh.prototype.xa=function(){ui(this.g,"a")},zh.prototype.wa=function(n){ui(this.g,new hI(n))},zh.prototype.va=function(n){ui(this.g,new Rv)},zh.prototype.ua=function(){ui(this.g,"b")},Mg.prototype.createWebChannel=Mg.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,ov.NO_ERROR=0,ov.TIMEOUT=8,ov.HTTP_ERROR=6,av.COMPLETE="complete",uv.EventType=Pl,Pl.OPEN="a",Pl.CLOSE="b",Pl.ERROR="c",Pl.MESSAGE="d",Kr.prototype.listen=Kr.prototype.N,sr.prototype.listenOnce=sr.prototype.O,sr.prototype.getLastError=sr.prototype.Oa,sr.prototype.getLastErrorCode=sr.prototype.Ea,sr.prototype.getStatus=sr.prototype.aa,sr.prototype.getResponseJson=sr.prototype.Sa,sr.prototype.getResponseText=sr.prototype.fa,sr.prototype.send=sr.prototype.da,sr.prototype.setWithCredentials=sr.prototype.Ka;var fI=ma.createWebChannelTransport=function(){return new Mg},Gb=ma.getStatEventTarget=function(){return hg()},Nv=ma.ErrorCode=ov,WS=ma.EventType=av,zb=ma.Event=It,pI=ma.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Wb=ma.FetchXmlHttpFactory=Vh,Rg=ma.WebChannel=uv,qb=ma.XhrIo=sr;const gI="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let jl="9.17.2";const ou=new Pr.Yd("@firebase/firestore");function Pv(){return ou.logLevel}function Oe(n,...e){if(ou.logLevel<=Pr.in.DEBUG){const t=e.map(Ng);ou.debug(`Firestore (${jl}): ${n}`,...t)}}function Nn(n,...e){if(ou.logLevel<=Pr.in.ERROR){const t=e.map(Ng);ou.error(`Firestore (${jl}): ${n}`,...t)}}function au(n,...e){if(ou.logLevel<=Pr.in.WARN){const t=e.map(Ng);ou.warn(`Firestore (${jl}): ${n}`,...t)}}function Ng(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+n;throw Nn(e),new Error(e)}function mt(n,e){n||ut()}function Ye(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class Yb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qb{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=l;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Or)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Yr(e)}}class Wh{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Xb{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new Wh(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ro{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new Pg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ov(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $l{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Ov(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Hl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function vI(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new bn(0,0))}static max(){return new vt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qh{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends qh{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const _I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends qh{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return _I.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===p?(l=!l,o++):"."!==p||l?(r+=p,o++):(u(),o++)}if(u(),l)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(cn.fromString(e))}static fromName(e){return new qe(cn.fromString(e).popFirst(5))}static empty(){return new qe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new cn(e.slice()))}}class Kh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Zh(n){return n.fields.find(e=>2===e.kind)}function Ia(n){return n.fields.filter(e=>2!==e.kind)}Kh.UNKNOWN_ID=-1;class Gl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Yh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Yh(0,rs.min())}}function II(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new rs(o,qe.empty(),e)}function EI(n){return new rs(n.readTime,n.key,-1)}class rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rs(vt.min(),qe.empty(),-1)}static max(){return new rs(vt.max(),qe.empty(),-1)}}function Og(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const kg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uu(n){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ge.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==kg)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Lg.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,l=!1;e.forEach(p=>{++o,p.next(()=>{++u,l&&u===o&&t()},_=>r(_))}),l=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,l=new Array(u);let p=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(S=>{l[b]=S,++p,p===u&&r(l)},S=>o(S))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Fg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Or,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Qh(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const o=Fv(r.target.error);this.v.reject(new Qh(e,o))}}static open(e,t,r,o){try{return new Fg(t,e.transaction(o,r))}catch(u){throw new Qh(t,u)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jb(t)}}class Is{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Is.D((0,nn.z$)())&&Nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),mr(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,nn.hl)())return!1;if(Is.N())return!0;const e=(0,nn.z$)(),t=Is.D(e),r=0<t&&t<10,o=Is.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Qh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const p=l.target.error;o("VersionError"===p.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Qh(e,p))},u.onupgradeneeded=l=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ge.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=Fg.open(u.db,e,l?"readonly":"readwrite",r),b=o(_).next(S=>(_.V(),S)).catch(S=>(_.abort(S),oe.reject(S))).toPromise();return b.catch(()=>{}),yield _.P,b}catch(_){const b=_,S="FirebaseError"!==b.name&&p<3;if(Oe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return mr(this.q.delete())}}class Qh extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ea(n){return"IndexedDbTransactionError"===n.name}class Jb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mr(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),mr(this.store.add(e))}get(e){return mr(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),mr(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),mr(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,l)=>{o.onerror=p=>{l(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.H(o,(u,l,p)=>p.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const l=Fv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void o();const _=new DI(p),b=t(p.primaryKey,p.value,_);if(b instanceof oe){const S=b.catch(O=>(_.done(),oe.reject(O)));r.push(S)}_.isDone?o():null===_.G?p.continue():p.continue(_.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mr(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Fv(r.target.error);t(o)}})}let pc=!1;function Fv(n){const e=Is.D((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pc||(pc=!0,setTimeout(()=>{throw r},0)),r}}return n}class eT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ea(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uu(r)}yield t.nt(6e4)}))}}class KS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Oe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(p=>{o-=p,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(p=>(Oe("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=EI(u);Og(l,r)>0&&(r=l)}),new rs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Es=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class tT{constructor(e,t,r,o,u,l,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class No{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new No("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}function TI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ef(n){return null==n}function tf(n){return 0===n&&1/n==-1/0}function Ug(n){return"number"==typeof n&&Number.isInteger(n)&&!tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class SI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw o instanceof DOMException?new SI("Invalid base64 string: "+o):o}}(e);return new or(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const Uv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gc(n){if(mt(!!n),"string"==typeof n){let e=0;const t=Uv.exec(n);if(mt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mc(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function Vg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function yc(n){const e=n.mapValue.fields.__previous_value__;return Vg(e)?yc(e):e}function nf(n){const e=gc(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}const Da={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zl={nullValue:"NULL_VALUE"};function Wl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vg(n)?4:RI(n)?9007199254740991:10:ut()}function Po(n,e){if(n===e)return!0;const t=Wl(n);if(t!==Wl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nf(n).isEqual(nf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=gc(r.timestampValue),l=gc(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,mc(n.bytesValue).isEqual(mc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Yn(r.geoPointValue.latitude)===Yn(o.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Yn(r.integerValue)===Yn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Yn(r.doubleValue),l=Yn(o.doubleValue);return u===l?tf(u)===tf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Hl(n.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(TI(u)!==TI(l))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===l[p]||!Po(u[p],l[p])))return!1;return!0}(n,e);default:return ut()}var o}function Bg(n,e){return void 0!==(n.values||[]).find(t=>Po(t,e))}function lu(n,e){if(n===e)return 0;const t=Wl(n),r=Wl(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Yn(o.integerValue||o.doubleValue),p=Yn(u.integerValue||u.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return xI(n.timestampValue,e.timestampValue);case 4:return xI(nf(n),nf(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,u){const l=mc(o),p=mc(u);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),p=u.split("/");for(let _=0;_<l.length&&_<p.length;_++){const b=Ft(l[_],p[_]);if(0!==b)return b}return Ft(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Ft(Yn(o.latitude),Yn(u.latitude));return 0!==l?l:Ft(Yn(o.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],p=u.values||[];for(let _=0;_<l.length&&_<p.length;++_){const b=lu(l[_],p[_]);if(b)return b}return Ft(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Da.mapValue&&u===Da.mapValue)return 0;if(o===Da.mapValue)return 1;if(u===Da.mapValue)return-1;const l=o.fields||{},p=Object.keys(l),_=u.fields||{},b=Object.keys(_);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const O=Ft(p[S],b[S]);if(0!==O)return O;const z=lu(l[p[S]],_[b[S]]);if(0!==z)return z}return Ft(p.length,b.length)}(n.mapValue,e.mapValue);default:throw ut()}}function xI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=gc(n),r=gc(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function ql(n){return jg(n)}function jg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=gc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mc(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=jg(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const p of o)l?l=!1:u+=",",u+=`${p}:${jg(r.fields[p])}`;return u+"}"}(n.mapValue):ut();var e}function du(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vv(n){return!!n&&"integerValue"in n}function Kl(n){return!!n&&"arrayValue"in n}function Bv(n){return!!n&&"nullValue"in n}function MI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $g(n){return!!n&&"mapValue"in n}function Zl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function NI(n){return"nullValue"in n?zl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?du(No.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function PI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?du(No.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Da:ut()}function jv(n,e){const t=lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $v(n,e){const t=lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class hu{constructor(e,t){this.position=e,this.inclusive=t}}function OI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):lu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function nT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Po(n.position[t],e.position[t]))return!1;return!0}class Hv{}class on extends Hv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new UI(e,t,r):"array-contains"===t?new ZS(e,r):"in"===t?new Gg(e,r):"not-in"===t?new BI(e,r):"array-contains-any"===t?new oT(e,r):new on(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Hg(e,r):new VI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lu(t,this.value)):null!==t&&Wl(this.value)===Wl(t)&&this.matchesComparison(lu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class In extends Hv{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new In(e,t)}matches(e){return rf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rf(n){return"and"===n.op}function kI(n){return"or"===n.op}function LI(n){return rT(n)&&rf(n)}function rT(n){for(const e of n.filters)if(e instanceof In)return!1;return!0}function FI(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+ql(n.value);if(LI(n))return n.filters.map(e=>FI(e)).join(",");{const e=n.filters.map(t=>FI(t)).join(",");return`${n.op}(${e})`}}function iT(n,e){return n instanceof on?(t=n,(r=e)instanceof on&&t.op===r.op&&t.field.isEqual(r.field)&&Po(t.value,r.value)):n instanceof In?function(t,r){return r instanceof In&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&iT(u,r.filters[l]),!0)}(n,e):void ut();var t,r}function sf(n,e){const t=n.filters.concat(e);return In.create(t,n.op)}function sT(n){return n instanceof on?`${(e=n).field.canonicalString()} ${e.op} ${ql(e.value)}`:n instanceof In?function(e){return e.op.toString()+" {"+e.getFilters().map(sT).join(" ,")+"}"}(n):"Filter";var e}class UI extends on{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hg extends on{constructor(e,t){super(e,"in",t),this.keys=Gv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VI extends on{constructor(e,t){super(e,"not-in",t),this.keys=Gv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class ZS extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kl(t)&&Bg(t.arrayValue,this.value)}}class Gg extends on{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Bg(this.value.arrayValue,t)}}class BI extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Bg(this.value.arrayValue,t)}}class oT extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bg(this.value.arrayValue,r))}}class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function YS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yr{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zg(this.root,e,this.comparator,!1)}getReverseIterator(){return new zg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zg(this.root,e,this.comparator,!0)}}class zg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ci.RED,this.left=o??ci.EMPTY,this.right=u??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ci(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ci.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jI(this.data.getIterator())}getIteratorFrom(e){return new jI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class jI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function af(n){return n.hasNext()?n.getNext():void 0}class is{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new is([])}unionWith(e){let t=new mn(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$g(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(t)}setAll(e){let t=Zn.emptyPath(),r={},o=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=p.popLast()}l?r[p.lastSegment()]=Zl(l):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());$g(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];$g(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){cu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new li(Zl(this.value))}}function $I(n){const e=[];return cu(n.fields,(t,r)=>{const o=new Zn([t]);if($g(r)){const u=$I(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new is(e)}class Pn{constructor(e,t,r,o,u,l,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=p}static newInvalidDocument(e){return new Pn(e,0,vt.min(),vt.min(),vt.min(),li.empty(),0)}static newFoundDocument(e,t,r,o){return new Pn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Pn(e,2,t,vt.min(),vt.min(),li.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,vt.min(),vt.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class aT{constructor(e,t=null,r=[],o=[],u=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=p,this._t=null}}function HI(n,e=null,t=[],r=[],o=null,u=null,l=null){return new aT(n,e,t,r,o,u,l)}function _c(n){const e=Ye(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ql(r)).join(",")),e._t=t}return e._t}function Yl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nT(n.startAt,e.startAt)&&nT(n.endAt,e.endAt)}function uf(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zv(n,e){return n.filters.filter(t=>t instanceof on&&t.field.isEqual(e))}function Ds(n,e,t){let r=zl,o=!0;for(const u of zv(n,e)){let l=zl,p=!0;switch(u.op){case"<":case"<=":l=NI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,p=!1;break;case"!=":case"not-in":l=zl}jv({value:r,inclusive:o},{value:l,inclusive:p})<0&&(r=l,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];jv({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function GI(n,e,t){let r=Da,o=!0;for(const u of zv(n,e)){let l=Da,p=!0;switch(u.op){case">=":case">":l=PI(u.value),p=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,p=!1;break;case"!=":case"not-in":l=Da}$v({value:r,inclusive:o},{value:l,inclusive:p})>0&&(r=l,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];$v({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Zs{constructor(e,t=null,r=[],o=[],u=null,l="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=_,this.wt=null,this.gt=null}}function zI(n,e,t,r,o,u,l,p){return new Zs(n,e,t,r,o,u,l,p)}function cf(n){return new Zs(n)}function ss(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ql(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function qv(n){return null!==n.collectionGroup}function wc(n){const e=Ye(n);if(null===e.wt){e.wt=[];const t=Ql(e),r=Wv(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new vc(t)),e.wt.push(new vc(Zn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vc(Zn.keyField(),u))}}}return e.wt}function di(n){const e=Ye(n);if(!e.gt)if("F"===e.limitType)e.gt=HI(e.path,e.collectionGroup,wc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wc(e))t.push(new vc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new hu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new hu(e.startAt.position,e.startAt.inclusive):null;e.gt=HI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.gt}function Wg(n,e){e.getFirstInequalityField(),Ql(n);const t=n.filters.concat([e]);return new Zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lf(n,e,t){return new Zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function df(n,e){return Yl(di(n),di(e))&&n.limitType===e.limitType}function Kv(n){return`${_c(di(n))}|lt:${n.limitType}`}function qg(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>sT(r)).join(", ")}]`),ef(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ql(r)).join(",")),`Target(${t})`}(di(n))}; limitType=${n.limitType})`}function hf(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of wc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const p=OI(o,u,l);return o.inclusive?p<=0:p<0}(t.startAt,wc(t),r)||t.endAt&&!function(o,u,l){const p=OI(o,u,l);return o.inclusive?p>=0:p>0}(t.endAt,wc(t),r)));var t,r}function Zv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WI(n){return(e,t)=>{let r=!1;for(const o of wc(n)){const u=Yv(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Yv(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,l){const p=u.data.field(o),_=l.data.field(o);return null!==p&&null!==_?lu(p,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function ba(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function Qv(n){return{integerValue:""+n}}function Kg(n,e){return Ug(e)?Qv(e):ba(n,e)}class bs{constructor(){this._=void 0}}function uT(n,e,t){return n instanceof Xl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Ic?KI(n,e):n instanceof fu?cT(n,e):function(r,o){const u=qI(r,o),l=ZI(u)+ZI(r.It);return Vv(u)&&Vv(r.It)?Qv(l):ba(r.Tt,l)}(n,e)}function QS(n,e,t){return n instanceof Ic?KI(n,e):n instanceof fu?cT(n,e):t}function qI(n,e){return n instanceof Ec?Vv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xl extends bs{}class Ic extends bs{constructor(e){super(),this.elements=e}}function KI(n,e){const t=Xv(e);for(const r of n.elements)t.some(o=>Po(o,r))||t.push(r);return{arrayValue:{values:t}}}class fu extends bs{constructor(e){super(),this.elements=e}}function cT(n,e){let t=Xv(e);for(const r of n.elements)t=t.filter(o=>!Po(o,r));return{arrayValue:{values:t}}}class Ec extends bs{constructor(e,t){super(),this.Tt=e,this.It=t}}function ZI(n){return Yn(n.integerValue||n.doubleValue)}function Xv(n){return Kl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zg{constructor(e,t){this.field=e,this.transform=t}}class YI{constructor(e,t){this.version=e,this.transformResults=t}}class On{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ff(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class pf{}function e_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ed(n.key,On.none()):new Jl(n.key,n.data,On.none());{const t=n.data,r=li.empty();let o=new mn(Zn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new gu(n.key,r,new is(o.toArray()),On.none())}}function Yg(n,e,t){n instanceof Jl?function(r,o,u){const l=r.value.clone(),p=dT(r.fieldTransforms,o,u.transformResults);l.setAll(p),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof gu?function(r,o,u){if(!ff(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=dT(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(lT(r)),p.setAll(l),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pu(n,e,t,r){return n instanceof Jl?function(o,u,l,p){if(!ff(o.precondition,u))return l;const _=o.value.clone(),b=t_(o.fieldTransforms,p,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof gu?function(o,u,l,p){if(!ff(o.precondition,u))return l;const _=t_(o.fieldTransforms,p,u),b=u.data;return b.setAll(lT(o)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,ff(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function QI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=qI(r.transform,o||null);null!=u&&(null===t&&(t=li.empty()),t.set(r.field,u))}return t||null}function XI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Hl(t,r,(o,u)=>function Jv(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ic&&r instanceof Ic||t instanceof fu&&r instanceof fu?Hl(t.elements,r.elements,Po):t instanceof Ec&&r instanceof Ec?Po(t.It,r.It):t instanceof Xl&&r instanceof Xl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Jl extends pf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gu extends pf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function lT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dT(n,e,t){const r=new Map;mt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,p=e.data.field(u.field);r.set(u.field,QS(l,p,t[o]))}return r}function t_(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,uT(u,l,e))}return r}class ed extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n_ extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hT{constructor(e){this.count=e}}var kr,fn;function fT(n){switch(n){default:return ut();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function pT(n){if(void 0===n)return Nn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case kr.OK:return ce.OK;case kr.CANCELLED:return ce.CANCELLED;case kr.UNKNOWN:return ce.UNKNOWN;case kr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case kr.INTERNAL:return ce.INTERNAL;case kr.UNAVAILABLE:return ce.UNAVAILABLE;case kr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case kr.NOT_FOUND:return ce.NOT_FOUND;case kr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case kr.ABORTED:return ce.ABORTED;case kr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case kr.DATA_LOSS:return ce.DATA_LOSS;default:return ut()}}(fn=kr||(kr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Dc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return CI(this.inner)}size(){return this.innerSize}}const gT=new yr(qe.comparator);function hi(){return gT}const JI=new yr(qe.comparator);function gf(...n){let e=JI;for(const t of n)e=e.insert(t.key,t);return e}function r_(n){let e=JI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Di(){return bc()}function i_(){return bc()}function bc(){return new Dc(n=>n.toString(),(n,e)=>n.isEqual(e))}const s_=new yr(qe.comparator),mT=new mn(qe.comparator);function Vt(...n){let e=mT;for(const t of n)e=e.add(t);return e}const o_=new mn(Ft);function Tc(){return o_}class Qg{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Xg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qg(vt.min(),o,Tc(),hi(),Vt())}}class Xg{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xg(r,t,Vt(),Vt(),Vt())}}class a_{constructor(e,t,r,o){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=o}}class yT{constructor(e,t){this.targetId=e,this.Rt=t}}class u_{constructor(e,t,r=or.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class eE{constructor(){this.bt=0,this.vt=nE(),this.Pt=or.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=Vt(),t=Vt(),r=Vt();return this.vt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ut()}}),new Xg(this.Pt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=nE()}Ot(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class vT{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=hi(),this.Kt=tE(),this.Gt=new mn(Ft)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,o)=>{this.Jt(o)&&t(o)})}Zt(e){const t=e.targetId,r=e.Rt.count,o=this.Xt(t);if(o){const u=o.target;if(uf(u))if(0===r){const l=new qe(u.path);this.zt(t,l,Pn.newNoDocument(l,vt.min()))}else mt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,l)=>{const p=this.Xt(l);if(p){if(u.current&&uf(p.target)){const _=new qe(p.target.path);null!==this.Ut.get(_)||this.ne(l,_)||this.zt(l,_,Pn.newNoDocument(_,e))}u.Ct&&(t.set(l,u.Nt()),u.kt())}});let r=Vt();this.Kt.forEach((u,l)=>{let p=!0;l.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const o=new Qg(e,t,this.Gt,this.Ut,r);return this.Ut=hi(),this.Kt=tE(),this.Gt=new mn(Ft),o}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const o=this.Ht(e);this.ne(e,t)?o.Ot(t,1):o.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let t=this.qt.get(e);return t||(t=new eE,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new mn(Ft),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new eE),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function tE(){return new yr(qe.comparator)}function nE(){return new yr(qe.comparator)}const rE={asc:"ASCENDING",desc:"DESCENDING"},iE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sE={and:"AND",or:"OR"};class _T{constructor(e,t){this.databaseId=e,this.yt=t}}function td(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c_(n,e){return n.yt?e.toBase64():e.toUint8Array()}function l_(n,e){return td(n,e.toTimestamp())}function Mr(n){return mt(!!n),vt.fromTimestamp(function(e){const t=gc(e);return new bn(t.seconds,t.nanos)}(n))}function Jg(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function em(n){const e=cn.fromString(n);return mt(y(e)),e}function mf(n,e){return Jg(n.databaseId,e.path)}function Oo(n,e){const t=em(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(aE(t))}function oE(n,e){return Jg(n.databaseId,e)}function wT(n){const e=em(n);return 4===e.length?cn.emptyPath():aE(e)}function yf(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aE(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function uE(n,e,t){return{name:mf(n,e),fields:t.value.mapValue.fields}}function IT(n,e,t){const r=Oo(n,e.name),o=Mr(e.updateTime),u=e.createTime?Mr(e.createTime):vt.min(),l=new li({mapValue:{fields:e.fields}}),p=Pn.newFoundDocument(r,o,u,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function tm(n,e){let t;if(e instanceof Jl)t={update:uE(n,e.key,e.value)};else if(e instanceof ed)t={delete:mf(n,e.key)};else if(e instanceof gu)t={update:uE(n,e.key,e.data),updateMask:h(e.fieldMask)};else{if(!(e instanceof n_))return ut();t={verify:mf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ic)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ec)return{fieldPath:u.field.canonicalString(),increment:l.It};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:l_(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ut()),t;var o}function cE(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?On.updateTime(Mr(o.updateTime)):void 0!==o.exists?On.exists(o.exists):On.none():On.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let p=null;"setToServerValue"in l?(mt("REQUEST_TIME"===l.setToServerValue),p=new Xl):"appendMissingElements"in l?p=new Ic(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new fu(l.removeAllFromArray.values||[]):"increment"in l?p=new Ec(u,l.increment):ut();const _=Zn.fromServerFormat(l.fieldPath);return new Zg(_,p)}(n,o)):[];var o;if(e.update){const o=Oo(n,e.update.name),u=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new is((e.updateMask.fieldPaths||[]).map(b=>Zn.fromServerFormat(b)));return new gu(o,u,l,t,r)}return new Jl(o,u,t,r)}if(e.delete){const o=Oo(n,e.delete);return new ed(o,t)}if(e.verify){const o=Oo(n,e.verify);return new n_(o,t)}return ut()}function DT(n,e){return{documents:[oE(n,e.path)]}}function lE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0!==_.length)return d(In.create(_,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:a((S=b).field),direction:tA(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.yt||ef(b)?b:{value:b});var b,p,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function bT(n){let e=wT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){mt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const O=TT(S);return O instanceof In&&LI(O)?O.getFilters():[O]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new vc(c((O=S).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let p=null;t.limit&&(p=function(S){let O;return O="object"==typeof S?S.value:S,ef(O)?null:O}(t.limit));let _=null;var S;t.startAt&&(_=new hu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new hu(S.values||[],!S.before)}(t.endAt)),zI(e,o,l,u,p,"F",_,b)}function TT(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=c(e.unaryFilter.field);return on.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=c(e.unaryFilter.field);return on.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=c(e.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=c(e.unaryFilter.field);return on.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?on.create(c((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return In.create(e.compositeFilter.filters.map(t=>TT(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function tA(n){return rE[n]}function i(n){return iE[n]}function s(n){return sE[n]}function a(n){return{fieldPath:n.canonicalString()}}function c(n){return Zn.fromServerFormat(n.fieldPath)}function d(n){return n instanceof on?function(e){if("=="===e.op){if(MI(e.value))return{unaryFilter:{field:a(e.field),op:"IS_NAN"}};if(Bv(e.value))return{unaryFilter:{field:a(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(MI(e.value))return{unaryFilter:{field:a(e.field),op:"IS_NOT_NAN"}};if(Bv(e.value))return{unaryFilter:{field:a(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:a(e.field),op:i(e.op),value:e.value}}}(n):n instanceof In?function(e){const t=e.getFilters().map(r=>d(r));return 1===t.length?t[0]:{compositeFilter:{op:s(e.op),filters:t}}}(n):ut()}function h(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function w(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C(e)),e=E(n.get(t),e);return C(e)}function E(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function C(n){return n+"\x01\x01"}function M(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const p=n.substring(u,l);let _;0===o.length?_=p:(o+=p,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:ut()}u=l+2}return new cn(r)}const U=["userId","batchId"];function W(n,e){return[n,w(e)]}function X(n,e,t){return[n,w(e),t]}const _e={},Be=["prefixPath","collectionGroup","readTime","documentId"],Qe=["prefixPath","collectionGroup","documentId"],lt=["collectionGroup","readTime","prefixPath","documentId"],xt=["canonicalId","targetId"],Pe=["targetId","path"],Ut=["path","targetId"],zn=["collectionId","parent"],vr=["indexId","uid"],nA=["uid","sequenceNumber"],gM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mM=["indexId","uid","orderedDocumentKey"],yM=["userId","collectionPath","documentId"],vM=["userId","collectionPath","largestBatchId"],_M=["userId","collectionGroup","largestBatchId"],rA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wM=[...rA,"documentOverlays"],iA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sA=iA,IM=[...sA,"indexConfiguration","indexState","indexEntries"];class CT extends Lv{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function bi(n,e){const t=Ye(n);return Is.M(t.re,e)}class ST{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Yg(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=i_();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=t.has(o.key)?null:p;const _=e_(l,p);null!==_&&r.set(o.key,_),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,(t,r)=>XI(t,r))&&Hl(this.baseMutations,e.baseMutations,(t,r)=>XI(t,r))}}class AT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){mt(e.mutations.length===r.length);let o=s_;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new AT(e,t,r,o)}}class xT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nd{constructor(e,t,r,o,u=vt.min(),l=vt.min(),p=or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p}withSequenceNumber(e){return new nd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oA{constructor(e){this.oe=e}}function aA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:mf(o=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:td(o,u.version.toTimestamp()),createTime:td(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vf(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:vf(e.version)}}var o,u;return r}function dE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _f(n){const e=new bn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function wf(n,e){const t=(e.baseMutations||[]).map(u=>cE(n.oe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>cE(n.oe,u)),o=bn.fromMillis(e.localWriteTimeMs);return new ST(e.batchId,o,t,r)}function d_(n){const e=_f(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_f(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(mt(1===(o=n.query).documents.length),r=di(cf(wT(o.documents[0])))):r=di(bT(n.query)),new nd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken))}function uA(n,e){const t=vf(e.snapshotVersion),r=vf(e.lastLimboFreeSnapshotVersion);let o;o=uf(e.target)?DT(n.oe,e.target):lE(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_c(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function MT(n){const e=bT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lf(e,e.limit,"L"):e}function RT(n,e){return new xT(e.largestBatchId,cE(n.oe,e.overlayMutation))}function cA(n,e){const t=e.path.lastSegment();return[n,w(e.path.popLast()),t]}function lA(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:vf(r.readTime),documentKey:w(r.documentKey.path),largestBatchId:r.largestBatchId}}class DM{getBundleMetadata(e,t){return dA(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_f(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return dA(e).put({bundleId:(r=t).id,createTime:vf(Mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return hA(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:MT(o.bundledQuery),readTime:_f(o.readTime)};var o})}saveNamedQuery(e,t){return hA(e).put({name:(r=t).name,readTime:vf(Mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function dA(n){return bi(n,"bundles")}function hA(n){return bi(n,"namedQueries")}class hE{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new hE(e,t.uid||"")}getOverlay(e,t){return h_(e).get(cA(this.userId,t)).next(r=>r?RT(this.Tt,r):null)}getOverlays(e,t){const r=Di();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const p=new xT(t,l);o.push(this.ce(e,p))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(w(l.getCollectionPath())));const u=[];return o.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(h_(e).Y("collectionPathOverlayIndex",p))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Di(),u=w(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return h_(e).W("collectionPathOverlayIndex",l).next(p=>{for(const _ of p){const b=RT(this.Tt,_);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Di();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return h_(e).X({index:"collectionGroupOverlayIndex",range:p},(_,b,S)=>{const O=RT(this.Tt,b);u.size()<o||O.largestBatchId===l?(u.set(O.getKey(),O),l=O.largestBatchId):S.done()}).next(()=>u)}ce(e,t){return h_(e).put(function(r,o,u){const[l,p,_]=cA(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:tm(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function h_(n){return bi(n,"documentOverlays")}class If{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),tf(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(mc(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?RI(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):ut()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const o of Object.keys(r))this.we(o,t),this.he(r[o],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const o of r)this.he(o,t)}ye(e,t){this.fe(t,37),qe.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function bM(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function fA(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=bM(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}If.Ee=new If;class TM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.be()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.be()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.Ve()}Ce(e){const t=this.xe(e),r=fA(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}ke(e){const t=this.xe(e),r=fA(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.$e(0),this.$e(255)):255===t?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class CM{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class SM{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class f_{constructor(){this.Le=new TM,this.qe=new CM(this.Le),this.Ue=new SM(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Ef{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ef(this.indexId,this.documentKey,this.arrayValue,r)}}function rd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=pA(n.arrayValue,e.arrayValue),0!==t?t:(t=pA(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function pA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class AM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){mt(e.collectionGroup===this.collectionId);const t=Zh(e);if(void 0!==t&&!this.He(t))return!1;const r=Ia(e);let o=0,u=0;for(;o<r.length&&this.He(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.ze){const l=r[o];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Qe.length||!this.Ye(this.Qe[u++],r[o]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function gA(n){var e,t;if(mt(n instanceof on||n instanceof In),n instanceof on){if(n instanceof Gg){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>on.create(n.field,"==",u)))||[];return In.create(o,"or")}return n}const r=n.filters.map(o=>gA(o));return In.create(r,n.op)}function xM(n){if(0===n.getFilters().length)return[];const e=OT(gA(n));return mt(mA(e)),NT(e)||PT(e)?[e]:e.getFilters()}function NT(n){return n instanceof on}function PT(n){return n instanceof In&&LI(n)}function mA(n){return NT(n)||PT(n)||function(e){if(e instanceof In&&kI(e)){for(const t of e.getFilters())if(!NT(t)&&!PT(t))return!1;return!0}return!1}(n)}function OT(n){if(mt(n instanceof on||n instanceof In),n instanceof on)return n;if(1===n.filters.length)return OT(n.filters[0]);const e=n.filters.map(r=>OT(r));let t=In.create(e,n.op);return t=fE(t),mA(t)?t:(mt(t instanceof In),mt(rf(t)),mt(t.filters.length>1),t.filters.reduce((r,o)=>kT(r,o)))}function kT(n,e){let t;return mt(n instanceof on||n instanceof In),mt(e instanceof on||e instanceof In),t=n instanceof on?e instanceof on?In.create([n,e],"and"):yA(n,e):e instanceof on?yA(e,n):function(r,o){if(mt(r.filters.length>0&&o.filters.length>0),rf(r)&&rf(o))return sf(r,o.getFilters());const u=kI(r)?r:o,l=kI(r)?o:r,p=u.filters.map(_=>kT(_,l));return In.create(p,"or")}(n,e),fE(t)}function yA(n,e){if(rf(e))return sf(e,n.getFilters());{const t=e.filters.map(r=>kT(n,r));return In.create(t,"or")}}function fE(n){if(mt(n instanceof on||n instanceof In),n instanceof on)return n;const e=n.getFilters();if(1===e.length)return fE(e[0]);if(rT(n))return n;const t=e.map(o=>fE(o)),r=[];return t.forEach(o=>{o instanceof on?r.push(o):o instanceof In&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:In.create(r,n.op)}class MM{constructor(){this.Ze=new LT}addToCollectionParentIndex(e,t){return this.Ze.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(rs.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class LT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new mn(cn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mn(cn.comparator)).toArray()}}const pE=new Uint8Array(0);class RM{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new LT,this.tn=new Dc(r=>_c(r),(r,o)=>Yl(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:w(o)};return vA(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[vI(t),""],!1,!0);return vA(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(M(l.parent))}return r})}addFieldIndex(e,t){const r=gE(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=g_(e);return u.next(p=>{l.put(lA(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=gE(e),o=g_(e),u=p_(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=p_(e);let o=!0;const u=new Map;return oe.forEach(this.en(t),l=>this.nn(e,l).next(p=>{o&&(o=!!p),u.set(l,p)})).next(()=>{if(o){let l=Vt();const p=[];return oe.forEach(u,(_,b)=>{var S;Oe("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(zt=>`${zt.fieldPath}:${zt.kind}`).join(",")}`} to execute ${_c(t)}`);const O=function(zt,Wt){const Bt=Zh(Wt);if(void 0===Bt)return null;for(const Jt of zv(zt,Bt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(b,_),z=function(zt,Wt){const Bt=new Map;for(const Jt of Ia(Wt))for(const fi of zv(zt,Jt.fieldPath))switch(fi.op){case"==":case"in":Bt.set(Jt.fieldPath.canonicalString(),fi.value);break;case"not-in":case"!=":return Bt.set(Jt.fieldPath.canonicalString(),fi.value),Array.from(Bt.values())}return null}(b,_),te=function(zt,Wt){const Bt=[];let Jt=!0;for(const fi of Ia(Wt)){const V_=0===fi.kind?Ds(zt,fi.fieldPath,zt.startAt):GI(zt,fi.fieldPath,zt.startAt);Bt.push(V_.value),Jt&&(Jt=V_.inclusive)}return new hu(Bt,Jt)}(b,_),ue=function(zt,Wt){const Bt=[];let Jt=!0;for(const fi of Ia(Wt)){const V_=0===fi.kind?GI(zt,fi.fieldPath,zt.endAt):Ds(zt,fi.fieldPath,zt.endAt);Bt.push(V_.value),Jt&&(Jt=V_.inclusive)}return new hu(Bt,Jt)}(b,_),Fe=this.sn(_,b,te),He=this.sn(_,b,ue),Zt=this.rn(_,b,z),Qt=this.on(_.indexId,O,Fe,te.inclusive,He,ue.inclusive,Zt);return oe.forEach(Qt,zt=>r.J(zt,t.limit).next(Wt=>{Wt.forEach(Bt=>{const Jt=qe.fromSegments(Bt.documentKey);l.has(Jt)||(l=l.add(Jt),p.push(Jt))})}))}).next(()=>p)}return oe.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:xM(In.create(e.filters,"and")).map(r=>HI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,o,u,l,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let O=0;O<_;++O){const z=t?this.un(t[O/b]):pE,te=this.cn(e,z,r[O%b],o),ue=this.an(e,z,u[O%b],l),Fe=p.map(He=>this.cn(e,z,He,!0));S.push(...this.createRange(te,ue,Fe))}return S}cn(e,t,r,o){const u=new Ef(e,qe.empty(),t,r);return o?u:u.Ge()}an(e,t,r,o){const u=new Ef(e,qe.empty(),t,r);return o?u.Ge():u}nn(e,t){const r=new AM(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const p of u)r.We(p)&&(!l||p.fields.length>l.fields.length)&&(l=p);return l})}getIndexType(e,t){let r=2;const o=this.en(t);return oe.forEach(o,u=>this.nn(e,u).next(l=>{l?0!==r&&l.fields.length<function(p){let _=new mn(Zn.comparator),b=!1;for(const S of p.filters)for(const O of S.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?b=!0:_=_.add(O.field));for(const S of p.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}hn(e,t){const r=new f_;for(const o of Ia(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Ke(o.kind);If.Ee.ae(u,l)}return r.Be()}un(e){const t=new f_;return If.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new f_;return If.Ee.ae(du(this.databaseId,t),r.Ke(function(o){const u=Ia(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let o=[];o.push(new f_);let u=0;for(const l of Ia(e)){const p=r[u++];for(const _ of o)if(this.fn(t,l.fieldPath)&&Kl(p))o=this.dn(o,l,p);else{const b=_.Ke(l.kind);If.Ee.ae(p,b)}}return this._n(o)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const p of o){const _=new f_;_.seed(p.Be()),If.Ee.ae(l,_.Ke(t.kind)),u.push(_)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof on&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gE(e),o=g_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return oe.forEach(u,p=>o.get([p.indexId,this.uid]).next(_=>{l.push(function(b,S){const O=S?new Yh(S.sequenceNumber,new rs(_f(S.readTime),new qe(M(S.documentKey)),S.largestBatchId)):Yh.empty(),z=b.fields.map(([te,ue])=>new Gl(Zn.fromServerFormat(te),ue));return new Kh(b.indexId,b.collectionGroup,z,O)}(p,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=gE(e),u=g_(e);return this.wn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>oe.forEach(p,_=>u.put(lA(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),oe.forEach(p,_=>this.mn(e,o,_).next(b=>{const S=this.gn(u,_);return b.isEqual(S)?oe.resolve():this.yn(e,u,_,b,S)}))))})}pn(e,t,r,o){return p_(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,o){return p_(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const o=p_(e);let u=new mn(rd);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,p)=>{u=u.add(new Ef(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}gn(e,t){let r=new mn(rd);const o=this.hn(t,e);if(null==o)return r;const u=Zh(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Kl(l))for(const p of l.arrayValue.values||[])r=r.add(new Ef(t.indexId,e.key,this.un(p),o))}else r=r.add(new Ef(t.indexId,e.key,pE,o));return r}yn(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,_,b,S,O){const z=p.getIterator(),te=_.getIterator();let ue=af(z),Fe=af(te);for(;ue||Fe;){let He=!1,Zt=!1;if(ue&&Fe){const Qt=b(ue,Fe);Qt<0?Zt=!0:Qt>0&&(He=!0)}else null!=ue?Zt=!0:He=!0;He?(S(Fe),Fe=af(te)):Zt?(O(ue),ue=af(z)):(ue=af(z),Fe=af(te))}}(o,u,rd,p=>{l.push(this.pn(e,t,r,p))},p=>{l.push(this.In(e,t,r,p))}),oe.waitFor(l)}wn(e){let t=1;return g_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>rd(l,p)).filter((l,p,_)=>!p||0!==rd(l,_[p-1]));const o=[];o.push(e);for(const l of r){const p=rd(l,e),_=rd(l,t);if(0===p)o[0]=e.Ge();else if(p>0&&_<0)o.push(l),o.push(l.Ge());else if(_>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.Tn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,pE,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,pE,[]]))}return u}Tn(e,t){return rd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_A)}getMinOffset(e,t){return oe.mapArray(this.en(t),r=>this.nn(e,r).next(o=>o||ut())).next(_A)}}function vA(n){return bi(n,"collectionParents")}function p_(n){return bi(n,"indexEntries")}function gE(n){return bi(n,"indexConfiguration")}function g_(n){return bi(n,"indexState")}function _A(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Og(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new rs(e.readTime,e.documentKey,t)}const wA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ts(e,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function IA(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let p=0;const _=r.X({range:l},(S,O,z)=>(p++,z.delete()));u.push(_.next(()=>{mt(1===p)}));const b=[];for(const S of t.mutations){const O=X(e,S.key.path,t.batchId);u.push(o.delete(O)),b.push(S.key)}return oe.waitFor(u).next(()=>b)}function mE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Ts.DEFAULT_COLLECTION_PERCENTILE=10,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ts.DEFAULT=new Ts(41943040,Ts.DEFAULT_COLLECTION_PERCENTILE,Ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ts.DISABLED=new Ts(-1,0,0);class yE{constructor(e,t,r,o){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=o,this.En={}}static ue(e,t,r,o){mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new yE(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return id(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=nm(e),l=id(e);return l.add({}).next(p=>{mt("number"==typeof p);const _=new ST(p,t,r,o),b=function(z,te,ue){const Fe=ue.baseMutations.map(Zt=>tm(z.oe,Zt)),He=ue.mutations.map(Zt=>tm(z.oe,Zt));return{userId:te,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:Fe,mutations:He}}(this.Tt,this.userId,_),S=[];let O=new mn((z,te)=>Ft(z.canonicalString(),te.canonicalString()));for(const z of o){const te=X(this.userId,z.key.path,p);O=O.add(z.key.path.popLast()),S.push(l.put(b)),S.push(u.put(te,_e))}return O.forEach(z=>{S.push(this.indexManager.addToCollectionParentIndex(e,z))}),e.addOnCommittedListener(()=>{this.En[p]=_.keys()}),oe.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return id(e).get(t).next(r=>r?(mt(r.userId===this.userId),wf(this.Tt,r)):null)}An(e,t){return this.En[t]?oe.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.En[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return id(e).X({index:"userMutationsIndex",range:o},(l,p,_)=>{p.userId===this.userId&&(mt(p.batchId>=r),u=wf(this.Tt,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return id(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return id(e).W("userMutationsIndex",t).next(r=>r.map(o=>wf(this.Tt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=W(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return nm(e).X({range:o},(l,p,_)=>{const[b,S,O]=l,z=M(S);if(b===this.userId&&t.path.isEqual(z))return id(e).get(O).next(te=>{if(!te)throw ut();mt(te.userId===this.userId),u.push(wf(this.Tt,te))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Ft);const o=[];return t.forEach(u=>{const l=W(this.userId,u.path),p=IDBKeyRange.lowerBound(l),_=nm(e).X({range:p},(b,S,O)=>{const[z,te,ue]=b,Fe=M(te);z===this.userId&&u.path.isEqual(Fe)?r=r.add(ue):O.done()});o.push(_)}),oe.waitFor(o).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=W(this.userId,r),l=IDBKeyRange.lowerBound(u);let p=new mn(Ft);return nm(e).X({range:l},(_,b,S)=>{const[O,z,te]=_,ue=M(z);O===this.userId&&r.isPrefixOf(ue)?ue.length===o&&(p=p.add(te)):S.done()}).next(()=>this.Rn(e,p))}Rn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(id(e).get(u).next(l=>{if(null===l)throw ut();mt(l.userId===this.userId),r.push(wf(this.Tt,l))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return IA(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.bn(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return nm(e).X({range:r},(u,l,p)=>{if(u[0]===this.userId){const _=M(u[1]);o.push(_)}else p.done()}).next(()=>{mt(0===o.length)})})}containsKey(e,t){return EA(e,this.userId,t)}vn(e){return DA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EA(n,e,t){const r=W(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return nm(n).X({range:u,Z:!0},(p,_,b)=>{const[S,O,z]=p;S===e&&O===o&&(l=!0),b.done()}).next(()=>l)}function id(n){return bi(n,"mutations")}function nm(n){return bi(n,"documentMutations")}function DA(n){return bi(n,"mutationQueues")}class Df{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new Df(0)}static Sn(){return new Df(-1)}}class NM{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Df(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>vt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Cn(e,o)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rm(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return rm(e).X((l,p)=>{const _=d_(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return rm(e).X((r,o)=>{const u=d_(o);t(u)})}Dn(e){return bA(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Cn(e,t){return bA(e).put("targetGlobalKey",t)}xn(e,t){return rm(e).put(uA(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_c(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return rm(e).X({range:o,index:"queryTargetsIndex"},(l,p,_)=>{const b=d_(p);Yl(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=sd(e);return t.forEach(l=>{const p=w(l.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=sd(e);return oe.forEach(t,u=>{const l=w(u.path);return oe.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=sd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=sd(e);let u=Vt();return o.X({range:r,Z:!0},(l,p,_)=>{const b=M(l[1]),S=new qe(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=w(t.path),o=IDBKeyRange.bound([r],[vI(r)],!1,!0);let u=0;return sd(e).X({index:"documentTargetsIndex",Z:!0,range:o},([l,p],_,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ie(e,t){return rm(e).get(t).next(r=>r?d_(r):null)}}function rm(n){return bi(n,"targets")}function bA(n){return bi(n,"targetGlobal")}function sd(n){return bi(n,"targetDocuments")}function TA([n,e],[t,r]){const o=Ft(n,t);return 0===o?Ft(e,r):o}class PM{constructor(e){this.kn=e,this.buffer=new mn(TA),this.On=0}Mn(){return++this.On}Fn(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.$n=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return null!==this.$n}Bn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.$n=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ea(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uu(r)}yield t.Bn(3e5)}))}}class kM{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Es.at);const r=new PM(t);return this.Ln.forEachTarget(e,o=>r.Fn(o.sequenceNumber)).next(()=>this.Ln.Un(e,o=>r.Fn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(wA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wA):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,o,u,l,p,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,l=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,p=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(b=Date.now(),Pv()<=Pr.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${o} in `+(p-l)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${O} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class LM{constructor(e,t){this.db=e,this.garbageCollector=new kM(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,o)=>t(o))}addReference(e,t,r){return vE(e,r)}removeReference(e,t,r){return vE(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vE(e,t)}jn(e,t){return function(r,o){let u=!1;return DA(r).tt(l=>EA(r,l,o).next(p=>(p&&(u=!0),oe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Qn(e,(l,p)=>{if(p<=t){const _=this.jn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),sd(e).delete([0,w(l.path)])))});o.push(_)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vE(e,t)}Qn(e,t){const r=sd(e);let o,u=Es.at;return r.X({index:"documentTargetsIndex"},([l,p],{path:_,sequenceNumber:b})=>{0===l?(u!==Es.at&&t(new qe(M(o)),u),u=b,o=_):u=Es.at}).next(()=>{u!==Es.at&&t(new qe(M(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vE(n,e){return sd(n).put((r=n.currentSequenceNumber,{targetId:0,path:w(e.path),sequenceNumber:r}));var r}class CA{constructor(){this.changes=new Dc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FM{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bf(e).put(r)}removeEntry(e,t,r){return bf(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],dE(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return bf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(m_(t))},(o,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return bf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(m_(t))},(o,u)=>{r={document:this.Wn(t,u),size:mE(u)}}).next(()=>r)}getEntries(e,t){let r=hi();return this.Jn(e,t,(o,u)=>{const l=this.Wn(o,u);r=r.insert(o,l)}).next(()=>r)}Yn(e,t){let r=hi(),o=new yr(qe.comparator);return this.Jn(e,t,(u,l)=>{const p=this.Wn(u,l);r=r.insert(u,p),o=o.insert(u,mE(l))}).next(()=>({documents:r,Zn:o}))}Jn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new mn(MA);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(m_(o.first()),m_(o.last())),l=o.getIterator();let p=l.getNext();return bf(e).X({index:"documentKeyIndex",range:u},(_,b,S)=>{const O=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&MA(p,O)<0;)r(p,null),p=l.getNext();p&&p.isEqual(O)&&(r(p,b),p=l.hasNext()?l.getNext():null),p?S.j(m_(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),dE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bf(e).W(IDBKeyRange.bound(l,p,!0)).next(_=>{let b=hi();for(const S of _){const O=this.Wn(qe.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);O.isFoundDocument()&&(hf(t,O)||o.has(O.key))&&(b=b.insert(O.key,O))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=hi();const l=xA(t,r),p=xA(t,rs.max());return bf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(_,b,S)=>{const O=this.Wn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(O.key,O),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new UM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AA(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}zn(e,t){return AA(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function EM(n,e){let t;if(e.document)t=IT(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=_f(e.noDocument.readTime);t=Pn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=qe.fromSegments(e.unknownDocument.path),o=_f(e.unknownDocument.version);t=Pn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new bn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Pn.newInvalidDocument(e)}}function SA(n){return new FM(n)}class UM extends CA{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Dc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new mn((u,l)=>Ft(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const p=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,p.readTime)),l.isValidDocument()){const _=aA(this.Xn.Tt,l);o=o.add(u.path.popLast());const b=mE(_);r+=b-p.size,t.push(this.Xn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=aA(this.Xn.Tt,l.convertToNoDocument(vt.min()));t.push(this.Xn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:o})=>(o.forEach((u,l)=>{this.ts.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function AA(n){return bi(n,"remoteDocumentGlobal")}function bf(n){return bi(n,"remoteDocumentsV14")}function m_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xA(n,e){const t=e.documentKey.path.toArray();return[n,dE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function MA(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ft(t[u],r[u]),o)return o;return o=Ft(t.length,r.length),o||(o=Ft(t[t.length-2],r[r.length-2]),o||Ft(t[t.length-1],r[r.length-1]))}class VM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class RA{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&pu(r.mutation,o,is.empty(),bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const o=Di();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=gf();return u.forEach((p,_)=>{l=l.insert(p,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Di();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,p)=>{t.set(l,p)})})}computeViews(e,t,r,o){let u=hi();const l=bc(),p=bc();return t.forEach((_,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof gu)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),pu(S.mutation,b,S.mutation.getFieldMask(),bn.now())):l.set(b.key,is.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var O;return p.set(b,new VM(S,null!==(O=l.get(b))&&void 0!==O?O:null))}),p))}recalculateAndSaveOverlays(e,t){const r=bc();let o=new yr((l,p)=>l-p),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const p of l)p.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let S=r.get(_)||is.empty();S=p.applyToLocalView(b,S),r.set(_,S);const O=(o.get(p.batchId)||Vt()).add(_);o=o.insert(p.batchId,O)})}).next(()=>{const l=[],p=o.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),b=_.key,S=_.value,O=i_();S.forEach(z=>{if(!u.has(z)){const te=e_(t.get(z),r.get(z));null!==te&&O.set(z,te),u=u.add(z)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,O))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(Di());let p=-1,_=u;return l.next(b=>oe.forEach(b,(S,O)=>(p<O.largestBatchId&&(p=O.largestBatchId),u.get(S)?oe.resolve():this.remoteDocumentCache.getEntry(e,S).next(z=>{_=_.insert(S,z)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,Vt())).next(S=>({batchId:p,changes:r_(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=gf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=gf();return this.indexManager.getCollectionParents(e,o).next(l=>oe.forEach(l,p=>{const _=(b=t,S=p.child(o),new Zs(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((p,_)=>{const b=_.getKey();null===u.get(b)&&(u=u.insert(b,Pn.newInvalidDocument(b)))});let l=gf();return u.forEach((p,_)=>{const b=o.get(p);void 0!==b&&pu(b.mutation,_,is.empty(),bn.now()),hf(t,_)&&(l=l.insert(p,_))}),l})}}class BM{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return oe.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Mr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:MT(r.bundledQuery),readTime:Mr(r.readTime)}),oe.resolve();var r}}class jM{constructor(){this.overlays=new yr(qe.comparator),this.ss=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Di();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ce(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ss.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=Di(),u=t.length+1,l=new qe(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const _=p.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new yr((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=Di(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=Di(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=o)););return oe.resolve(p)}ce(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ss.get(o.largestBatchId).delete(r.key);this.ss.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new xT(t,r));let u=this.ss.get(t);void 0===u&&(u=Vt(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class FT{constructor(){this.rs=new mn(Ti.os),this.us=new mn(Ti.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Ti(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Ti(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new qe(new cn([])),r=new Ti(t,e),o=new Ti(t,e+1),u=[];return this.us.forEachInRange([r,o],l=>{this.ls(l),u.push(l.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new qe(new cn([])),r=new Ti(t,e),o=new Ti(t,e+1);let u=Vt();return this.us.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Ti(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ti{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return qe.comparator(e.key,t.key)||Ft(e.gs,t.gs)}static cs(e,t){return Ft(e.gs,t.gs)||qe.comparator(e.key,t.key)}}class $M{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new mn(Ti.os)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ys;this.ys++;const l=new ST(u,t,r,o);this.mutationQueue.push(l);for(const p of o)this.ps=this.ps.add(new Ti(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ts(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ti(t,0),o=new Ti(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,o],l=>{const p=this.Is(l.gs);u.push(p)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(Ft);return t.forEach(o=>{const u=new Ti(o,0),l=new Ti(o,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,l],p=>{r=r.add(p.gs)})}),oe.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const l=new Ti(new qe(u),0);let p=new mn(Ft);return this.ps.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(_.gs)),!0)},l),oe.resolve(this.Es(p))}Es(e){const t=[];return e.forEach(r=>{const o=this.Is(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){mt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return oe.forEach(t.mutations,o=>{const u=new Ti(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,t){const r=new Ti(t,0),o=this.ps.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HM{constructor(e){this.Rs=e,this.docs=new yr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=hi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Pn.newInvalidDocument(o))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=hi();const l=t.path,p=new qe(l.child("")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:b,value:{document:S}}=_.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Og(EI(S),r)<=0||(o.has(S.key)||hf(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,t,r,o){ut()}bs(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new GM(this)}getSize(e){return oe.resolve(this.size)}}class GM extends CA{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Xn.addEntry(e,o)):this.Xn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class zM{constructor(e){this.persistence=e,this.vs=new Dc(t=>_c(t),Yl),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new FT,this.targetCount=0,this.Ss=Df.Vn()}forEachTarget(e,t){return this.vs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ps&&(this.Ps=t),oe.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Df(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.xn(t),oe.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.vs.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.vs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Vs.containsKey(t))}}class NA{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Es(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new zM(this),this.indexManager=new MM,this.remoteDocumentCache=new HM(r=>this.referenceDelegate.ks(r)),this.Tt=new oA(t),this.Os=new BM(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new $M(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new WM(this.Cs.next());return this.referenceDelegate.Ms(),r(o).next(u=>this.referenceDelegate.Fs(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}$s(e,t){return oe.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class WM extends Lv{constructor(e){super(),this.currentSequenceNumber=e}}class _E{constructor(e){this.persistence=e,this.Bs=new FT,this.Ls=null}static qs(e){return new _E(e)}get Us(){if(this.Ls)return this.Ls;throw ut()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(o=>this.Us.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Fs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Us,r=>{const o=qe.fromPath(r);return this.Ks(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return oe.or([()=>oe.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.$s(e,t)])}}class qM{constructor(e){this.Tt=e}$(e,t,r,o){const u=new Fg("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U,{unique:!0}),p.createObjectStore("documentMutations"),PA(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),PA(e)),l=l.next(()=>function(p){const _=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(p,_){return _.store("mutations").W().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",U,{unique:!0});const S=_.store("mutations"),O=b.map(z=>S.put(z));return oe.waitFor(O)})}(e,u))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Gs(u))),r<6&&o>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&o>=7&&(l=l.next(()=>this.js(u))),r<8&&o>=8&&(l=l.next(()=>this.zs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Ws(u))),r<11&&o>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:yM});_.createIndex("collectionPathOverlayIndex",vM,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",_M,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:Be});_.createIndex("documentKeyIndex",Qe),_.createIndex("collectionGroupIndex",lt)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.Js(e,u))),r<15&&o>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:vr}).createIndex("sequenceNumberIndex",nA,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:gM}).createIndex("documentKeyIndex",mM,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=mE(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>oe.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(p=>oe.forEach(p,_=>{mt(_.userId===u.userId);const b=wf(this.Tt,_);return IA(e,u.userId,b).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,p)=>{const _=new cn(l),b=[0,w(_)];u.push(t.get(b).next(S=>S?oe.resolve():t.put({targetId:0,path:w(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:zn});const r=t.store("collectionParents"),o=new LT,u=l=>{if(o.add(l)){const p=l.lastSegment(),_=l.popLast();return r.put({collectionId:p,parent:w(_)})}};return t.store("remoteDocuments").X({Z:!0},(l,p)=>{const _=new cn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,p,_],b)=>{const S=M(p);return u(S.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,o)=>{const u=d_(o),l=uA(this.Tt,u);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const p=t.store("remoteDocumentsV14"),_=(b=l,b.document?new qe(cn.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):ut()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(p.put(S))}).next(()=>oe.waitFor(o))}Js(e,t){const r=t.store("mutations"),o=SA(this.Tt),u=new NA(_E.qs,this.Tt.oe);return r.W().next(l=>{const p=new Map;return l.forEach(_=>{var b;let S=null!==(b=p.get(_.userId))&&void 0!==b?b:Vt();wf(this.Tt,_).keys().forEach(O=>S=S.add(O)),p.set(_.userId,S)}),oe.forEach(p,(_,b)=>{const S=new Yr(b),O=hE.ue(this.Tt,S),z=u.getIndexManager(S),te=yE.ue(S,this.Tt,z,u.referenceDelegate);return new RA(o,te,O,z).recalculateAndSaveOverlaysForDocumentKeys(new CT(t,Es.at),_).next()})})}}function PA(n){n.createObjectStore("targetDocuments",{keyPath:Pe}).createIndex("documentTargetsIndex",Ut,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xt,{unique:!0}),n.createObjectStore("targetGlobal")}const UT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VT{constructor(e,t,r,o,u,l,p,_,b,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=l,this.document=p,this.Zs=b,this.Xs=S,this.ti=O,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=z=>Promise.resolve(),!VT.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LM(this,o),this.oi=t+"main",this.Tt=new oA(_),this.ui=new Is(this.oi,this.ti,new qM(this.Tt)),this.Ns=new NM(this.referenceDelegate,this.Tt),this.remoteDocumentCache=SA(this.Tt),this.Os=new DM,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===S&&Nn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,UT);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Es(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Ea(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return y_(e).get("owner").next(t=>oe.resolve(this.yi(t)))}pi(e){return wE(e).delete(this.clientId)}Ii(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=bi(r,"clientMetadata");return o.W().next(u=>{const l=e.Ei(u,18e5),p=u.filter(_=>-1===l.indexOf(_));return oe.forEach(p,_=>o.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?oe.resolve(!0):y_(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,UT);return!1}}return!(!this.networkEnabled||!this.inForeground)||wE(e).W().next(r=>void 0===this.Ei(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.xs=!1,e.bi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.Pi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new CT(t,Es.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>wE(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return yE.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RM(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return hE.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ti)?IM:14===l?sA:13===l?iA:12===l?wM:11===l?rA:void ut();var l;let p;return this.ui.runTransaction(e,o,u,_=>(p=new CT(_,this.Cs?this.Cs.next():Es.at),"readwrite-primary"===t?this._i(p).next(b=>!!b||this.wi(p)).next(b=>{if(!b)throw Nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ne(ce.FAILED_PRECONDITION,kg);return r(p)}).next(b=>this.gi(p).next(()=>b)):this.Di(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Di(e){return y_(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,UT)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return y_(e).put("owner",t)}static C(){return Is.C()}mi(e){const t=y_(e);return t.get("owner").next(r=>this.yi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Nn(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.bi(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Nn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Nn("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function y_(n){return bi(n,"owner")}function wE(n){return bi(n,"clientMetadata")}function BT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=o}static Ni(e,t){let r=Vt(),o=Vt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jT(e,t.fromCache,r,o)}}class OA{constructor(){this.ki=!1}initialize(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Mi(e,t).next(u=>u||this.Fi(e,t,o,r)).next(u=>u||this.$i(e,t))}Mi(e,t){if(ss(t))return oe.resolve(null);let r=di(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=lf(t,null,"F"),r=di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Vt(...u);return this.Oi.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Bi(t,p);return this.Li(t,b,l,_.readTime)?this.Mi(e,lf(t,null,"F")):this.qi(e,b,t,_)}))})))}Fi(e,t,r,o){return ss(t)||o.isEqual(vt.min())?this.$i(e,t):this.Oi.getDocuments(e,r).next(u=>{const l=this.Bi(t,u);return this.Li(t,l,r,o)?this.$i(e,t):(Pv()<=Pr.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qg(t)),this.qi(e,l,t,II(o,-1)))})}Bi(e,t){let r=new mn(WI(e));return t.forEach((o,u)=>{hf(e,u)&&(r=r.add(u))}),r}Li(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}$i(e,t){return Pv()<=Pr.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",qg(t)),this.Oi.getDocumentsMatchingQuery(e,t,rs.min())}qi(e,t,r,o){return this.Oi.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class KM{constructor(e,t,r,o){this.persistence=e,this.Ui=t,this.Tt=o,this.Ki=new yr(Ft),this.Gi=new Dc(u=>_c(u),Yl),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RA(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function kA(n,e,t,r){return new KM(n,e,t,r)}function LA(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,ge.Z)(function*(n,e){const t=Ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],p=[];let _=Vt();for(const b of o){l.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(b=>({Wi:b,removedBatchIds:l,addedBatchIds:p}))})})}),$T.apply(this,arguments)}function FA(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function UA(n,e,t){let r=Vt(),o=Vt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=hi();return t.forEach((p,_)=>{const b=u.get(p);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(p)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(p,_.readTime),l=l.insert(p,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),l=l.insert(p,_)):Oe("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",_.version)}),{Hi:l,Ji:o}})}function QM(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function im(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ns.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Ns.allocateTargetId(r).next(l=>(o=new nd(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ki.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function sm(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,ge.Z)(function*(n,e,t){const r=Ye(n),o=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Ea(l))throw l;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(o.target)}),HT.apply(this,arguments)}function IE(n,e,t){const r=Ye(n);let o=vt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,_,b){const S=Ye(p),O=S.Gi.get(b);return void 0!==O?oe.resolve(S.Ki.get(O)):S.Ns.getTargetData(_,b)}(r,l,di(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,p.targetId).next(_=>{u=_})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:Vt())).next(p=>(jA(r,Zv(e),p),{documents:p,Yi:u})))}function VA(n,e){const t=Ye(n),r=Ye(t.Ns),o=t.Ki.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(l=>l?l.target:null))}function BA(n,e){const t=Ye(n),r=t.Qi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ji.getAllFromCollectionGroup(o,e,II(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(jA(t,e,o),o))}function jA(n,e,t){let r=n.Qi.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function GT(){return GT=(0,ge.Z)(function*(n,e,t,r){const o=Ye(n);let u=Vt(),l=hi();for(const b of t){const S=e.Zi(b.metadata.name);b.document&&(u=u.add(S));const O=e.Xi(b);O.setReadTime(e.tr(b.metadata.readTime)),l=l.insert(S,O)}const p=o.ji.newChangeBuffer({trackRemovals:!0}),_=yield im(o,(b=r,di(cf(cn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>UA(b,p,l).next(S=>(p.apply(b),S)).next(S=>o.Ns.removeMatchingKeysForTargetId(b,_.targetId).next(()=>o.Ns.addMatchingKeys(b,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Hi,S.Ji)).next(()=>S.Hi)))}),GT.apply(this,arguments)}function JM(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,ge.Z)(function*(n,e,t=Vt()){const r=yield im(n,di(MT(e.bundledQuery))),o=Ye(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Mr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Os.saveNamedQuery(u,e);const p=r.withResumeToken(or.EMPTY_BYTE_STRING,l);return o.Ki=o.Ki.insert(p.targetId,p),o.Ns.updateTargetData(u,p).next(()=>o.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>o.Os.saveNamedQuery(u,e))})}),zT.apply(this,arguments)}function $A(n,e){return`firestore_clients_${n}_${e}`}function HA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function WT(n,e){return`firestore_targets_${n}_${e}`}class EE{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static er(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ne(o.error.code,o.error.message))),l?new EE(e,t,o.state,u):(Nn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class v_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ne(r.error.code,r.error.message))),u?new v_(e,r.state,o):(Nn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Tc();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=Ug(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new DE(e,u):(Nn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qT{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qT(t.clientId,t.onlineState):(Nn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KT{constructor(){this.activeTargetIds=Tc()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZT{constructor(e,t,r,o,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new yr(Ft),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=$A(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new KT),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Si();for(const o of t){if(o===e.rr)continue;const u=e.getItem($A(e.persistenceKey,o));if(u){const l=DE.er(o,u);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const o=e.Ir(r);o&&e.Tr(o)}for(const o of e.hr)e.cr(o);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(WT(this.persistenceKey,e));if(r){const o=v_.er(e,r);o&&(t=o.state)}}return this.br.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(WT(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Rr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const o=t.Sr(r.key);return t.Dr(o,null)}{const o=t.Cr(r.key,r.newValue);if(o)return t.Dr(o.clientId,o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const o=t.Or(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.gr){if(null!==r.newValue){const o=t.Ir(r.newValue);if(o)return t.Tr(o)}}else if(r.key===t.dr){const o=function(u){let l=Es.at;if(null!=u)try{const p=JSON.parse(u);mt("number"==typeof p),l=p}catch(p){Nn("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);o!==Es.at&&t.sequenceNumberHandler(o)}else if(r.key===t.yr){const o=t.Fr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.$r(u)))}}else t.hr.push(r)}))}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,t,r){const o=new EE(this.currentUser,e,t,r),u=HA(this.persistenceKey,this.currentUser,e);this.setItem(u,o.nr())}Rr(e){const t=HA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const o=WT(this.persistenceKey,e),u=new v_(e,t,r);this.setItem(o,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return DE.er(r,t)}Nr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return EE.er(new Yr(void 0!==r[2]?r[2]:null),o,t)}Or(e,t){const r=this.mr.exec(e),o=Number(r[1]);return v_.er(o,t)}Ir(e){return qT.er(e)}Fr(e){return JSON.parse(e)}kr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Er(this.ar),u=this.Er(r),l=[],p=[];return u.forEach(_=>{o.has(_)||l.push(_)}),o.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.qr(l,p).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=Tc();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class GA{constructor(){this.Ur=new KT,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new KT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eR{Gr(e){}shutdown(){}}class zA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nR{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class rR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,o,u){const l=this.fo(e,t);Oe("RestConnection","Sending: ",l,r);const p={};return this._o(p,o,u),this.wo(e,l,p,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw au("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}mo(e,t,r,o,u,l){return this.lo(e,t,r,o,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}fo(e,t){return`${this.co}/v1/${t}:${tR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,o){return new Promise((u,l)=>{const p=new qb;p.setWithCredentials(!0),p.listenOnce(WS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Nv.NO_ERROR:const b=p.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Nv.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),l(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Nv.HTTP_ERROR:const S=p.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){let O=p.getResponseJson();Array.isArray(O)&&(O=O[0]);const z=O?.error;if(z&&z.status&&z.message){const te=function(ue){const Fe=ue.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Fe)>=0?Fe:ce.UNKNOWN}(z.status);l(new Ne(te,z.message))}else l(new Ne(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else l(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);p.send(t,"POST",_,r,15)})}yo(e,t,r){const o=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fI(),l=Gb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new Wb({})),this._o(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=o.join("");Oe("Connection","Creating WebChannel: "+_,p);const b=u.createWebChannel(_,p);let S=!1,O=!1;const z=new nR({Yr:ue=>{O?Oe("Connection","Not sending because WebChannel is closed:",ue):(S||(Oe("Connection","Opening WebChannel transport."),b.open(),S=!0),Oe("Connection","WebChannel sending:",ue),b.send(ue))},Zr:()=>b.close()}),te=(ue,Fe,He)=>{ue.listen(Fe,Zt=>{try{He(Zt)}catch(Qt){setTimeout(()=>{throw Qt},0)}})};return te(b,Rg.EventType.OPEN,()=>{O||Oe("Connection","WebChannel transport opened.")}),te(b,Rg.EventType.CLOSE,()=>{O||(O=!0,Oe("Connection","WebChannel transport closed"),z.oo())}),te(b,Rg.EventType.ERROR,ue=>{O||(O=!0,au("Connection","WebChannel transport errored:",ue),z.oo(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),te(b,Rg.EventType.MESSAGE,ue=>{var Fe;if(!O){const He=ue.data[0];mt(!!He);const Qt=He.error||(null===(Fe=He[0])||void 0===Fe?void 0:Fe.error);if(Qt){Oe("Connection","WebChannel received error:",Qt);const zt=Qt.status;let Wt=function(Jt){const fi=kr[Jt];if(void 0!==fi)return pT(fi)}(zt),Bt=Qt.message;void 0===Wt&&(Wt=ce.INTERNAL,Bt="Unknown error status: "+zt+" with message "+Qt.message),O=!0,z.oo(new Ne(Wt,Bt)),b.close()}else Oe("Connection","WebChannel received:",He),z.uo(He)}}),te(l,zb.STAT_EVENT,ue=>{ue.stat===pI.PROXY?Oe("Connection","Detected buffering proxy"):ue.stat===pI.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{z.ro()},0),z}}function WA(){return typeof window<"u"?window:null}function bE(){return typeof document<"u"?document:null}function __(n){return new _T(n,!0)}class YT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=o,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,o,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class qA{constructor(e,t,r,o,u,l,p,_){this.Ys=e,this.So=r,this.Do=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new YT(e,t)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return(0,ge.Z)(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,ge.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Nn(t.toString()),Nn("Using maximum backoff delay to prevent overloading the backend."),r.ko.bo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Co===t&&this.jo(r,o)},r=>{e(()=>{const o=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(o)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(o=>{r(()=>this.zo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Fo(){var e=this;this.state=5,this.ko.vo((0,ge.Z)(function*(){e.state=0,e.start()}))}zo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iR extends qA{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function JS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),o=e.targetChange.targetIds||[],u=function(_,b){return _.yt?(mt(void 0===b||"string"==typeof b),or.fromBase64String(b||"")):(mt(void 0===b||b instanceof Uint8Array),or.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(_){const b=void 0===_.code?ce.UNKNOWN:pT(_.code);return new Ne(b,_.message||"")}(l);t=new u_(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=Oo(n,r.document.name),u=Mr(r.document.updateTime),l=r.document.createTime?Mr(r.document.createTime):vt.min(),p=new li({mapValue:{fields:r.document.fields}}),_=Pn.newFoundDocument(o,u,l,p);t=new a_(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=Oo(n,r.document),u=r.readTime?Mr(r.readTime):vt.min(),l=Pn.newNoDocument(o,u);t=new a_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Oo(n,r.document);t=new a_([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ut();{const r=e.filter,u=new hT(r.count||0);t=new yT(r.targetId,u)}}var _;return t}(this.Tt,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Mr(u.readTime):vt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=yf(this.Tt),t.addTarget=function(o,u){let l;const p=u.target;return l=uf(p)?{documents:DT(o,p)}:{query:lE(o,p)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=c_(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(l.readTime=td(o,u.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function eA(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=yf(this.Tt),t.removeTarget=e,this.qo(t)}}class sR extends qA{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function ET(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,o){let u=Mr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Mr(o)),new YI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.eu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=yf(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tm(this.Tt,r))};this.qo(t)}}class oR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=o,this.iu=!1}ru(){if(this.iu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.lo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(ce.UNKNOWN,o.toString())})}mo(e,t,r,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.mo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class uR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Nn(t),this.cu=!1):Oe("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class cR{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var _;Cc(l)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ge.Z)(function*(b){const S=Ye(b);S.mu.add(4),yield om(S),S.pu.set("Unknown"),S.mu.delete(4),yield w_(S)}),function(b){return _.apply(this,arguments)})(l))}))}),this.pu=new uR(r,o)}}function w_(n){return XT.apply(this,arguments)}function XT(){return XT=(0,ge.Z)(function*(n){if(Cc(n))for(const e of n.gu)yield e(!0)}),XT.apply(this,arguments)}function om(n){return JT.apply(this,arguments)}function JT(){return JT=(0,ge.Z)(function*(n){for(const e of n.gu)yield e(!1)}),JT.apply(this,arguments)}function TE(n,e){const t=Ye(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),nC(t)?tC(t):um(t).Mo()&&eC(t,e))}function I_(n,e){const t=Ye(n),r=um(t);t.wu.delete(e),r.Mo()&&KA(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Cc(t)&&t.pu.set("Unknown"))}function eC(n,e){n.Iu.Ft(e.targetId),um(n).Jo(e)}function KA(n,e){n.Iu.Ft(e),um(n).Yo(e)}function tC(n){n.Iu=new vT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),um(n).start(),n.pu.au()}function nC(n){return Cc(n)&&!um(n).Oo()&&n.wu.size>0}function Cc(n){return 0===Ye(n).mu.size}function ZA(n){n.Iu=void 0}function lR(n){return rC.apply(this,arguments)}function rC(){return rC=(0,ge.Z)(function*(n){n.wu.forEach((e,t)=>{eC(n,e)})}),rC.apply(this,arguments)}function dR(n,e){return iC.apply(this,arguments)}function iC(){return iC=(0,ge.Z)(function*(n,e){ZA(n),nC(n)?(n.pu.fu(e),tC(n)):n.pu.set("Unknown")}),iC.apply(this,arguments)}function hR(n,e,t){return sC.apply(this,arguments)}function sC(){return sC=(0,ge.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof u_&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const l=u.cause;for(const p of u.targetIds)o.wu.has(p)&&(yield o.remoteSyncer.rejectListen(p,l),o.wu.delete(p),o.Iu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield CE(n,r)}else if(e instanceof a_?n.Iu.Qt(e):e instanceof yT?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(vt.min()))try{const r=yield FA(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Iu.ee(u);return l.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.wu.get(_);b&&o.wu.set(_,b.withResumeToken(p.resumeToken,u))}}),l.targetMismatches.forEach(p=>{const _=o.wu.get(p);if(!_)return;o.wu.set(p,_.withResumeToken(or.EMPTY_BYTE_STRING,_.snapshotVersion)),KA(o,p);const b=new nd(_.target,p,1,_.sequenceNumber);eC(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield CE(n,r)}var r}),sC.apply(this,arguments)}function CE(n,e,t){return oC.apply(this,arguments)}function oC(){return oC=(0,ge.Z)(function*(n,e,t){if(!Ea(e))throw e;n.mu.add(1),yield om(n),n.pu.set("Offline"),t||(t=()=>FA(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield w_(n)}))}),oC.apply(this,arguments)}function YA(n,e){return e().catch(t=>CE(n,t,e))}function am(n){return aC.apply(this,arguments)}function aC(){return aC=(0,ge.Z)(function*(n){const e=Ye(n),t=od(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;fR(e);)try{const o=yield QM(e.localStore,r);if(null===o){0===e._u.length&&t.Bo();break}r=o.batchId,pR(e,o)}catch(o){yield CE(e,o)}QA(e)&&XA(e)}),aC.apply(this,arguments)}function fR(n){return Cc(n)&&n._u.length<10}function pR(n,e){n._u.push(e);const t=od(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function QA(n){return Cc(n)&&!od(n).Oo()&&n._u.length>0}function XA(n){od(n).start()}function gR(n){return uC.apply(this,arguments)}function uC(){return uC=(0,ge.Z)(function*(n){od(n).su()}),uC.apply(this,arguments)}function mR(n){return cC.apply(this,arguments)}function cC(){return cC=(0,ge.Z)(function*(n){const e=od(n);for(const t of n._u)e.tu(t.mutations)}),cC.apply(this,arguments)}function yR(n,e,t){return lC.apply(this,arguments)}function lC(){return lC=(0,ge.Z)(function*(n,e,t){const r=n._u.shift(),o=AT.from(r,e,t);yield YA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield am(n)}),lC.apply(this,arguments)}function vR(n,e){return dC.apply(this,arguments)}function dC(){return dC=(0,ge.Z)(function*(n,e){var t;e&&od(n).Xo&&(yield(t=(0,ge.Z)(function*(r,o){if(fT(u=o.code)&&u!==ce.ABORTED){const l=r._u.shift();od(r).$o(),yield YA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield am(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),QA(n)&&XA(n)}),dC.apply(this,arguments)}function JA(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,ge.Z)(function*(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Cc(t);t.mu.add(3),yield om(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield w_(t)}),hC.apply(this,arguments)}function fC(n,e){return pC.apply(this,arguments)}function pC(){return pC=(0,ge.Z)(function*(n,e){const t=Ye(n);e?(t.mu.delete(2),yield w_(t)):e||(t.mu.add(2),yield om(t),t.pu.set("Unknown"))}),pC.apply(this,arguments)}function um(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ye(e);return o.ru(),new iR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:lR.bind(null,n),no:dR.bind(null,n),Ho:hR.bind(null,n)}),n.gu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.$o(),nC(n)?tC(n):n.pu.set("Unknown")):(yield n.Tu.stop(),ZA(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function od(n){return n.Eu||(n.Eu=function(e,t,r){const o=Ye(e);return o.ru(),new sR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:gR.bind(null,n),no:vR.bind(null,n),nu:mR.bind(null,n),eu:yR.bind(null,n)}),n.gu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Eu.$o(),yield am(n)):(yield n.Eu.stop(),n._u.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class gC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,p=new gC(e,t,l,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cm(n,e){if(Nn("AsyncQueue",`${e}: ${n}`),Ea(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class lm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=gf(),this.sortedSet=new yr(this.comparator)}static emptySet(e){return new lm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new lm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ex{constructor(){this.Au=new yr(qe.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):ut():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class dm{constructor(e,t,r,o,u,l,p,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new dm(e,t,lm.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class _R{constructor(){this.bu=void 0,this.listeners=[]}}class wR{constructor(){this.queries=new Dc(e=>Kv(e),df),this.onlineState="Unknown",this.vu=new Set}}function mC(n,e){return yC.apply(this,arguments)}function yC(){return yC=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new _R),o)try{u.bu=yield t.onListen(r)}catch(l){const p=cm(l,`Initialization of query '${qg(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.bu&&e.Vu(u.bu)&&wC(t)}),yC.apply(this,arguments)}function vC(n,e){return _C.apply(this,arguments)}function _C(){return _C=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),_C.apply(this,arguments)}function IR(n,e){const t=Ye(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const p of l.listeners)p.Vu(o)&&(r=!0);l.bu=o}}r&&wC(t)}function ER(n,e,t){const r=Ye(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function wC(n){n.vu.forEach(e=>{e.next()})}class IC{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new dm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.Ou||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class DR{constructor(e,t){this.Mu=e,this.byteLength=t}Fu(){return"metadata"in this.Mu}}class tx{constructor(e){this.Tt=e}Zi(e){return Oo(this.Tt,e)}Xi(e){return e.metadata.exists?IT(this.Tt,e.document,!1):Pn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Mr(e)}}class bR{constructor(e,t,r){this.$u=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nx(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=cn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new tx(this.Tt);for(const o of e)if(o.metadata.queries){const u=r.Zi(o.metadata.name);for(const l of o.metadata.queries){const p=(t.get(l)||Vt()).add(u);t.set(l,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function XM(n,e,t,r){return GT.apply(this,arguments)}(e.localStore,new tx(e.Tt),e.documents,e.$u.id),r=e.Lu(e.documents);for(const o of e.queries)yield JM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function nx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rx{constructor(e){this.key=e}}class ix{constructor(e){this.key=e}}class sx{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Vt(),this.mutatedKeys=Vt(),this.ju=WI(e),this.zu=new lm(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new ex,o=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,p=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,O)=>{const z=o.get(S),te=hf(this.query,O)?O:null,ue=!!z&&this.mutatedKeys.has(z.key),Fe=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let He=!1;z&&te?z.data.isEqual(te.data)?ue!==Fe&&(r.track({type:3,doc:te}),He=!0):this.Yu(z,te)||(r.track({type:2,doc:te}),He=!0,(_&&this.ju(te,_)>0||b&&this.ju(te,b)<0)&&(p=!0)):!z&&te?(r.track({type:0,doc:te}),He=!0):z&&!te&&(r.track({type:1,doc:z}),He=!0,(_||b)&&(p=!0)),He&&(te?(l=l.add(te),u=Fe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{zu:l,Ju:r,Li:p,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((b,S)=>function(O,z){const te=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return te(O)-te(z)}(b.type,S.type)||this.ju(b.doc,S.doc)),this.Zu(r);const l=t?this.Xu():[],p=0===this.Qu.size&&this.current?1:0,_=p!==this.Gu;return this.Gu=p,0!==u.length||_?{snapshot:new dm(this.query,e.zu,o,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new ex,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Vt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new ix(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new rx(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Vt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return dm.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class TR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class CR{constructor(e){this.key=e,this.ic=!1}}class SR{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new Dc(p=>Kv(p),df),this.uc=new Map,this.cc=new Set,this.ac=new yr(qe.comparator),this.hc=new Map,this.lc=new FT,this.fc={},this.dc=new Map,this._c=Df.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function AR(n,e){return EC.apply(this,arguments)}function EC(){return EC=(0,ge.Z)(function*(n,e){const t=zC(n);let r,o;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.sc();else{const l=yield im(t.localStore,di(e));t.isPrimaryClient&&TE(t.remoteStore,l);const p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield DC(t,e,r,"current"===p,l.resumeToken)}return o}),EC.apply(this,arguments)}function DC(n,e,t,r,o){return bC.apply(this,arguments)}function bC(){return bC=(0,ge.Z)(function*(n,e,t,r,o){n.mc=(O,z,te)=>{return(ue=(0,ge.Z)(function*(Fe,He,Zt,Qt){let zt=He.view.Hu(Zt);zt.Li&&(zt=yield IE(Fe.localStore,He.query,!1).then(({documents:Jt})=>He.view.Hu(Jt,zt)));const Wt=Qt&&Qt.targetChanges.get(He.targetId),Bt=He.view.applyChanges(zt,Fe.isPrimaryClient,Wt);return OC(Fe,He.targetId,Bt.tc),Bt.snapshot}),function(Fe,He,Zt,Qt){return ue.apply(this,arguments)})(n,O,z,te);var ue};const u=yield IE(n.localStore,e,!0),l=new sx(e,u.Yi),p=l.Hu(u.documents),_=Xg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(p,n.isPrimaryClient,_);OC(n,t,b.tc);const S=new TR(e,t,l);return n.oc.set(e,S),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),b.snapshot}),bC.apply(this,arguments)}function xR(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,ge.Z)(function*(n,e){const t=Ye(n),r=t.oc.get(e),o=t.uc.get(r.targetId);if(o.length>1)return t.uc.set(r.targetId,o.filter(u=>!df(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),I_(t.remoteStore,r.targetId),hm(t,r.targetId)}).catch(uu))):(hm(t,r.targetId),yield sm(t.localStore,r.targetId,!0))}),TC.apply(this,arguments)}function CC(){return CC=(0,ge.Z)(function*(n,e,t){const r=WC(n);try{const o=yield function(u,l){const p=Ye(u),_=bn.now(),b=l.reduce((z,te)=>z.add(te.key),Vt());let S,O;return p.persistence.runTransaction("Locally write mutations","readwrite",z=>{let te=hi(),ue=Vt();return p.ji.getEntries(z,b).next(Fe=>{te=Fe,te.forEach((He,Zt)=>{Zt.isValidDocument()||(ue=ue.add(He))})}).next(()=>p.localDocuments.getOverlayedDocuments(z,te)).next(Fe=>{S=Fe;const He=[];for(const Zt of l){const Qt=QI(Zt,S.get(Zt.key).overlayedDocument);null!=Qt&&He.push(new gu(Zt.key,Qt,$I(Qt.value.mapValue),On.exists(!0)))}return p.mutationQueue.addMutationBatch(z,_,He,l)}).next(Fe=>{O=Fe;const He=Fe.applyToLocalDocumentSet(S,ue);return p.documentOverlayCache.saveOverlays(z,Fe.batchId,He)})}).then(()=>({batchId:O.batchId,changes:r_(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,p){let _=u.fc[u.currentUser.toKey()];_||(_=new yr(Ft)),_=_.insert(l,p),u.fc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield Sc(r,o.changes),yield am(r.remoteStore)}catch(o){const u=cm(o,"Failed to persist write");t.reject(u)}}),CC.apply(this,arguments)}function ox(n,e){return SC.apply(this,arguments)}function SC(){return SC=(0,ge.Z)(function*(n,e){const t=Ye(n);try{const r=yield function YM(n,e){const t=Ye(n),r=e.snapshotVersion;let o=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});o=t.Ki;const p=[];e.targetChanges.forEach((S,O)=>{const z=o.get(O);if(!z)return;p.push(t.Ns.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Ns.addMatchingKeys(u,S.addedDocuments,O)));let te=z.withSequenceNumber(u.currentSequenceNumber);var ue,Fe,He;e.targetMismatches.has(O)?te=te.withResumeToken(or.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):S.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(S.resumeToken,r)),o=o.insert(O,te),Fe=te,He=S,(0===(ue=z).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-ue.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&p.push(t.Ns.updateTargetData(u,te))});let _=hi(),b=Vt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),p.push(UA(u,l,e.documentUpdates).next(S=>{_=S.Hi,b=S.Ji})),!r.isEqual(vt.min())){const S=t.Ns.getLastRemoteSnapshotVersion(u).next(O=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(S)}return oe.waitFor(p).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.Ki=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.hc.get(u);l&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.ic=!0:o.modifiedDocuments.size>0?mt(l.ic):o.removedDocuments.size>0&&(mt(l.ic),l.ic=!1))}),yield Sc(t,r,e)}catch(r){yield uu(r)}}),SC.apply(this,arguments)}function ax(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.oc.forEach((u,l)=>{const p=l.view.Pu(e);p.snapshot&&o.push(p.snapshot)}),function(u,l){const p=Ye(u);p.onlineState=l;let _=!1;p.queries.forEach((b,S)=>{for(const O of S.listeners)O.Pu(l)&&(_=!0)}),_&&wC(p)}(r.eventManager,e),o.length&&r.rc.Ho(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RR(n,e,t){return AC.apply(this,arguments)}function AC(){return AC=(0,ge.Z)(function*(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.hc.get(e),u=o&&o.key;if(u){let l=new yr(qe.comparator);l=l.insert(u,Pn.newNoDocument(u,vt.min()));const p=Vt().add(u),_=new Qg(vt.min(),new Map,new mn(Ft),l,p);yield ox(r,_),r.ac=r.ac.remove(u),r.hc.delete(e),kC(r)}else yield sm(r.localStore,e,!1).then(()=>hm(r,e,t)).catch(uu)}),AC.apply(this,arguments)}function NR(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,ge.Z)(function*(n,e){const t=Ye(n),r=e.batch.batchId;try{const o=yield function ZM(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,p,_,b){const S=_.batch,O=S.keys();let z=oe.resolve();return O.forEach(te=>{z=z.next(()=>b.getEntry(p,te)).next(ue=>{const Fe=_.docVersions.get(te);mt(null!==Fe),ue.version.compareTo(Fe)<0&&(S.applyToRemoteDocument(ue,_),ue.isValidDocument()&&(ue.setReadTime(_.commitVersion),b.addEntry(ue)))})}),z.next(()=>l.mutationQueue.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let p=Vt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(p=p.add(l.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);PC(t,r,null),NC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sc(t,o)}catch(o){yield uu(o)}}),xC.apply(this,arguments)}function PR(n,e,t){return MC.apply(this,arguments)}function MC(){return MC=(0,ge.Z)(function*(n,e,t){const r=Ye(n);try{const o=yield function(u,l){const p=Ye(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return p.mutationQueue.lookupMutationBatch(_,l).next(S=>(mt(null!==S),b=S.keys(),p.mutationQueue.removeMutationBatch(_,S))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,b,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>p.localDocuments.getDocuments(_,b))})}(r.localStore,e);PC(r,e,t),NC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(r,o)}catch(o){yield uu(o)}}),MC.apply(this,arguments)}function RC(){return RC=(0,ge.Z)(function*(n,e){const t=Ye(n);Cc(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ye(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.dc.get(r)||[];o.push(e),t.dc.set(r,o)}catch(r){const o=cm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),RC.apply(this,arguments)}function NC(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function PC(n,e,t){const r=Ye(n);let o=r.fc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.fc[r.currentUser.toKey()]=o}}function hm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||ux(n,r)})}function ux(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(I_(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),kC(n))}function OC(n,e,t){for(const r of t)r instanceof rx?(n.lc.addReference(r.key,e),kR(n,r)):r instanceof ix?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||ux(n,r.key)):ut()}function kR(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.cc.add(r),kC(n))}function kC(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new qe(cn.fromString(e)),r=n._c.next();n.hc.set(r,new CR(t)),n.ac=n.ac.insert(t,r),TE(n.remoteStore,new nd(di(cf(t.path)),r,2,Es.at))}}function Sc(n,e,t){return LC.apply(this,arguments)}function LC(){return LC=(0,ge.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[],l=[];var p;r.oc.isEmpty()||(r.oc.forEach((p,_)=>{l.push(r.mc(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const S=jT.Ni(_.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.rc.Ho(o),yield(p=(0,ge.Z)(function*(_,b){const S=Ye(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>oe.forEach(b,z=>oe.forEach(z.Ci,te=>S.persistence.referenceDelegate.addReference(O,z.targetId,te)).next(()=>oe.forEach(z.xi,te=>S.persistence.referenceDelegate.removeReference(O,z.targetId,te)))))}catch(O){if(!Ea(O))throw O;Oe("LocalStore","Failed to update sequence numbers: "+O)}for(const O of b){const z=O.targetId;if(!O.fromCache){const te=S.Ki.get(z),Fe=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);S.Ki=S.Ki.insert(z,Fe)}}}),function(_,b){return p.apply(this,arguments)})(r.localStore,u))}),LC.apply(this,arguments)}function LR(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,ge.Z)(function*(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield LA(t.localStore,e);t.currentUser=e,(o=t).dc.forEach(l=>{l.forEach(p=>{p.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sc(t,r.Wi)}var o}),FC.apply(this,arguments)}function FR(n,e){const t=Ye(n),r=t.hc.get(e);if(r&&r.ic)return Vt().add(r.key);{let o=Vt();const u=t.uc.get(e);if(!u)return o;for(const l of u){const p=t.oc.get(l);o=o.unionWith(p.view.Wu)}return o}}function UR(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,ge.Z)(function*(n,e){const t=Ye(n),r=yield IE(t.localStore,e.query,!0),o=e.view.nc(r);return t.isPrimaryClient&&OC(t,e.targetId,o.tc),o}),UC.apply(this,arguments)}function VR(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ge.Z)(function*(n,e){const t=Ye(n);return BA(t.localStore,e).then(r=>Sc(t,r))}),VC.apply(this,arguments)}function BR(n,e,t,r){return BC.apply(this,arguments)}function BC(){return BC=(0,ge.Z)(function*(n,e,t,r){const o=Ye(n),u=yield function(l,p){const _=Ye(l),b=Ye(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.An(S,p).next(O=>O?_.localDocuments.getDocuments(S,O):oe.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield am(o.remoteStore):"acknowledged"===t||"rejected"===t?(PC(o,e,r||null),NC(o,e),p=e,Ye(Ye(o.localStore).mutationQueue).bn(p)):ut(),yield Sc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),BC.apply(this,arguments)}function jC(){return jC=(0,ge.Z)(function*(n,e){const t=Ye(n);if(zC(t),WC(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield cx(t,r.toArray());t.wc=!0,yield fC(t.remoteStore,!0);for(const u of o)TE(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let o=Promise.resolve();t.uc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(hm(t,l),sm(t.localStore,l,!0))),I_(t.remoteStore,l)}),yield o,yield cx(t,r),function(u){const l=Ye(u);l.hc.forEach((p,_)=>{I_(l.remoteStore,_)}),l.lc._s(),l.hc=new Map,l.ac=new yr(qe.comparator)}(t),t.wc=!1,yield fC(t.remoteStore,!1)}}),jC.apply(this,arguments)}function cx(n,e,t){return $C.apply(this,arguments)}function $C(){return $C=(0,ge.Z)(function*(n,e,t){const r=Ye(n),o=[],u=[];for(const l of e){let p;const _=r.uc.get(l);if(_&&0!==_.length){p=yield im(r.localStore,di(_[0]));for(const b of _){const S=r.oc.get(b),O=yield UR(r,S);O.snapshot&&u.push(O.snapshot)}}else{const b=yield VA(r.localStore,l);p=yield im(r.localStore,b),yield DC(r,lx(b),l,!1,p.resumeToken)}o.push(p)}return r.rc.Ho(u),o}),$C.apply(this,arguments)}function lx(n){return zI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $R(n){const e=Ye(n);return Ye(Ye(e.localStore).persistence).Si()}function HR(n,e,t,r){return HC.apply(this,arguments)}function HC(){return HC=(0,ge.Z)(function*(n,e,t,r){const o=Ye(n);if(o.wc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield BA(o.localStore,Zv(u[0])),p=Qg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,or.EMPTY_BYTE_STRING);yield Sc(o,l,p);break}case"rejected":yield sm(o.localStore,e,!0),hm(o,e,r);break;default:ut()}}),HC.apply(this,arguments)}function GR(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=(0,ge.Z)(function*(n,e,t){const r=zC(n);if(r.wc){for(const o of e){if(r.uc.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield VA(r.localStore,o),l=yield im(r.localStore,u);yield DC(r,lx(u),l.targetId,!1,l.resumeToken),TE(r.remoteStore,l)}for(const o of t)r.uc.has(o)&&(yield sm(r.localStore,o,!1).then(()=>{I_(r.remoteStore,o),hm(r,o)}).catch(uu))}}),GC.apply(this,arguments)}function zC(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RR.bind(null,e),e.rc.Ho=IR.bind(null,e.eventManager),e.rc.gc=ER.bind(null,e.eventManager),e}function WC(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PR.bind(null,e),e}class dx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.Tt=__(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return kA(this.persistence,new OA,e.initialUser,this.Tt)}Tc(e){return new NA(_E.qs,this.Tt)}Ic(e){return new GA}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hx extends dx{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield WC(r.bc.syncEngine),yield am(r.bc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return kA(this.persistence,new OA,e.initialUser,this.Tt)}Ac(e,t){return new OM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new KS(t,this.persistence);return new eT(e.asyncQueue,r)}Tc(e){const t=BT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ts.withCacheSize(this.cacheSizeBytes):Ts.DEFAULT;return new VT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WA(),bE(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new GA}}class WR extends hx{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.bc.syncEngine;r.sharedClientState instanceof ZT&&(r.sharedClientState.syncEngine={Br:BR.bind(null,o),Lr:HR.bind(null,o),qr:GR.bind(null,o),Si:$R.bind(null,o),$r:VR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,ge.Z)(function*(l){yield function jR(n,e){return jC.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}Ic(e){const t=WA();if(!ZT.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ZT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class qC{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ax(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=LR.bind(null,r.syncEngine),yield fC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wR}createDatastore(e){const t=__(e.databaseInfo.databaseId),r=new rR(e.databaseInfo);return new oR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>ax(this.syncEngine,p,0),l=zA.C()?new zA:new eR,new cR(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,p,_,b){const S=new SR(r,o,u,l,p,_);return b&&(S.wc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=Ye(t);Oe("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield om(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fx(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class SE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Nn("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qR{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Or,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),o=Number(r);isNaN(o)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(o);return new DR(JSON.parse(u),t.length+o)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,ge.Z)(function*(){for(;e.kc()<0&&!(yield e.Oc()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Oc())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}Oc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class KR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(u,l){const p=Ye(u),_=yf(p.Tt)+"/documents",b={documents:l.map(te=>mf(p.Tt,te))},S=yield p.mo("BatchGetDocuments",_,b,l.length),O=new Map;S.forEach(te=>{const ue=function XS(n,e){return"found"in e?function(t,r){mt(!!r.found);const o=Oo(t,r.found.name),u=Mr(r.found.updateTime),l=r.found.createTime?Mr(r.found.createTime):vt.min(),p=new li({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(o,u,l,p)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const o=Oo(t,r.missing),u=Mr(r.readTime);return Pn.newNoDocument(o,u)}(n,e):ut()}(p.Tt,te);O.set(ue.key.toString(),ue)});const z=[];return l.forEach(te=>{const ue=O.get(te.toString());mt(!!ue),z.push(ue)}),z}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ed(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new n_(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(o,u){const l=Ye(o),p=yf(l.Tt)+"/documents",_={writes:u.map(b=>tm(l.Tt,b))};yield l.lo("Commit",p,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?On.exists(!1):On.updateTime(t):On.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return On.updateTime(t)}return On.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new YT(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){var e=this;this.ko.vo((0,ge.Z)(function*(){const t=new KR(e.datastore),r=e.$c(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Bc(u)}))}).catch(o=>{e.Bc(o)})}))}$c(e){try{const t=this.updateFunction(e);return!ef(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fT(t)}return!1}}class YR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Yr.UNAUTHENTICATED,this.clientId=$l.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(p){Oe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Oe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=cm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function px(n,e){return KC.apply(this,arguments)}function KC(){return KC=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield LA(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),KC.apply(this,arguments)}function gx(n,e){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield YC(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>JA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>JA(e.remoteStore,u)),n.onlineComponents=e}),ZC.apply(this,arguments)}function YC(n){return QC.apply(this,arguments)}function QC(){return QC=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield px(n,new dx)),n.offlineComponents}),QC.apply(this,arguments)}function AE(n){return XC.apply(this,arguments)}function XC(){return XC=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield gx(n,new qC)),n.onlineComponents}),XC.apply(this,arguments)}function mx(n){return YC(n).then(e=>e.persistence)}function xE(n){return YC(n).then(e=>e.localStore)}function JC(n){return AE(n).then(e=>e.remoteStore)}function eS(n){return AE(n).then(e=>e.syncEngine)}function fm(n){return tS.apply(this,arguments)}function tS(){return tS=(0,ge.Z)(function*(n){const e=yield AE(n),t=e.eventManager;return t.onListen=AR.bind(null,e.syncEngine),t.onUnlisten=xR.bind(null,e.syncEngine),t}),tS.apply(this,arguments)}function vx(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,p,_){const b=new SE({next:O=>{u.enqueueAndForget(()=>vC(o,S));const z=O.docs.has(l);!z&&O.fromCache?_.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&O.fromCache&&p&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(O)},error:O=>_.reject(O)}),S=new IC(cf(l.path),b,{includeMetadataChanges:!0,Ou:!0});return mC(o,S)}(yield fm(n),n.asyncQueue,e,t,r)})),r.promise}function _x(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,l,p,_){const b=new SE({next:O=>{u.enqueueAndForget(()=>vC(o,S)),O.fromCache&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(O)},error:O=>_.reject(O)}),S=new IC(l,b,{includeMetadataChanges:!0,Ou:!0});return mC(o,S)}(yield fm(n),n.asyncQueue,e,t,r)})),r.promise}const wx=new Map;function nS(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ix(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ex(n){if(!qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dx(n){if(qe.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ME(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ME(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bx(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Tx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ix("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zb;switch(t.type){case"gapi":return new Xb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wx.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),wx.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class Oi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class mu extends Oi{constructor(e,t,r){super(e,t,cf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new qe(e))}withConverter(e){return new mu(this.firestore,e,this._path)}}function Sx(n,e,...t){if(n=(0,nn.m9)(n),nS("collection","path",e),n instanceof E_){const r=cn.fromString(e,...t);return Dx(r),new mu(n,null,r)}{if(!(n instanceof Qn||n instanceof mu))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return Dx(r),new mu(n.firestore,null,r)}}function RE(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=$l.R()),nS("doc","path",e),n instanceof E_){const r=cn.fromString(e,...t);return Ex(r),new Qn(n,null,new qe(r))}{if(!(n instanceof Qn||n instanceof mu))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return Ex(r),new Qn(n.firestore,n instanceof mu?n.converter:null,new qe(r))}}function Ax(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof Qn||n instanceof mu)&&(e instanceof Qn||e instanceof mu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof Oi&&e instanceof Oi&&n.firestore===e.firestore&&df(n._query,e._query)&&n.converter===e.converter}class sN{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new YT(this,"async_queue_retry"),this.Hc=()=>{const t=bE();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=bE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=bE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Or;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Ea(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Nn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const o=gC.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(o),o}Jc(){this.Qc&&ut()}verifyOperationInProgress(){}ta(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function iS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class oN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends E_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new sN,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||xx(this),this._firestoreClient.terminate()}}function Lr(n){return n._firestoreClient||xx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function xx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new tT(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new YR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Mx(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield px(n,t),yield gx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ce.FAILED_PRECONDITION||l.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;au("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Rx(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yu(or.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yu(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tf{constructor(e){this._methodName=e}}class NE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const yN=/^__.*__$/;class vN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new gu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jl(e,this.data,t,this.fieldTransforms)}}class Nx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Px(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class PE{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new PE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.aa(e),o}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.ia(),o}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return LE(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Px(this.ra)&&yN.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class _N{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||__(e)}wa(e,t,r,o=!1){return new PE({ra:e,methodName:t,_a:r,path:Zn.emptyPath(),ca:!1,da:o},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Cf(n){const e=n._freezeSettings(),t=__(n._databaseId);return new _N(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OE(n,e,t,r,o,u={}){const l=n.wa(u.merge||u.mergeFields?2:0,e,t,o);uS("Data must be an object, but it was:",l,r);const p=Lx(r,l);let _,b;if(u.merge)_=new is(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const z=T_(e,O,t);if(!l.contains(z))throw new Ne(ce.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Ux(S,z)||S.push(z)}_=new is(S),b=l.fieldTransforms.filter(O=>_.covers(O.field))}else _=null,b=l.fieldTransforms;return new vN(new li(p),_,b)}class b_ extends Tf{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b_}}function Ox(n,e,t){return new PE({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class sS extends Tf{_toFieldTransform(e){return new Zg(e.path,new Xl)}isEqual(e){return e instanceof sS}}class wN extends Tf{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this.ma.map(u=>Sf(u,t)),o=new Ic(r);return new Zg(e.path,o)}isEqual(e){return this===e}}class IN extends Tf{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this.ma.map(u=>Sf(u,t)),o=new fu(r);return new Zg(e.path,o)}isEqual(e){return this===e}}class EN extends Tf{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new Ec(e.Tt,Kg(e.Tt,this.ga));return new Zg(e.path,t)}isEqual(e){return this===e}}function oS(n,e,t,r){const o=n.wa(1,e,t);uS("Data must be an object, but it was:",o,r);const u=[],l=li.empty();cu(r,(_,b)=>{const S=kE(e,_,t);b=(0,nn.m9)(b);const O=o.ha(S);if(b instanceof b_)u.push(S);else{const z=Sf(b,O);null!=z&&(u.push(S),l.set(S,z))}});const p=new is(u);return new Nx(l,p,o.fieldTransforms)}function aS(n,e,t,r,o,u){const l=n.wa(1,e,t),p=[T_(e,r,t)],_=[o];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)p.push(T_(e,u[z])),_.push(u[z+1]);const b=[],S=li.empty();for(let z=p.length-1;z>=0;--z)if(!Ux(b,p[z])){const te=p[z];let ue=_[z];ue=(0,nn.m9)(ue);const Fe=l.ha(te);if(ue instanceof b_)b.push(te);else{const He=Sf(ue,Fe);null!=He&&(b.push(te),S.set(te,He))}}const O=new is(b);return new Nx(S,O,l.fieldTransforms)}function kx(n,e,t,r=!1){return Sf(t,n.wa(r?4:3,e))}function Sf(n,e){if(Fx(n=(0,nn.m9)(n)))return uS("Unsupported field value:",e,n),Lx(n,e);if(n instanceof Tf)return function(t,r){if(!Px(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let p=Sf(l,r.la(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kg(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=bn.fromDate(t);return{timestampValue:td(r.Tt,o)}}if(t instanceof bn){const o=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:td(r.Tt,o)}}if(t instanceof NE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yu)return{bytesValue:c_(r.Tt,t._byteString)};if(t instanceof Qn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${ME(t)}`)}(n,e)}function Lx(n,e){const t={};return CI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(n,(r,o)=>{const u=Sf(o,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Fx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof NE||n instanceof yu||n instanceof Qn||n instanceof Tf)}function uS(n,e,t){if(!Fx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ME(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function T_(n,e,t){if((e=(0,nn.m9)(e))instanceof Ac)return e._internalPath;if("string"==typeof e)return kE(n,e);throw LE("Field path arguments must be of type string or ",n,!1,void 0,t)}const DN=new RegExp("[~\\*/\\[\\]]");function kE(n,e,t){if(e.search(DN)>=0)throw LE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ac(...e.split("."))._internalPath}catch{throw LE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LE(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${o}`),_+=")"),new Ne(ce.INVALID_ARGUMENT,p+n+_)}function Ux(n,e){return n.some(t=>t.isEqual(e))}class C_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bN extends C_{data(){return super.data()}}function FE(n,e){return"string"==typeof e?kE(n,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}function Vx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cS{}class S_ extends cS{}function ad(n,e,...t){let r=[];e instanceof cS&&r.push(e),r=r.concat(t),function(o){const u=o.filter(p=>p instanceof pm).length,l=o.filter(p=>p instanceof A_).length;if(u>1||u>0&&l>0)throw new Ne(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class A_ extends S_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new A_(e,t,r)}_apply(e){const t=this._parse(e);return Hx(e._query,t),new Oi(e.firestore,e.converter,Wg(e._query,t))}_parse(e){const t=Cf(e.firestore);return function(o,u,l,p,_,b,S){let O;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){$x(S,b);const z=[];for(const te of S)z.push(jx(p,o,te));O={arrayValue:{values:z}}}else O=jx(p,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||$x(S,b),O=kx(l,"where",S,"in"===b||"not-in"===b);return on.create(_,b,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class pm extends cS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:In.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const p of l)Hx(u,p),u=Wg(u,p)}(e._query,t),new Oi(e.firestore,e.converter,Wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class lS extends S_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lS(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new vc(o,u);return function(p,_){if(null===Wv(p)){const b=Ql(p);null!==b&&Gx(0,b,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Zs(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class UE extends S_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new UE(e,t,r)}_apply(e){return new Oi(e.firestore,e.converter,lf(e._query,this._limit,this._limitType))}}class VE extends S_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new VE(e,t,r)}_apply(e){const t=Bx(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(o=t,new Zs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BE extends S_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new BE(e,t,r)}_apply(e){const t=Bx(e,this.type,this._docOrFields,this._inclusive);return new Oi(e.firestore,e.converter,(o=t,new Zs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Bx(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof C_)return function(o,u,l,p,_){if(!p)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of wc(o))if(S.field.isKeyField())b.push(du(u,p.key));else{const O=p.data.field(S.field);if(Vg(O))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const z=S.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}b.push(O)}return new hu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Cf(n.firestore);return function(u,l,p,_,b,S){const O=u.explicitOrderBy;if(b.length>O.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let te=0;te<b.length;te++){const ue=b[te];if(O[te].field.isKeyField()){if("string"!=typeof ue)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ue}`);if(!qv(u)&&-1!==ue.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ue}' contains a slash.`);const Fe=u.path.child(cn.fromString(ue));if(!qe.isDocumentKey(Fe))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const He=new qe(Fe);z.push(du(l,He))}else{const Fe=kx(p,_,ue);z.push(Fe)}}return new hu(z,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function jx(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!qe.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return du(n,new qe(r))}if(t instanceof Qn)return du(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ME(t)}.`)}function $x(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hx(n,e){if(e.isInequality()){const r=Ql(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Wv(n);null!==u&&Gx(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Gx(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dS{convertValue(e,t="none"){switch(Wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return cu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new NE(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yc(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nf(e));default:return null}}convertTimestamp(e){const t=gc(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);mt(y(r));const o=new No(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||Nn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function jE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PN extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class Af{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xc extends C_{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new x_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class x_ extends xc{data(e={}){return super.data(e)}}class ud{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Af(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new x_(this._firestore,this._userDataWriter,r.key,r,new Af(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new x_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Af(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const p=new x_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Af(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:kN(l.type),doc:p,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function Wx(n,e){return n instanceof xc&&e instanceof xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ud&&e instanceof ud&&n._firestore===e._firestore&&rS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cd extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function qx(n,e,t){n=ln(n,Qn);const r=ln(n.firestore,Xn),o=jE(n.converter,e,t);return gm(r,[OE(Cf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,On.none())])}function Kx(n,e,t,...r){n=ln(n,Qn);const o=ln(n.firestore,Xn),u=Cf(o);let l;return l="string"==typeof(e=(0,nn.m9)(e))||e instanceof Ac?aS(u,"updateDoc",n._key,e,t,r):oS(u,"updateDoc",n._key,e),gm(o,[l.toMutation(n._key,On.exists(!0))])}function Zx(n,...e){var t,r,o;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||iS(e[l])||(u=e[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges};if(iS(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let _,b,S;if(n instanceof Qn)b=ln(n.firestore,Xn),S=cf(n._key.path),_={next:O=>{e[l]&&e[l](hS(b,n,O))},error:e[l+1],complete:e[l+2]};else{const O=ln(n,Oi);b=ln(O.firestore,Xn),S=O._query;const z=new cd(b);_={next:te=>{e[l]&&e[l](new ud(b,z,O,te))},error:e[l+1],complete:e[l+2]},Vx(n._query)}return function(O,z,te,ue){const Fe=new SE(ue),He=new IC(z,Fe,te);return O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return mC(yield fm(O),He)})),()=>{Fe.Pc(),O.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return vC(yield fm(O),He)}))}}(Lr(b),S,p,_)}function gm(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function MR(n,e,t){return CC.apply(this,arguments)}(yield eS(t),r,o)})),o.promise}(Lr(n),e)}function hS(n,e,t){const r=t.docs.get(e._key),o=new cd(n);return new xc(n,o,e._key,r,new Af(t.hasPendingWrites,t.fromCache),e.converter)}const WN={maxAttempts:5};class Yx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cf(e)}set(e,t,r){this._verifyNotCommitted();const o=ld(e,this._firestore),u=jE(o.converter,t,r),l=OE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,On.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ld(e,this._firestore);let l;return l="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ac?aS(this._dataReader,"WriteBatch.update",u._key,t,r,o):oS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,On.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ld(e,this._firestore);return this._mutations=this._mutations.concat(new ed(t._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ld(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cf(e)}get(e){const t=ld(e,this._firestore),r=new PN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ut();const u=o[0];if(u.isFoundDocument())return new C_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new C_(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const o=ld(e,this._firestore),u=jE(o.converter,t,r),l=OE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=ld(e,this._firestore);let l;return l="string"==typeof(t=(0,nn.m9)(t))||t instanceof Ac?aS(this._dataReader,"Transaction.update",u._key,t,r,o):oS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=ld(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ld(e,this._firestore),r=new cd(this._firestore);return super.get(e).then(o=>new xc(this._firestore,r,t._key,o._document,new Af(!1,!1),t.converter))}}!function(n,e=!0){jl=_o.SDK_VERSION,(0,_o._registerComponent)(new $u.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Xn(new Qb(t.getProvider("auth-internal")),new Ro(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(p.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,_o.registerVersion)(gI,"3.8.4",n),(0,_o.registerVersion)(gI,"3.8.4","esm2017")}();function fS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Xx(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function Jx(){if(!function AI(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}class M_{constructor(e){this._delegate=e}static fromBase64String(e){return Jx(),new M_(yu.fromBase64String(e))}static fromUint8Array(e){return Xx(),new M_(yu.fromUint8Array(e))}toBase64(){return Jx(),this._delegate.toBase64()}toUint8Array(){return Xx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pS(n){return function nP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rP{enableIndexedDbPersistence(e,t){return function uN(n,e){Rx(n=ln(n,Xn));const t=Lr(n),r=n._freezeSettings(),o=new qC;return Mx(t,o,new hx(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function cN(n){Rx(n=ln(n,Xn));const e=Lr(n),t=n._freezeSettings(),r=new qC;return Mx(e,r,new WR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lN(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Is.C())return Promise.resolve();const o=r+"main";yield Is.delete(o)}),function(r){return t.apply(this,arguments)})(BT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof No||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Cx(n,e,t,r={}){var o;const u=(n=ln(n,E_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&au("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,p;if("string"==typeof r.mockUserToken)l=r.mockUserToken,p=Yr.MOCK_USER;else{l=(0,nn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Yr(_)}n._authCredentials=new Yb(new yI(l,p))}}(this._delegate,e,t,r)}enableNetwork(){return function hN(n){return function QR(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield mx(n),t=yield JC(n);return e.setNetworkEnabled(!0),function(r){const o=Ye(r);return o.mu.delete(0),w_(o)}(t)}))}(Lr(n=ln(n,Xn)))}(this._delegate)}disableNetwork(){return function fN(n){return function XR(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield mx(n),t=yield JC(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const u=Ye(o);u.mu.add(0),yield om(u),u.pu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Lr(n=ln(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ix("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dN(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function OR(n,e){return RC.apply(this,arguments)}(yield eS(e),t)})),t.promise}(Lr(n=ln(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function GN(n,e){return function tN(n,e){const t=new SE(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield fm(n),o=t,Ye(r).vu.add(o),void o.next();var r,o})),()=>{t.Pc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield fm(n),o=t,void Ye(r).vu.delete(o);var r,o}))}}(Lr(n=ln(n,Xn)),iS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mm(this,Sx(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ko(this,RE(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function iN(n,e){if(n=ln(n,E_),nS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oi(n,null,(t=e,new Zs(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KN(n,e,t){n=ln(n,Xn);const r=Object.assign(Object.assign({},WN),t);return function(o){if(o.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const p=new Or;return o.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const _=yield function yx(n){return AE(n).then(e=>e.datastore)}(o);new ZR(o.asyncQueue,_,l,u,p).run()})),p.promise}(Lr(n),o=>e(new qN(n,o)),r)}(this._delegate,t=>e(new tM(this,t)))}batch(){return Lr(this._delegate),new nM(new Yx(this._delegate,e=>gm(this._delegate,e)))}loadBundle(e){return function pN(n,e){const t=Lr(n=ln(n,Xn)),r=new oN;return function nN(n,e,t,r){const o=function(u,l){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return fx(_,b);if(_ instanceof ArrayBuffer)return fx(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new qR(_,l);var _}(t,__(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function zR(n,e,t){const r=Ye(n);var o;(o=(0,ge.Z)(function*(u,l,p){try{const _=yield l.getMetadata();if(yield function(z,te){const ue=Ye(z),Fe=Mr(te.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",He=>ue.Os.getBundleMetadata(He,te.id)).then(He=>!!He&&He.createTime.compareTo(Fe)>=0)}(u.localStore,_))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(z=_).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);p._updateProgress(nx(_));const b=new bR(_,u.localStore,l.Tt);let S=yield l.yc();for(;S;){const z=yield b.Bu(S);z&&p._updateProgress(z),S=yield l.yc()}const O=yield b.complete();return yield Sc(u,O.Uu,void 0),yield function(z,te){const ue=Ye(z);return ue.persistence.runTransaction("Save bundle","readwrite",Fe=>ue.Os.saveBundleMetadata(Fe,te))}(u.localStore,_),p._completeWith(O.progress),Promise.resolve(O.qu)}catch(_){return au("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var z}),function(u,l,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield eS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gN(n,e){return function rN(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=Ye(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Os.getNamedQuery(u,r))}(yield xE(n),e)}))}(Lr(n=ln(n,Xn)),e).then(t=>t?new Oi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class $E extends dS{constructor(e){super(),this.firestore=e}convertBytes(e){return new M_(new yu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ko.forKey(t,this.firestore,null)}}class tM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}get(e){const t=Mf(e);return this._delegate.get(t).then(r=>new R_(this._firestore,new xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Mf(e);return r?(fS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mf(e);return this._delegate.delete(t),this}}class nM{constructor(e){this._delegate=e}set(e,t,r){const o=Mf(e);return r?(fS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new x_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new xf(e,new $E(e),t),o.set(t,u)),u}}xf.INSTANCES=new WeakMap;class ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ko(t,new Qn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new ko(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mm(this.firestore,Sx(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof Qn&&Ax(this._delegate,e)}set(e,t){t=fS("DocumentReference.set",t);try{return t?qx(this._delegate,e,t):qx(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Kx(this._delegate,e):Kx(this._delegate,e,t,...r)}catch(o){throw os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function $N(n){return gm(ln(n.firestore,Xn),[new ed(n._key,On.none())])}(this._delegate)}onSnapshot(...e){const t=rM(e),r=iM(e,o=>new R_(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Zx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function FN(n){n=ln(n,Qn);const e=ln(n.firestore,Xn),t=Lr(e),r=new cd(e);return function JR(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const p=yield function(_,b){const S=Ye(_);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,b))}(o,u);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=cm(p,`Failed to get document '${u} from cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield xE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new xc(e,r,n._key,o,new Af(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function UN(n){n=ln(n,Qn);const e=ln(n.firestore,Xn);return vx(Lr(e),n._key,{source:"server"}).then(t=>hS(e,n,t))}(this._delegate):function LN(n){n=ln(n,Qn);const e=ln(n.firestore,Xn);return vx(Lr(e),n._key).then(t=>hS(e,n,t))}(this._delegate),t.then(r=>new R_(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ko(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function rM(n){for(const e of n)if("object"==typeof e&&!pS(e))return e;return{}}function iM(n,e){var t,r;let o;return o=pS(n[0])?n[0]:pS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class R_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Wx(this._delegate,e._delegate)}}class N_ extends R_{data(e){const t=this._delegate.data(e);return function mI(n,e){n||ut()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $E(e)}where(e,t,r){try{return new as(this.firestore,ad(this._delegate,function TN(n,e,t){const r=e,o=FE("where",n);return A_._create(o,r,t)}(e,t,r)))}catch(o){throw os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,ad(this._delegate,function CN(n,e="asc"){const t=e,r=FE("orderBy",n);return lS._create(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,ad(this._delegate,function SN(n){return bx("limit",n),UE._create("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,ad(this._delegate,function AN(n){return bx("limitToLast",n),UE._create("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,ad(this._delegate,function xN(...n){return VE._create("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,ad(this._delegate,function MN(...n){return VE._create("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,ad(this._delegate,function RN(...n){return BE._create("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,ad(this._delegate,function NN(...n){return BE._create("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return rS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function BN(n){n=ln(n,Oi);const e=ln(n.firestore,Xn),t=Lr(e),r=new cd(e);return function eN(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,l){try{const p=yield IE(o,u,!0),_=new sx(u,p.Yi),b=_.Hu(p.documents),S=_.applyChanges(b,!1);l.resolve(S.snapshot)}catch(p){const _=cm(p,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield xE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new ud(e,r,n,o))}(this._delegate):"server"===e?.source?function jN(n){n=ln(n,Oi);const e=ln(n.firestore,Xn),t=Lr(e),r=new cd(e);return _x(t,n._query,{source:"server"}).then(o=>new ud(e,r,n,o))}(this._delegate):function VN(n){n=ln(n,Oi);const e=ln(n.firestore,Xn),t=Lr(e),r=new cd(e);return Vx(n._query),_x(t,n._query).then(o=>new ud(e,r,n,o))}(this._delegate),t.then(r=>new gS(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rM(e),r=iM(e,o=>new gS(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Zx(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}class sP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N_(this._firestore,r))})}isEqual(e){return Wx(this._delegate,e._delegate)}}class mm extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ko(this.firestore,e):null}doc(e){try{return new ko(this.firestore,void 0===e?RE(this._delegate):RE(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function HN(n,e){const t=ln(n.firestore,Xn),r=RE(n),o=jE(n.converter,e);return gm(t,[OE(Cf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ko(this.firestore,t))}isEqual(e){return Ax(this._delegate,e._delegate)}withConverter(e){return new mm(this.firestore,this._delegate.withConverter(e?xf.getInstance(this.firestore,e):null))}}function Mf(n){return ln(n,Qn)}class mS{constructor(...e){this._delegate=new Ac(...e)}static documentId(){return new mS(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof Ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class Rf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YN(){return new sS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Rf(e)}static delete(){const e=function ZN(){return new b_("deleteField")}();return e._methodName="FieldValue.delete",new Rf(e)}static arrayUnion(...e){const t=function QN(...n){return new wN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Rf(t)}static arrayRemove(...e){const t=function XN(...n){return new IN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Rf(t)}static increment(e){const t=function JN(n){return new EN("increment",n)}(e);return t._methodName="FieldValue.increment",new Rf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oP={Firestore:eM,GeoPoint:NE,Timestamp:bn,Blob:M_,Transaction:tM,WriteBatch:nM,DocumentReference:ko,DocumentSnapshot:R_,Query:as,QueryDocumentSnapshot:N_,QuerySnapshot:gS,CollectionReference:mm,FieldPath:mS,FieldValue:Rf,setLogLevel:function iP(n){!function Kb(n){ou.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sM(n,e){return function cP(n,e=ww.z){return new ms.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function yS(n,e){return sM(n,e).pipe((0,A.U)(t=>({payload:t,type:"query"})))}function HE(n,e){return yS(n,e).pipe(_p(void 0),qp(),(0,A.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const _=o.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),u}))}function oM(n,e,t){return HE(n,t).pipe(da((r,o)=>function dP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Iw(n,e=js.y){return n=n??Ew,(0,Hn.e)((t,r)=>{let o,u=!0;t.subscribe((0,D.x)(r,l=>{const p=e(l);(u||!n(o,p))&&(u=!1,o=p,r.next(l))}))})}(),(0,A.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function vS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function aM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uP(n){(function aP(n,e){n.INTERNAL.registerComponent(new $u.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},oP)))})(n,(e,t)=>new eM(e,t,new rP)),n.registerVersion("@firebase/firestore-compat","0.3.4")}(tu.Z);class uM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=HE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,A.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(_p(void 0),qp(),rt(([r,o])=>o.length>0||!r),(0,A.U)(([r,o])=>o),Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aM(e);return oM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return yS(this.query,this.afs.schedulers.outsideAngular).pipe((0,A.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ar.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(Ar.iC)}add(e){return this.ref.add(e)}doc(e){return new cM(this.ref.doc(e),this.afs)}}class cM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=lM(r,t);return new uM(o,u,this.afs)}snapshotChanges(){return function lP(n,e){return sM(n,e).pipe(_p(void 0),qp(),(0,A.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,A.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,an.D)(this.ref.get(e)).pipe(Ar.iC)}}class fP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HE(this.query,this.afs.schedulers.outsideAngular).pipe((0,A.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rt(t=>t.length>0),Ar.iC):HE(this.query,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aM(e);return oM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return yS(this.query,this.afs.schedulers.outsideAngular).pipe((0,A.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Ar.iC)}get(e){return(0,an.D)(this.query.get(e)).pipe(Ar.iC)}}const pP=new m.OlP("angularfire2.enableFirestorePersistence"),gP=new m.OlP("angularfire2.firestore.persistenceSettings"),mP=new m.OlP("angularfire2.firestore.settings"),yP=new m.OlP("angularfire2.firestore.use-emulator");function lM(n,e=(t=>t)){return{query:e(n),ref:n}}let vP=(()=>{class n{constructor(t,r,o,u,l,p,_,b,S,O,z,te,ue,Fe,He,Zt,Qt){this.schedulers=_;const zt=(0,zr.on)(t,p,r),Wt=S;O&&al(zt,p,z,ue,Fe,He,te,Zt),[this.firestore,this.persistenceEnabled$]=(0,zr.cc)(`${zt.name}.firestore`,"AngularFirestore",zt.name,()=>{const Bt=p.runOutsideAngular(()=>zt.firestore());if(u&&Bt.settings(u),Wt&&Bt.useEmulator(...Wt),o&&!Oc(l)){const Jt=()=>{try{return(0,an.D)(Bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(fi){return typeof console<"u"&&console.warn(fi),gt(!1)}};return[Bt,p.runOutsideAngular(Jt)]}return[Bt,gt(!1)]},[u,Wt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=lM(o,r),p=this.schedulers.ngZone.run(()=>u);return new uM(p,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new fP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new cM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(zr.Dh),m.LFG(zr.xv,8),m.LFG(pP,8),m.LFG(mP,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ar.HU),m.LFG(gP,8),m.LFG(yP,8),m.LFG(Zd,8),m.LFG(a0,8),m.LFG(u0,8),m.LFG(c0,8),m.LFG(l0,8),m.LFG(mp,8),m.LFG(Io,8),m.LFG(pp,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Lo{constructor(e,t,r,o){this.afs=e,this.afAuth=t,this.router=r,this.ngZone=o,this.afAuth.authState.subscribe(u=>{u?(this.userData=u,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(o=>{o&&this.router.navigate(["dashboard"])})}).catch(r=>{window.alert(r.message)})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new _w.Q).then(e=>{this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.router.navigate(["dashboard"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}function _P(n,e){if(1&n&&(m.TgZ(0,"div",2)(1,"div",3)(2,"div",4),m._UZ(3,"img",5),m.TgZ(4,"div",6)(5,"h1"),m._uU(6,"Hello: "),m.TgZ(7,"strong"),m._uU(8),m.qZA()(),m.TgZ(9,"p"),m._uU(10,"User ID: "),m.TgZ(11,"strong"),m._uU(12),m.qZA()(),m.TgZ(13,"p"),m._uU(14,"Email: "),m.TgZ(15,"strong"),m._uU(16),m.qZA()(),m.TgZ(17,"p"),m._uU(18,"Email Verified: "),m.TgZ(19,"strong"),m._uU(20),m.qZA()()()()()()),2&n){const t=e.ngIf;m.xp6(3),m.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",m.LSH),m.s9C("alt",t.displayName),m.xp6(5),m.Oqu(t.displayName?t.displayName:"User"),m.xp6(4),m.Oqu(t.uid),m.xp6(4),m.Oqu(t.email),m.xp6(4),m.Oqu(t.emailVerified)}}Lo.\u0275fac=function(e){return new(e||Lo)(m.LFG(vP),m.LFG(Zd),m.LFG(xr),m.LFG(m.R0b))},Lo.\u0275prov=m.Yz7({token:Lo,factory:Lo.\u0275fac,providedIn:"root"});class P_{constructor(e){this.authService=e}}P_.\u0275fac=function(e){return new(e||P_)(m.Y36(Lo))},P_.\u0275cmp=m.Xpm({type:P_,selectors:[["app-dashboard"]],decls:3,vars:1,consts:[["class","row",4,"ngIf"],["href","",3,"click"],[1,"row"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(e,t){1&e&&(m.YNc(0,_P,21,6,"div",0),m.TgZ(1,"a",1),m.NdJ("click",function(){return t.authService.SignOut()}),m._uU(2," Log out "),m.qZA()),2&e&&m.Q6J("ngIf",t.authService.userData)},dependencies:[Fi]});class O_{constructor(e){this.authService=e}}O_.\u0275fac=function(e){return new(e||O_)(m.Y36(Lo))},O_.\u0275cmp=m.Xpm({type:O_,selectors:[["app-forgot-password"]],decls:13,vars:0,consts:[[1,"container","d-flex","flex-column","min-vh-100","min-vw-100"],[1,"d-flex","flex-grow-1","justify-content-center","align-items-center"],[1,""],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","Email","aria-label","Email","aria-describedby","basic-addon1",1,"form-control"],["passwordResetEmail",""],["type","button","value","Send verification email",1,"btn","btn-primary",2,"margin-right","10px",3,"click"],[1,"mx-3","text-primary"],["routerLink","/sign-in",1,"redirect"]],template:function(e,t){if(1&e){const r=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m._uU(5,"@"),m.qZA(),m._UZ(6,"input",5,6),m.qZA(),m.TgZ(8,"input",7),m.NdJ("click",function(){m.CHM(r);const u=m.MAs(7);return m.KtG(t.authService.ForgotPassword(u.value))}),m.qZA(),m.TgZ(9,"span",8),m._uU(10,"Go back? "),m.TgZ(11,"a",9),m._uU(12," Sign In"),m.qZA()()()()()}},dependencies:[Ws]});class k_{constructor(e){this.authService=e}}k_.\u0275fac=function(e){return new(e||k_)(m.Y36(Lo))},k_.\u0275cmp=m.Xpm({type:k_,selectors:[["app-sign-in"]],decls:21,vars:0,consts:[[1,"container","d-flex","flex-column","min-vh-100","min-vw-100"],[1,"d-flex","flex-grow-1","justify-content-center","align-items-center"],[1,""],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","Email","aria-label","Email","aria-describedby","basic-addon1",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","aria-label","Password","aria-describedby","basic-addon2",1,"form-control"],["userPassword",""],["type","button","value","Log in",1,"btn","btn-primary",2,"margin-right","10px",3,"click"],["type","button","value","Google",1,"btn","btn-outline-primary",3,"click"],["routerLink","/forgot-password",1,"mx-3","text-primary"],[1,"mx-3","text-primary"],["routerLink","/register-user",1,"redirect"]],template:function(e,t){if(1&e){const r=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m._uU(5,"@"),m.qZA(),m._UZ(6,"input",5,6),m.qZA(),m.TgZ(8,"div",3)(9,"span",4),m._uU(10,"**"),m.qZA(),m._UZ(11,"input",7,8),m.qZA(),m.TgZ(13,"input",9),m.NdJ("click",function(){m.CHM(r);const u=m.MAs(7),l=m.MAs(12);return m.KtG(t.authService.SignIn(u.value,l.value))}),m.qZA(),m.TgZ(14,"input",10),m.NdJ("click",function(){return t.authService.GoogleAuth()}),m.qZA(),m.TgZ(15,"a",11),m._uU(16,"Forgot Password?"),m.qZA(),m.TgZ(17,"span",12),m._uU(18,"Don't have an account? "),m.TgZ(19,"a",13),m._uU(20," Sign Up"),m.qZA()()()()()}},dependencies:[Ws]});class L_{constructor(e){this.authService=e}}function wP(n,e){if(1&n&&(m.TgZ(0,"p"),m._uU(1,"We have sent a confirmation email to "),m.TgZ(2,"strong",5),m._uU(3),m.qZA(),m._uU(4,". "),m._UZ(5,"br"),m._uU(6," Please check your email and click on the link to verfiy your email address."),m.qZA()),2&n){const t=e.ngIf;m.xp6(3),m.Oqu(t.email)}}L_.\u0275fac=function(e){return new(e||L_)(m.Y36(Lo))},L_.\u0275cmp=m.Xpm({type:L_,selectors:[["app-sign-up"]],decls:19,vars:0,consts:[[1,"container","d-flex","flex-column","min-vh-100","min-vw-100"],[1,"d-flex","flex-grow-1","justify-content-center","align-items-center"],[1,""],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","Email","aria-label","Email","aria-describedby","basic-addon1",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","aria-label","Password","aria-describedby","basic-addon2",1,"form-control"],["userPassword",""],["type","button","value","Log in",1,"btn","btn-primary",2,"margin-right","10px",3,"click"],["type","button","value","Google",1,"btn","btn-outline-primary",3,"click"],[1,"mx-3","text-primary"],["routerLink","/sign-in",1,"redirect"]],template:function(e,t){if(1&e){const r=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),m._uU(5,"@"),m.qZA(),m._UZ(6,"input",5,6),m.qZA(),m.TgZ(8,"div",3)(9,"span",4),m._uU(10,"**"),m.qZA(),m._UZ(11,"input",7,8),m.qZA(),m.TgZ(13,"input",9),m.NdJ("click",function(){m.CHM(r);const u=m.MAs(7),l=m.MAs(12);return m.KtG(t.authService.SignUp(u.value,l.value))}),m.qZA(),m.TgZ(14,"input",10),m.NdJ("click",function(){return t.authService.GoogleAuth()}),m.qZA(),m.TgZ(15,"span",11),m._uU(16,"Already have an account?"),m.TgZ(17,"a",12),m._uU(18," Sign In"),m.qZA()()()()()}},dependencies:[Ws]});class F_{constructor(e){this.authService=e}}F_.\u0275fac=function(e){return new(e||F_)(m.Y36(Lo))},F_.\u0275cmp=m.Xpm({type:F_,selectors:[["app-verify-email"]],decls:8,vars:1,consts:[[1,"container","d-flex","flex-column","min-vh-100","min-vw-100"],[1,"d-flex","flex-grow-1","justify-content-center","align-items-center"],[1,"mb-3"],[4,"ngIf"],["type","button","value","Resend verification email",1,"btn","btn-primary",2,"margin-right","10px",3,"click"],[1,"text-primary"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"h2"),m._uU(5,"Thank You for Registering"),m.qZA(),m.YNc(6,wP,7,1,"p",3),m.qZA(),m.TgZ(7,"input",4),m.NdJ("click",function(){return t.authService.SendVerificationMail()}),m.qZA()()()()),2&e&&(m.xp6(6),m.Q6J("ngIf",t.authService.userData))},dependencies:[Fi]});class ym{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}ym.\u0275fac=function(e){return new(e||ym)(m.LFG(Lo),m.LFG(xr))},ym.\u0275prov=m.Yz7({token:ym,factory:ym.\u0275fac,providedIn:"root"});const IP=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:k_},{path:"register-user",component:L_},{path:"dashboard",component:P_,canActivate:[ym]},{path:"forgot-password",component:O_},{path:"verify-email-address",component:F_}];class vm{}vm.\u0275fac=function(e){return new(e||vm)},vm.\u0275mod=m.oAB({type:vm}),vm.\u0275inj=m.cJS({imports:[yw.forRoot(IP),yw]});class U_{constructor(){this.title="app"}}U_.\u0275fac=function(e){return new(e||U_)},U_.\u0275cmp=m.Xpm({type:U_,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&m._UZ(0,"router-outlet")},dependencies:[ly]});class _m{}_m.\u0275fac=function(e){return new(e||_m)},_m.\u0275mod=m.oAB({type:_m,bootstrap:[U_]}),_m.\u0275inj=m.cJS({providers:[Lo],imports:[na,vm,zr.hO.initializeApp({apiKey:"AIzaSyD3gqXqQl_H2yxOzrVuodvQ-7L-KqX6LTE",authDomain:"my-web-projects-23cad.firebaseapp.com",projectId:"my-web-projects-23cad",storageBucket:"my-web-projects-23cad.appspot.com",messagingSenderId:"1064493500050",appId:"1:1064493500050:web:b592b7f6b03f33ee94884b"}),d0,zr.hO]}),Wf().bootstrapModule(_m).catch(n=>console.error(n))},9751:(pt,be,F)=>{F.d(be,{y:()=>ae});var m=F(2961),B=F(727),N=F(8822),J=F(9635),ne=F(2416),ie=F(576),fe=F(2806);let ae=(()=>{class q{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ge=new q;return Ge.source=this,Ge.operator=Te,Ge}subscribe(Te,Ge,ot){const pe=function G(q){return q&&q instanceof m.Lv||function H(q){return q&&(0,ie.m)(q.next)&&(0,ie.m)(q.error)&&(0,ie.m)(q.complete)}(q)&&(0,B.Nn)(q)}(Te)?Te:new m.Hp(Te,Ge,ot);return(0,fe.x)(()=>{const{operator:Ee,source:Ie}=this;pe.add(Ee?Ee.call(pe,Ie):Ie?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ge){Te.error(Ge)}}forEach(Te,Ge){return new(Ge=de(Ge))((ot,pe)=>{const Ee=new m.Hp({next:Ie=>{try{Te(Ie)}catch(Re){pe(Re),Ee.unsubscribe()}},error:pe,complete:ot});this.subscribe(Ee)})}_subscribe(Te){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Te)}[N.L](){return this}pipe(...Te){return(0,J.U)(Te)(this)}toPromise(Te){return new(Te=de(Te))((Ge,ot)=>{let pe;this.subscribe(Ee=>pe=Ee,Ee=>ot(Ee),()=>Ge(pe))})}}return q.create=Ue=>new q(Ue),q})();function de(q){var Ue;return null!==(Ue=q??ne.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(pt,be,F)=>{F.d(be,{x:()=>fe});var m=F(9751),B=F(727);const J=(0,F(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=F(8737),ie=F(2806);let fe=(()=>{class de extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const q=new ae(this,this);return q.operator=G,q}_throwIfClosed(){if(this.closed)throw new J}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:q}=this;for(;q.length;)q.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:q,isStopped:Ue,observers:Te}=this;return q||Ue?B.Lc:(this.currentObservers=null,Te.push(G),new B.w0(()=>{this.currentObservers=null,(0,ne.P)(Te,G)}))}_checkFinalizedStatuses(G){const{hasError:q,thrownError:Ue,isStopped:Te}=this;q?G.error(Ue):Te&&G.complete()}asObservable(){const G=new m.y;return G.source=this,G}}return de.create=(H,G)=>new ae(H,G),de})();class ae extends fe{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===q||q.call(G,H)}error(H){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===q||q.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,q;return null!==(q=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==q?q:B.Lc}}},2961:(pt,be,F)=>{F.d(be,{Hp:()=>ot,Lv:()=>q});var m=F(576),B=F(727),N=F(2416),J=F(7849);function ne(){}const ie=de("C",void 0,void 0);function de(Se,xe,De){return{kind:Se,value:xe,error:De}}var H=F(3410),G=F(2806);class q extends B.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,B.Nn)(xe)&&xe.add(this)):this.destination=Re}static create(xe,De,$e){return new ot(xe,De,$e)}next(xe){this.isStopped?Ie(function ae(Se){return de("N",Se,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Ie(function fe(Se){return de("E",void 0,Se)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Ie(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Te(Se,xe){return Ue.call(Se,xe)}class Ge{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:De}=this;if(De.next)try{De.next(xe)}catch($e){pe($e)}}error(xe){const{partialObserver:De}=this;if(De.error)try{De.error(xe)}catch($e){pe($e)}else pe(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(De){pe(De)}}}class ot extends q{constructor(xe,De,$e){let Z;if(super(),(0,m.m)(xe)||!xe)Z={next:xe??void 0,error:De??void 0,complete:$e??void 0};else{let se;this&&N.v.useDeprecatedNextContext?(se=Object.create(xe),se.unsubscribe=()=>this.unsubscribe(),Z={next:xe.next&&Te(xe.next,se),error:xe.error&&Te(xe.error,se),complete:xe.complete&&Te(xe.complete,se)}):Z=xe}this.destination=new Ge(Z)}}function pe(Se){N.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Se):(0,J.h)(Se)}function Ie(Se,xe){const{onStoppedNotification:De}=N.v;De&&H.z.setTimeout(()=>De(Se,xe))}const Re={closed:!0,next:ne,error:function Ee(Se){throw Se},complete:ne}},727:(pt,be,F)=>{F.d(be,{Lc:()=>ie,w0:()=>ne,Nn:()=>fe});var m=F(576);const N=(0,F(3888).d)(de=>function(G){de(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((q,Ue)=>`${Ue+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var J=F(8737);class ne{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Te of G)Te.remove(this);else G.remove(this);const{initialTeardown:q}=this;if((0,m.m)(q))try{q()}catch(Te){H=Te instanceof N?Te.errors:[Te]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Te of Ue)try{ae(Te)}catch(Ge){H=H??[],Ge instanceof N?H=[...H,...Ge.errors]:H.push(Ge)}}if(H)throw new N(H)}}add(H){var G;if(H&&H!==this)if(this.closed)ae(H);else{if(H instanceof ne){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,J.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,J.P)(G,H),H instanceof ne&&H._removeParent(this)}}ne.EMPTY=(()=>{const de=new ne;return de.closed=!0,de})();const ie=ne.EMPTY;function fe(de){return de instanceof ne||de&&"closed"in de&&(0,m.m)(de.remove)&&(0,m.m)(de.add)&&(0,m.m)(de.unsubscribe)}function ae(de){(0,m.m)(de)?de():de.unsubscribe()}},2416:(pt,be,F)=>{F.d(be,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,be,F)=>{F.d(be,{E:()=>B});const B=new(F(9751).y)(ne=>ne.complete())},8996:(pt,be,F)=>{F.d(be,{D:()=>xe});var m=F(8421),B=F(5363),N=F(9468),ie=F(9751),ae=F(2202),de=F(576),H=F(9672);function q(De,$e){if(!De)throw new Error("Iterable cannot be null");return new ie.y(Z=>{(0,H.f)(Z,$e,()=>{const se=De[Symbol.asyncIterator]();(0,H.f)(Z,$e,()=>{se.next().then(ye=>{ye.done?Z.complete():Z.next(ye.value)})},0,!0)})})}var Ue=F(3670),Te=F(8239),Ge=F(1144),ot=F(6495),pe=F(2206),Ee=F(4532),Ie=F(3260);function xe(De,$e){return $e?function Se(De,$e){if(null!=De){if((0,Ue.c)(De))return function J(De,$e){return(0,m.Xf)(De).pipe((0,N.R)($e),(0,B.Q)($e))}(De,$e);if((0,Ge.z)(De))return function fe(De,$e){return new ie.y(Z=>{let se=0;return $e.schedule(function(){se===De.length?Z.complete():(Z.next(De[se++]),Z.closed||this.schedule())})})}(De,$e);if((0,Te.t)(De))return function ne(De,$e){return(0,m.Xf)(De).pipe((0,N.R)($e),(0,B.Q)($e))}(De,$e);if((0,pe.D)(De))return q(De,$e);if((0,ot.T)(De))return function G(De,$e){return new ie.y(Z=>{let se;return(0,H.f)(Z,$e,()=>{se=De[ae.h](),(0,H.f)(Z,$e,()=>{let ye,ze;try{({value:ye,done:ze}=se.next())}catch(je){return void Z.error(je)}ze?Z.complete():Z.next(ye)},0,!0)}),()=>(0,de.m)(se?.return)&&se.return()})}(De,$e);if((0,Ie.L)(De))return function Re(De,$e){return q((0,Ie.Q)(De),$e)}(De,$e)}throw(0,Ee.z)(De)}(De,$e):(0,m.Xf)(De)}},8421:(pt,be,F)=>{F.d(be,{Xf:()=>Ue});var m=F(655),B=F(1144),N=F(8239),J=F(9751),ne=F(3670),ie=F(2206),fe=F(4532),ae=F(6495),de=F(3260),H=F(576),G=F(7849),q=F(8822);function Ue(Se){if(Se instanceof J.y)return Se;if(null!=Se){if((0,ne.c)(Se))return function Te(Se){return new J.y(xe=>{const De=Se[q.L]();if((0,H.m)(De.subscribe))return De.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,B.z)(Se))return function Ge(Se){return new J.y(xe=>{for(let De=0;De<Se.length&&!xe.closed;De++)xe.next(Se[De]);xe.complete()})}(Se);if((0,N.t)(Se))return function ot(Se){return new J.y(xe=>{Se.then(De=>{xe.closed||(xe.next(De),xe.complete())},De=>xe.error(De)).then(null,G.h)})}(Se);if((0,ie.D)(Se))return Ee(Se);if((0,ae.T)(Se))return function pe(Se){return new J.y(xe=>{for(const De of Se)if(xe.next(De),xe.closed)return;xe.complete()})}(Se);if((0,de.L)(Se))return function Ie(Se){return Ee((0,de.Q)(Se))}(Se)}throw(0,fe.z)(Se)}function Ee(Se){return new J.y(xe=>{(function Re(Se,xe){var De,$e,Z,se;return(0,m.mG)(this,void 0,void 0,function*(){try{for(De=(0,m.KL)(Se);!($e=yield De.next()).done;)if(xe.next($e.value),xe.closed)return}catch(ye){Z={error:ye}}finally{try{$e&&!$e.done&&(se=De.return)&&(yield se.call(De))}finally{if(Z)throw Z.error}}xe.complete()})})(Se,xe).catch(De=>xe.error(De))})}},6451:(pt,be,F)=>{F.d(be,{T:()=>ie});var m=F(8189),B=F(8421),N=F(515),J=F(7669),ne=F(8996);function ie(...fe){const ae=(0,J.yG)(fe),de=(0,J._6)(fe,1/0),H=fe;return H.length?1===H.length?(0,B.Xf)(H[0]):(0,m.J)(de)((0,ne.D)(H,ae)):N.E}},5403:(pt,be,F)=>{F.d(be,{x:()=>B});var m=F(2961);function B(J,ne,ie,fe,ae){return new N(J,ne,ie,fe,ae)}class N extends m.Lv{constructor(ne,ie,fe,ae,de,H){super(ne),this.onFinalize=de,this.shouldUnsubscribe=H,this._next=ie?function(G){try{ie(G)}catch(q){ne.error(q)}}:super._next,this._error=ae?function(G){try{ae(G)}catch(q){ne.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(G){ne.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(pt,be,F)=>{F.d(be,{U:()=>N});var m=F(4482),B=F(5403);function N(J,ne){return(0,m.e)((ie,fe)=>{let ae=0;ie.subscribe((0,B.x)(fe,de=>{fe.next(J.call(ne,de,ae++))}))})}},8189:(pt,be,F)=>{F.d(be,{J:()=>N});var m=F(5577),B=F(4671);function N(J=1/0){return(0,m.z)(B.y,J)}},5577:(pt,be,F)=>{F.d(be,{z:()=>ae});var m=F(4004),B=F(8421),N=F(4482),J=F(9672),ne=F(5403),fe=F(576);function ae(de,H,G=1/0){return(0,fe.m)(H)?ae((q,Ue)=>(0,m.U)((Te,Ge)=>H(q,Te,Ue,Ge))((0,B.Xf)(de(q,Ue))),G):("number"==typeof H&&(G=H),(0,N.e)((q,Ue)=>function ie(de,H,G,q,Ue,Te,Ge,ot){const pe=[];let Ee=0,Ie=0,Re=!1;const Se=()=>{Re&&!pe.length&&!Ee&&H.complete()},xe=$e=>Ee<q?De($e):pe.push($e),De=$e=>{Te&&H.next($e),Ee++;let Z=!1;(0,B.Xf)(G($e,Ie++)).subscribe((0,ne.x)(H,se=>{Ue?.(se),Te?xe(se):H.next(se)},()=>{Z=!0},void 0,()=>{if(Z)try{for(Ee--;pe.length&&Ee<q;){const se=pe.shift();Ge?(0,J.f)(H,Ge,()=>De(se)):De(se)}Se()}catch(se){H.error(se)}}))};return de.subscribe((0,ne.x)(H,xe,()=>{Re=!0,Se()})),()=>{ot?.()}}(q,Ue,de,G)))}},5363:(pt,be,F)=>{F.d(be,{Q:()=>J});var m=F(9672),B=F(4482),N=F(5403);function J(ne,ie=0){return(0,B.e)((fe,ae)=>{fe.subscribe((0,N.x)(ae,de=>(0,m.f)(ae,ne,()=>ae.next(de),ie),()=>(0,m.f)(ae,ne,()=>ae.complete(),ie),de=>(0,m.f)(ae,ne,()=>ae.error(de),ie)))})}},3099:(pt,be,F)=>{F.d(be,{B:()=>ne});var m=F(8421),B=F(7579),N=F(2961),J=F(4482);function ne(fe={}){const{connector:ae=(()=>new B.x),resetOnError:de=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=fe;return q=>{let Ue,Te,Ge,ot=0,pe=!1,Ee=!1;const Ie=()=>{Te?.unsubscribe(),Te=void 0},Re=()=>{Ie(),Ue=Ge=void 0,pe=Ee=!1},Se=()=>{const xe=Ue;Re(),xe?.unsubscribe()};return(0,J.e)((xe,De)=>{ot++,!Ee&&!pe&&Ie();const $e=Ge=Ge??ae();De.add(()=>{ot--,0===ot&&!Ee&&!pe&&(Te=ie(Se,G))}),$e.subscribe(De),!Ue&&ot>0&&(Ue=new N.Hp({next:Z=>$e.next(Z),error:Z=>{Ee=!0,Ie(),Te=ie(Re,de,Z),$e.error(Z)},complete:()=>{pe=!0,Ie(),Te=ie(Re,H),$e.complete()}}),(0,m.Xf)(xe).subscribe(Ue))})(q)}}function ie(fe,ae,...de){if(!0===ae)return void fe();if(!1===ae)return;const H=new N.Hp({next:()=>{H.unsubscribe(),fe()}});return(0,m.Xf)(ae(...de)).subscribe(H)}},9468:(pt,be,F)=>{F.d(be,{R:()=>B});var m=F(4482);function B(N,J=0){return(0,m.e)((ne,ie)=>{ie.add(N.schedule(()=>ne.subscribe(ie),J))})}},8505:(pt,be,F)=>{F.d(be,{b:()=>ne});var m=F(576),B=F(4482),N=F(5403),J=F(4671);function ne(ie,fe,ae){const de=(0,m.m)(ie)||fe||ae?{next:ie,error:fe,complete:ae}:ie;return de?(0,B.e)((H,G)=>{var q;null===(q=de.subscribe)||void 0===q||q.call(de);let Ue=!0;H.subscribe((0,N.x)(G,Te=>{var Ge;null===(Ge=de.next)||void 0===Ge||Ge.call(de,Te),G.next(Te)},()=>{var Te;Ue=!1,null===(Te=de.complete)||void 0===Te||Te.call(de),G.complete()},Te=>{var Ge;Ue=!1,null===(Ge=de.error)||void 0===Ge||Ge.call(de,Te),G.error(Te)},()=>{var Te,Ge;Ue&&(null===(Te=de.unsubscribe)||void 0===Te||Te.call(de)),null===(Ge=de.finalize)||void 0===Ge||Ge.call(de)}))}):J.y}},4408:(pt,be,F)=>{F.d(be,{o:()=>ne});var m=F(727);class B extends m.w0{constructor(fe,ae){super()}schedule(fe,ae=0){return this}}const N={setInterval(ie,fe,...ae){const{delegate:de}=N;return de?.setInterval?de.setInterval(ie,fe,...ae):setInterval(ie,fe,...ae)},clearInterval(ie){const{delegate:fe}=N;return(fe?.clearInterval||clearInterval)(ie)},delegate:void 0};var J=F(8737);class ne extends B{constructor(fe,ae){super(fe,ae),this.scheduler=fe,this.work=ae,this.pending=!1}schedule(fe,ae=0){var de;if(this.closed)return this;this.state=fe;const H=this.id,G=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(G,H,ae)),this.pending=!0,this.delay=ae,this.id=null!==(de=this.id)&&void 0!==de?de:this.requestAsyncId(G,this.id,ae),this}requestAsyncId(fe,ae,de=0){return N.setInterval(fe.flush.bind(fe,this),de)}recycleAsyncId(fe,ae,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return ae;null!=ae&&N.clearInterval(ae)}execute(fe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(fe,ae);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,ae){let H,de=!1;try{this.work(fe)}catch(G){de=!0,H=G||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:fe,scheduler:ae}=this,{actions:de}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(de,this),null!=fe&&(this.id=this.recycleAsyncId(ae,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,be,F)=>{F.d(be,{v:()=>N});var m=F(6063);class B{constructor(ne,ie=B.now){this.schedulerActionCtor=ne,this.now=ie}schedule(ne,ie=0,fe){return new this.schedulerActionCtor(this,ne).schedule(fe,ie)}}B.now=m.l.now;class N extends B{constructor(ne,ie=B.now){super(ne,ie),this.actions=[],this._active=!1}flush(ne){const{actions:ie}=this;if(this._active)return void ie.push(ne);let fe;this._active=!0;do{if(fe=ne.execute(ne.state,ne.delay))break}while(ne=ie.shift());if(this._active=!1,fe){for(;ne=ie.shift();)ne.unsubscribe();throw fe}}}},4986:(pt,be,F)=>{F.d(be,{z:()=>N});var m=F(4408);const N=new(F(7565).v)(m.o)},6063:(pt,be,F)=>{F.d(be,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(pt,be,F)=>{F.d(be,{z:()=>m});const m={setTimeout(B,N,...J){const{delegate:ne}=m;return ne?.setTimeout?ne.setTimeout(B,N,...J):setTimeout(B,N,...J)},clearTimeout(B){const{delegate:N}=m;return(N?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(pt,be,F)=>{F.d(be,{h:()=>B});const B=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,be,F)=>{F.d(be,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,be,F)=>{F.d(be,{_6:()=>ie,jO:()=>J,yG:()=>ne});var m=F(576);function N(fe){return fe[fe.length-1]}function J(fe){return(0,m.m)(N(fe))?fe.pop():void 0}function ne(fe){return function B(fe){return fe&&(0,m.m)(fe.schedule)}(N(fe))?fe.pop():void 0}function ie(fe,ae){return"number"==typeof N(fe)?fe.pop():ae}},8737:(pt,be,F)=>{function m(B,N){if(B){const J=B.indexOf(N);0<=J&&B.splice(J,1)}}F.d(be,{P:()=>m})},3888:(pt,be,F)=>{function m(B){const J=B(ne=>{Error.call(ne),ne.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}F.d(be,{d:()=>m})},2806:(pt,be,F)=>{F.d(be,{O:()=>J,x:()=>N});var m=F(2416);let B=null;function N(ne){if(m.v.useDeprecatedSynchronousErrorHandling){const ie=!B;if(ie&&(B={errorThrown:!1,error:null}),ne(),ie){const{errorThrown:fe,error:ae}=B;if(B=null,fe)throw ae}}else ne()}function J(ne){m.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ne)}},9672:(pt,be,F)=>{function m(B,N,J,ne=0,ie=!1){const fe=N.schedule(function(){J(),ie?B.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(B.add(fe),!ie)return fe}F.d(be,{f:()=>m})},4671:(pt,be,F)=>{function m(B){return B}F.d(be,{y:()=>m})},1144:(pt,be,F)=>{F.d(be,{z:()=>m});const m=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(pt,be,F)=>{F.d(be,{D:()=>B});var m=F(576);function B(N){return Symbol.asyncIterator&&(0,m.m)(N?.[Symbol.asyncIterator])}},576:(pt,be,F)=>{function m(B){return"function"==typeof B}F.d(be,{m:()=>m})},3670:(pt,be,F)=>{F.d(be,{c:()=>N});var m=F(8822),B=F(576);function N(J){return(0,B.m)(J[m.L])}},6495:(pt,be,F)=>{F.d(be,{T:()=>N});var m=F(2202),B=F(576);function N(J){return(0,B.m)(J?.[m.h])}},8239:(pt,be,F)=>{F.d(be,{t:()=>B});var m=F(576);function B(N){return(0,m.m)(N?.then)}},3260:(pt,be,F)=>{F.d(be,{L:()=>J,Q:()=>N});var m=F(655),B=F(576);function N(ne){return(0,m.FC)(this,arguments,function*(){const fe=ne.getReader();try{for(;;){const{value:ae,done:de}=yield(0,m.qq)(fe.read());if(de)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(ae)}}finally{fe.releaseLock()}})}function J(ne){return(0,B.m)(ne?.getReader)}},4482:(pt,be,F)=>{F.d(be,{A:()=>B,e:()=>N});var m=F(576);function B(J){return(0,m.m)(J?.lift)}function N(J){return ne=>{if(B(ne))return ne.lift(function(ie){try{return J(ie,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(pt,be,F)=>{F.d(be,{U:()=>N,z:()=>B});var m=F(4671);function B(...J){return N(J)}function N(J){return 0===J.length?m.y:1===J.length?J[0]:function(ie){return J.reduce((fe,ae)=>ae(fe),ie)}}},7849:(pt,be,F)=>{F.d(be,{h:()=>N});var m=F(2416),B=F(3410);function N(J){B.z.setTimeout(()=>{const{onUnhandledError:ne}=m.v;if(!ne)throw J;ne(J)})}},4532:(pt,be,F)=>{function m(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>m})},655:(pt,be,F)=>{function J(re,le){var ve={};for(var Ae in re)Object.prototype.hasOwnProperty.call(re,Ae)&&le.indexOf(Ae)<0&&(ve[Ae]=re[Ae]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(Ae=Object.getOwnPropertySymbols(re);ke<Ae.length;ke++)le.indexOf(Ae[ke])<0&&Object.prototype.propertyIsEnumerable.call(re,Ae[ke])&&(ve[Ae[ke]]=re[Ae[ke]])}return ve}function q(re,le,ve,Ae){return new(ve||(ve=Promise))(function(Le,Je){function Ke(yt){try{_t(Ae.next(yt))}catch(it){Je(it)}}function rn(yt){try{_t(Ae.throw(yt))}catch(it){Je(it)}}function _t(yt){yt.done?Le(yt.value):function ke(Le){return Le instanceof ve?Le:new ve(function(Je){Je(Le)})}(yt.value).then(Ke,rn)}_t((Ae=Ae.apply(re,le||[])).next())})}function Se(re){return this instanceof Se?(this.v=re,this):new Se(re)}function xe(re,le,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,Ae=ve.apply(re,le||[]),Le=[];return ke={},Je("next"),Je("throw"),Je("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function Je(en){Ae[en]&&(ke[en]=function(kn){return new Promise(function(dn,sn){Le.push([en,kn,dn,sn])>1||Ke(en,kn)})})}function Ke(en,kn){try{!function rn(en){en.value instanceof Se?Promise.resolve(en.value.v).then(_t,yt):it(Le[0][2],en)}(Ae[en](kn))}catch(dn){it(Le[0][3],dn)}}function _t(en){Ke("next",en)}function yt(en){Ke("throw",en)}function it(en,kn){en(kn),Le.shift(),Le.length&&Ke(Le[0][0],Le[0][1])}}function $e(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,le=re[Symbol.asyncIterator];return le?le.call(re):(re=function ot(re){var le="function"==typeof Symbol&&Symbol.iterator,ve=le&&re[le],Ae=0;if(ve)return ve.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Ae>=re.length&&(re=void 0),{value:re&&re[Ae++],done:!re}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ve={},Ae("next"),Ae("throw"),Ae("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Ae(Le){ve[Le]=re[Le]&&function(Je){return new Promise(function(Ke,rn){!function ke(Le,Je,Ke,rn){Promise.resolve(rn).then(function(_t){Le({value:_t,done:Ke})},Je)}(Ke,rn,(Je=re[Le](Je)).done,Je.value)})}}}F.d(be,{FC:()=>xe,KL:()=>$e,_T:()=>J,mG:()=>q,qq:()=>Se})},4650:(pt,be,F)=>{F.d(be,{$8M:()=>qa,$WT:()=>Bn,$Z:()=>lh,AFp:()=>VI,AaK:()=>ae,CHM:()=>md,CRH:()=>oe,CZH:()=>Hg,CqO:()=>hb,D6c:()=>uE,EJc:()=>jI,EpF:()=>Ry,F4k:()=>db,FYo:()=>Wm,FiY:()=>Hn,GfV:()=>b0,JOm:()=>Pr,KtG:()=>Lc,LFG:()=>Ve,LSH:()=>yp,Lbi:()=>oT,Lck:()=>Hh,MAs:()=>ga,MMx:()=>Sg,NdJ:()=>pw,OlP:()=>hn,Oqu:()=>tg,P3R:()=>ii,PXZ:()=>Xl,Q6J:()=>bh,QGY:()=>Ny,Qsj:()=>D0,R0b:()=>ss,RDi:()=>r0,Rgc:()=>$l,SBq:()=>Xu,Sil:()=>Pn,Suo:()=>Lg,TTD:()=>no,TgZ:()=>Sy,X6Q:()=>Jl,XFs:()=>st,Xpm:()=>Ys,Xts:()=>Jd,Y36:()=>bo,YKP:()=>bv,YNc:()=>lb,Yjl:()=>Xs,Yz7:()=>it,Z0I:()=>sn,ZZ4:()=>l_,_UZ:()=>Wp,_Vd:()=>dl,_c5:()=>yf,_uU:()=>eg,aQg:()=>em,c2e:()=>zg,cJS:()=>kn,cg1:()=>sv,dDg:()=>hf,dqk:()=>Mt,eFA:()=>Ec,eJc:()=>Xh,eoX:()=>Zv,f3M:()=>et,g9A:()=>BI,h0i:()=>Bl,hGG:()=>aE,iGM:()=>Lv,ifc:()=>me,ip1:()=>UI,jDz:()=>Sv,kL8:()=>cc,lG2:()=>Ta,lqb:()=>Qu,lri:()=>Kv,n5z:()=>Zc,oAB:()=>Qs,q4F:()=>ih,qLn:()=>sh,qZA:()=>Th,rWj:()=>qg,s9C:()=>Oy,sBO:()=>ed,s_b:()=>vt,soG:()=>mn,tb:()=>vc,tp0:()=>T,uIk:()=>Dy,vHH:()=>pe,vpe:()=>Ro,wAp:()=>It,xp6:()=>Sp,z2F:()=>Yg,zSh:()=>Do,zs3:()=>rc});var m=F(7579),B=F(727),N=F(9751),J=F(6451),ne=F(3099);function ie(i){for(let s in i)if(i[s]===ie)return s;throw Error("Could not find renamed property on target object.")}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function de(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const H=ie({__forward_ref__:ie});function G(i){return i.__forward_ref__=G,i.toString=function(){return ae(this())},i}function q(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(H)&&i.__forward_ref__===G}function Te(i){return i&&!!i.\u0275providers}const ot="https://g.co/ng/security#xss";class pe extends Error{constructor(s,a){super(Ee(s,a)),this.code=s}}function Ee(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function Ie(i){return"string"==typeof i?i:null==i?"":String(i)}function $e(i,s){throw new pe(-201,!1)}function Je(i,s){null==i&&function Ke(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function it(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function kn(i){return{providers:i.providers||[],imports:i.imports||[]}}function dn(i){return Jn(i,pi)||Jn(i,yn)}function sn(i){return null!==dn(i)}function Jn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ln(i){return i&&(i.hasOwnProperty(gi)||i.hasOwnProperty(ar))?i[gi]:null}const pi=ie({\u0275prov:ie}),gi=ie({\u0275inj:ie}),yn=ie({ngInjectableDef:ie}),ar=ie({ngInjectorDef:ie});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let _r;function Wn(i){const s=_r;return _r=i,s}function Fn(i,s,a){const c=dn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&st.Optional?null:void 0!==s?s:void $e(ae(i))}const Mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xn={},qn="__NG_DI_FLAG__",Ir="ngTempTokenPath",er="ngTokenPath",Ci=/\n/gm,Lt="\u0275",Si="__source";let jt;function Ur(i){const s=jt;return jt=i,s}function Un(i,s=st.Default){if(void 0===jt)throw new pe(-203,!1);return null===jt?Fn(i,void 0,s):jt.get(i,s&st.Optional?null:void 0,s)}function Ve(i,s=st.Default){return(function wr(){return _r}()||Un)(q(i),s)}function et(i,s=st.Default){return Ve(i,wt(s))}function wt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ct(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new pe(900,!1);let d,h=st.Default;for(let y=0;y<c.length;y++){const w=c[y],E=Vn(w);"number"==typeof E?-1===E?d=w.token:h|=E:d=w}s.push(Ve(d,h))}else s.push(Ve(c))}return s}function Kt(i,s){return i[qn]=s,i.prototype[qn]=s,i}function Vn(i){return i[qn]}function P(i){return{toString:i}.toString()}var k=(()=>((k=k||{})[k.OnPush=0]="OnPush",k[k.Default=1]="Default",k))(),me=(()=>{return(i=me||(me={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",me;var i})();const Ze={},We=[],bt=ie({\u0275cmp:ie}),$t=ie({\u0275dir:ie}),Rt=ie({\u0275pipe:ie}),Tn=ie({\u0275mod:ie}),Tt=ie({\u0275fac:ie}),ur=ie({__NG_ELEMENT_ID__:ie});let vu=0;function Ys(i){return P(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===k.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||We,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||me.Emulated,id:"c"+vu++,styles:i.styles||We,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=i.dependencies,y=i.features;return d.inputs=Iu(i.inputs,c),d.outputs=Iu(i.outputs),y&&y.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(wu).filter(cr):null,d.pipeDefs=h?()=>("function"==typeof h?h():h).map(Er).filter(cr):null,d})}function wu(i){return tn(i)||En(i)}function cr(i){return null!==i}function Qs(i){return P(()=>({type:i.type,bootstrap:i.bootstrap||We,declarations:i.declarations||We,imports:i.imports||We,exports:i.exports||We,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Iu(i,s){if(null==i)return Ze;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,s&&(s[d]=h)}return a}const Ta=Ys;function Xs(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function tn(i){return i[bt]||null}function En(i){return i[$t]||null}function Er(i){return i[Rt]||null}function Bn(i){const s=tn(i)||En(i)||Er(i);return null!==s&&s.standalone}function Vr(i,s){const a=i[Tn]||null;if(!a&&!0===s)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}const Xr=0,nt=1,Nt=2,Cn=3,Dr=4,Li=5,tr=6,us=7,_n=8,Ca=9,Fi=10,Ht=11,Fo=12,Js=13,Uo=14,$i=15,lr=16,Sa=17,Hi=18,Jr=19,mi=20,Eu=21,wn=22,Du=1,Aa=2,xa=7,Gi=8,yi=9,dr=10;function ei(i){return Array.isArray(i)&&"object"==typeof i[Du]}function ti(i){return Array.isArray(i)&&!0===i[Du]}function zi(i){return 0!=(4&i.flags)}function Vo(i){return i.componentOffset>-1}function bu(i){return 1==(1&i.flags)}function hr(i){return null!==i.template}function Pf(i){return 0!=(256&i[Nt])}function Ss(i,s){return i.hasOwnProperty(Tt)?i[Tt]:null}class to{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function no(){return ro}function ro(i){return i.type.prototype.ngOnChanges&&(i.setInput=As),Oa}function Oa(){const i=ka(this),s=i?.current;if(s){const a=i.previous;if(a===Ze)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function As(i,s,a,c){const d=this.declaredInputs[a],h=ka(i)||function Tu(i,s){return i[io]=s}(i,{previous:Ze,current:null}),y=h.current||(h.current={}),w=h.previous,E=w[d];y[d]=new to(E&&E.currentValue,s,w===Ze),i[c]=s}no.ngInherit=!0;const io="__ngSimpleChanges__";function ka(i){return i[io]||null}const Br=function(i,s,a){};function Mn(i){for(;Array.isArray(i);)i=i[Xr];return i}function fr(i,s){return Mn(s[i.index])}function La(i,s){return i.data[s]}function nr(i,s){const a=s[i];return ei(a)?a:a[Xr]}function Ms(i){return 64==(64&i[Nt])}function Ai(i,s){return null==s?null:i[s]}function Su(i){i[Hi]=0}function Rs(i,s){i[Li]+=s;let a=i,c=i[Cn];for(;null!==c&&(1===s&&1===a[Li]||-1===s&&0===a[Li]);)c[Li]+=s,a=c,c=c[Cn]}const Pt={lFrame:Vf(null),bindingsEnabled:!0};function kc(){return Pt.bindingsEnabled}function he(){return Pt.lFrame.lView}function Yt(){return Pt.lFrame.tView}function md(i){return Pt.lFrame.contextLView=i,i[_n]}function Lc(i){return Pt.lFrame.contextLView=null,i}function rr(){let i=xu();for(;null!==i&&64===i.type;)i=i.parent;return i}function xu(){return Pt.lFrame.currentTNode}function xi(i,s){const a=Pt.lFrame;a.currentTNode=i,a.isParent=s}function ao(){return Pt.lFrame.isParent}function Ki(){return Pt.lFrame.bindingIndex++}function Mu(i,s){const a=Pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ds(s)}function ds(i){Pt.lFrame.currentDirectiveIndex=i}function _d(){return Pt.lFrame.currentQueryIndex}function Ru(i){Pt.lFrame.currentQueryIndex=i}function Vc(i){const s=i[nt];return 2===s.type?s.declTNode:1===s.type?i[tr]:null}function wd(i,s,a){if(a&st.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&st.Host||(d=Vc(h),null===d||(h=h[$i],10&d.type))););if(null===d)return!1;s=d,i=h}const c=Pt.lFrame=Uf();return c.currentTNode=s,c.lView=i,!0}function Va(i){const s=Uf(),a=i[nt];Pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Uf(){const i=Pt.lFrame,s=null===i?null:i.child;return null===s?Vf(i):s}function Vf(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bf(){const i=Pt.lFrame;return Pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Bc=Bf;function jf(){const i=Bf();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function jr(){return Pt.lFrame.selectedIndex}function Zi(i){Pt.lFrame.selectedIndex=i}function pn(){const i=Pt.lFrame;return La(i.tView,i.selectedIndex)}function Ko(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:C,ngOnDestroy:M}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),C&&((i.viewHooks||(i.viewHooks=[])).push(a,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,C)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Zo(i,s,a){Ba(i,s,3,a)}function ho(i,s,a,c){(3&i[Nt])===a&&Ba(i,s,a,c)}function fo(i,s){let a=i[Nt];(3&a)===s&&(a&=2047,a+=1,i[Nt]=a)}function Ba(i,s,a,c){const h=c??-1,y=s.length-1;let w=0;for(let E=void 0!==c?65535&i[Hi]:0;E<y;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=c&&w>=c)break}else s[E]<0&&(i[Hi]+=65536),(w<h||-1==h)&&(Yo(i,a,s,E),i[Hi]=(4294901760&i[Hi])+E+2),E++}function Yo(i,s,a,c){const d=a[c]<0,h=a[c+1],w=i[d?-a[c]:a[c]];if(d){if(i[Nt]>>11<i[Hi]>>16&&(3&i[Nt])===s){i[Nt]+=2048,Br(4,w,h);try{h.call(w)}finally{Br(5,w,h)}}}else{Br(4,w,h);try{h.call(w)}finally{Br(5,w,h)}}}const po=-1;class Ns{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function ja(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const h=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,h)}else{const h=d,y=a[++c];Os(h)?i.setProperty(s,h,y):i.setAttribute(s,h,y),c++}}return c}function Ps(i){return 3===i||4===i||6===i}function Os(i){return 64===i.charCodeAt(0)}function Mi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||$a(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function $a(i,s,a,c,d){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const w=i[h++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=h-1;break}}}for(;h<i.length;){const w=i[h];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[h+1]=d));if(c===i[h+1])return void(i[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==d&&i.splice(h++,0,d)}function Pu(i){return i!==po}function go(i){return 32767&i}function ks(i,s){let a=function Ou(i){return i>>16}(i),c=s;for(;a>0;)c=c[$i],a--;return c}let mo=!0;function Yi(i){const s=mo;return mo=i,s}const zc=255,Ls=5;let ku=0;const Cr={};function hs(i,s){const a=Ha(i,s);if(-1!==a)return a;const c=s[nt];c.firstCreatePass&&(i.injectorIndex=s.length,Fs(c.data,i),Fs(s,null),Fs(c.blueprint,null));const d=Ga(i,s),h=i.injectorIndex;if(Pu(d)){const y=go(d),w=ks(d,s),E=w[nt].data;for(let C=0;C<8;C++)s[h+C]=w[y+C]|E[y+C]}return s[h+8]=d,h}function Fs(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ha(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ga(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Fu(d),null===c)return po;if(a++,d=d[$i],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return po}function za(i,s,a){!function Lu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(ur)&&(c=a[ur]),null==c&&(c=a[ur]=ku++);const d=c&zc;s.data[i+(d>>Ls)]|=1<<d}(i,s,a)}function Wc(i,s,a){if(a&st.Optional||void 0!==i)return i;$e()}function ta(i,s,a,c){if(a&st.Optional&&void 0===c&&(c=null),!(a&(st.Self|st.Host))){const d=i[Ca],h=Wn(void 0);try{return d?d.get(s,c,a&st.Optional):Fn(s,c,a&st.Optional)}finally{Wn(h)}}return Wc(c,0,a)}function qc(i,s,a,c=st.Default,d){if(null!==i){if(1024&s[Nt]){const y=function Wf(i,s,a,c,d){let h=i,y=s;for(;null!==h&&null!==y&&1024&y[Nt]&&!(256&y[Nt]);){const w=_i(h,y,a,c|st.Self,Cr);if(w!==Cr)return w;let E=h.parent;if(!E){const C=y[Eu];if(C){const M=C.get(a,Cr,c);if(M!==Cr)return M}E=Fu(y),y=y[$i]}h=E}return d}(i,s,a,c,Cr);if(y!==Cr)return y}const h=_i(i,s,a,c,Cr);if(h!==Cr)return h}return ta(s,a,c,d)}function _i(i,s,a,c,d){const h=function Dd(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ur)?i[ur]:void 0;return"number"==typeof s?s>=0?s&zc:zf:s}(a);if("function"==typeof h){if(!wd(s,i,c))return c&st.Host?Wc(d,0,c):ta(s,a,c,d);try{const y=h(c);if(null!=y||c&st.Optional)return y;$e()}finally{Bc()}}else if("number"==typeof h){let y=null,w=Ha(i,s),E=po,C=c&st.Host?s[lr][tr]:null;for((-1===w||c&st.SkipSelf)&&(E=-1===w?Ga(i,s):s[w+8],E!==po&&wi(c,!1)?(y=s[nt],w=go(E),s=ks(E,s)):w=-1);-1!==w;){const M=s[nt];if(Wa(h,w,M.data)){const U=Kc(w,s,a,y,c,C);if(U!==Cr)return U}E=s[w+8],E!==po&&wi(c,s[nt].data[w+8]===C)&&Wa(h,w,s)?(y=M,w=go(E),s=ks(E,s)):w=-1}}return d}function Kc(i,s,a,c,d,h){const y=s[nt],w=y.data[i+8],M=fs(w,y,a,null==c?Vo(w)&&mo:c!=y&&0!=(3&w.type),d&st.Host&&h===w);return null!==M?Vi(s,y,M,w):Cr}function fs(i,s,a,c,d){const h=i.providerIndexes,y=s.data,w=1048575&h,E=i.directiveStart,M=h>>20,W=d?w+M:i.directiveEnd;for(let X=c?w:w+M;X<W;X++){const _e=y[X];if(X<E&&a===_e||X>=E&&_e.type===a)return X}if(d){const X=y[E];if(X&&hr(X)&&X.type===a)return E}return null}function Vi(i,s,a,c){let d=i[a];const h=s.data;if(function $r(i){return i instanceof Ns}(d)){const y=d;y.resolving&&function Se(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Re(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ie(i)}(h[a]));const w=Yi(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?Wn(y.injectImpl):null;wd(i,c,st.Default);try{d=i[a]=y.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Hc(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(c){const y=ro(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==E&&Wn(E),Yi(w),y.resolving=!1,Bc()}}return d}function Wa(i,s,a){return!!(a[s+(i>>Ls)]&1<<i)}function wi(i,s){return!(i&st.Self||i&st.Host&&s)}class ps{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return qc(this._tNode,this._lView,s,wt(c),a)}}function zf(){return new ps(rr(),he())}function Zc(i){return P(()=>{const s=i.prototype.constructor,a=s[Tt]||yo(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const h=d[Tt]||yo(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function yo(i){return Ue(i)?()=>{const s=yo(q(i));return s&&s()}:Ss(i)}function Fu(i){const s=i[nt],a=s.type;return 2===a?s.declTNode:1===a?i[tr]:null}function qa(i){return function ea(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(Ps(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(rr(),i)}const na="__parameters__";function ia(i,s,a){return P(()=>{const c=function Td(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...h){if(this instanceof d)return c.apply(this,h),this;const y=new d(...h);return w.annotation=y,w;function w(E,C,M){const U=E.hasOwnProperty(na)?E[na]:Object.defineProperty(E,na,{value:[]})[na];for(;U.length<=M;)U.push(null);return(U[M]=U[M]||[]).push(y),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class hn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=it({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ji(i,s){i.forEach(a=>Array.isArray(a)?Ji(a,s):s(a))}function ju(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function vo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Hn=Kt(ia("Optional"),8),T=Kt(ia("SkipSelf"),4);var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();const Pd=new Map;let Za=0;const Ld="__ngContext__";function gn(i,s){ei(s)?(i[Ld]=s[mi],function tp(i){Pd.set(i[mi],i)}(s)):i[Ld]=s}let Q;function Ce(i,s){return Q(i,s)}function dt(i){const s=i[Cn];return ti(s)?s[Cn]:s}function Bi(i){return Ya(i[Js])}function ys(i){return Ya(i[Dr])}function Ya(i){for(;null!==i&&!ti(i);)i=i[Dr];return i}function Hs(i,s,a,c,d){if(null!=c){let h,y=!1;ti(c)?h=c:ei(c)&&(y=!0,c=c[Xr]);const w=Mn(c);0===i&&null!==a?null==d?xm(s,a,w):la(s,a,w,d||null,!0):1===i&&null!==a?la(s,a,w,d||null,!0):2===i?function hp(i,s,a){const c=Gd(i,s);c&&function W_(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=h&&function QE(i,s,a,c,d){const h=a[xa];h!==Mn(a)&&Hs(s,i,c,h,d);for(let w=dr;w<a.length;w++){const E=a[w];Wu(E[nt],E,i,s,c,h)}}(s,i,h,a,d)}}function Gs(i,s,a){return i.createElement(s,a)}function jd(i,s){const a=i[yi],c=a.indexOf(s),d=s[Cn];512&s[Nt]&&(s[Nt]&=-513,Rs(d,-1)),a.splice(c,1)}function $d(i,s){if(i.length<=dr)return;const a=dr+s,c=i[a];if(c){const d=c[Sa];null!==d&&d!==i&&jd(d,c),s>0&&(i[a-1][Dr]=c[Dr]);const h=vo(i,dr+s);!function sp(i,s){Wu(i,s,s[Ht],2,null,null),s[Xr]=null,s[tr]=null}(c[nt],c);const y=h[Jr];null!==y&&y.detachView(h[nt]),c[Cn]=null,c[Dr]=null,c[Nt]&=-65}return c}function G_(i,s){if(!(128&s[Nt])){const a=s[Ht];a.destroyNode&&Wu(i,s,a,3,null,null),function op(i){let s=i[Js];if(!s)return Am(i[nt],i);for(;s;){let a=null;if(ei(s))a=s[Js];else{const c=s[dr];c&&(a=c)}if(!a){for(;s&&!s[Dr]&&s!==i;)ei(s)&&Am(s[nt],s),s=s[Cn];null===s&&(s=i),ei(s)&&Am(s[nt],s),a=s&&s[Dr]}s=a}}(s)}}function Am(i,s){if(!(128&s[Nt])){s[Nt]&=-65,s[Nt]|=128,function ap(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Ns)){const h=a[c+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=d[h[y]],E=h[y+1];Br(4,w,E);try{E.call(w)}finally{Br(5,w,E)}}else{Br(4,d,h);try{h.call(d)}finally{Br(5,d,h)}}}}}(i,s),function KE(i,s){const a=i.cleanup,c=s[us];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),h+=2}else{const y=c[d=a[h+1]];a[h].call(y)}if(null!==c){for(let h=d+1;h<c.length;h++)(0,c[h])();s[us]=null}}(i,s),1===s[nt].type&&s[Ht].destroy();const a=s[Sa];if(null!==a&&ti(s[Cn])){a!==s[Cn]&&jd(a,s);const c=s[Jr];null!==c&&c.detachView(i)}!function kd(i){Pd.delete(i[mi])}(s)}}function up(i,s,a){return function cp(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[Xr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:h}=i.data[c.directiveStart+d];if(h===me.None||h===me.Emulated)return null}return fr(c,a)}}(i,s.parent,a)}function la(i,s,a,c,d){i.insertBefore(s,a,c,d)}function xm(i,s,a){i.appendChild(s,a)}function z_(i,s,a,c,d){null!==c?la(i,s,a,c,d):xm(i,s,a)}function Gd(i,s){return i.parentNode(s)}let Mm,Pm,Wd,Z_=function K_(i,s,a){return 40&i.type?fr(i,a):null};function lp(i,s,a,c){const d=up(i,c,s),h=s[Ht],w=function q_(i,s,a){return Z_(i,s,a)}(c.parent||s[tr],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)z_(h,d,a[E],w,!1);else z_(h,d,a,w,!1);void 0!==Mm&&Mm(h,c,s,a,d)}function dp(i,s){if(null!==s){const a=s.type;if(3&a)return fr(s,i);if(4&a)return sl(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return dp(i,c);{const d=i[s.index];return ti(d)?sl(-1,d):Mn(d)}}if(32&a)return Ce(s,i)()||Mn(i[s.index]);{const c=Q_(i,s);return null!==c?Array.isArray(c)?c[0]:dp(dt(i[lr]),c):dp(i,s.next)}}return null}function Q_(i,s){return null!==s?i[lr][tr].projection[s.projection]:null}function sl(i,s){const a=dr+i+1;if(a<s.length){const c=s[a],d=c[nt].firstChild;if(null!==d)return dp(c,d)}return s[xa]}function fp(i,s,a,c,d,h,y){for(;null!=a;){const w=c[a.index],E=a.type;if(y&&0===s&&(w&&gn(Mn(w),c),a.flags|=2),32!=(32&a.flags))if(8&E)fp(i,s,a.child,c,d,h,!1),Hs(s,i,d,w,h);else if(32&E){const C=Ce(a,c);let M;for(;M=C();)Hs(s,i,d,M,h);Hs(s,i,d,w,h)}else 16&E?X_(i,s,c,a,d,h):Hs(s,i,d,w,h);a=y?a.projectionNext:a.next}}function Wu(i,s,a,c,d,h){fp(a,c,i.firstChild,s,d,h,!1)}function X_(i,s,a,c,d,h){const y=a[lr],E=y[tr].projection[c.projection];if(Array.isArray(E))for(let C=0;C<E.length;C++)Hs(s,i,d,E[C],h);else fp(i,s,E,y[Cn],d,h,!0)}function Rm(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Nm(i,s,a){const{mergedAttrs:c,classes:d,styles:h}=a;null!==c&&ja(i,s,c),null!==d&&Rm(i,s,d),null!==h&&function e0(i,s,a){i.setAttribute(s,"style",a)}(i,s,h)}function r0(i){Pm=i}function gp(i){return function qd(){if(void 0===Wd&&(Wd=null,Mt.trustedTypes))try{Wd=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wd}()?.createScriptURL(i)||i}class JE{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function qu(i){return i instanceof JE?i.changingThisBreaksApplicationSecurity:i}function Kd(i,s){const a=function bS(i){return i instanceof JE&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${ot})`)}return a===s}const l0=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function yp(i){const s=da();return s?s.sanitize(pr.URL,i)||"":Kd(i,"URL")?qu(i):function mp(i){return(i=String(i)).match(l0)?i:"unsafe:"+i}(Ie(i))}function vp(i){const s=da();if(s)return gp(s.sanitize(pr.RESOURCE_URL,i)||"");if(Kd(i,"ResourceURL"))return gp(qu(i));throw new pe(904,!1)}function ii(i,s,a){return function Ku(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?vp:yp}(s,a)(i)}function da(){const i=he();return i&&i[Fo]}const Jd=new hn("ENVIRONMENT_INITIALIZER"),Um=new hn("INJECTOR",-1),m0=new hn("INJECTOR_DEF_TYPES");class y0{get(s,a=xn){if(a===xn){const c=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw c.name="NullInjectorError",c}return a}}function Gt(...i){return{\u0275providers:ul(0,i),\u0275fromNgModule:!0}}function ul(i,...s){const a=[],c=new Set;let d;return Ji(s,h=>{const y=h;Xa(y,a,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&_0(d,a),a}function _0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Vm(d,h=>{s.push(h)})}}function Xa(i,s,a,c){if(!(i=q(i)))return!1;let d=null,h=Ln(i);const y=!h&&tn(i);if(h||y){if(y&&!y.standalone)return!1;d=i}else{const E=i.ngModule;if(h=Ln(E),!h)return!1;d=E}const w=c.has(d);if(y){if(w)return!1;if(c.add(d),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of E)Xa(C,s,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!w){let C;c.add(d);try{Ji(h.imports,M=>{Xa(M,s,a,c)&&(C||(C=[]),C.push(M))})}finally{}void 0!==C&&_0(C,s)}if(!w){const C=Ss(d)||(()=>new d);s.push({provide:d,useFactory:C,deps:We},{provide:m0,useValue:d,multi:!0},{provide:Jd,useValue:()=>Ve(d),multi:!0})}const E=h.providers;null==E||w||Vm(E,M=>{s.push(M)})}}return d!==i&&void 0!==i.providers}function Vm(i,s){for(let a of i)Te(a)&&(a=a.\u0275providers),Array.isArray(a)?Vm(a,s):s(a)}const Eo=ie({provide:String,useValue:ie});function wp(i){return null!==i&&"object"==typeof i&&Eo in i}function cl(i){return"function"==typeof i}const Do=new hn("Set Injector scope."),Yu={},aD={};let Ip;function eh(){return void 0===Ip&&(Ip=new y0),Ip}class Qu{}class $m extends Qu{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ha(s,y=>this.processProvider(y)),this.records.set(Um,es(void 0,this)),d.has("environment")&&this.records.set(Qu,es(void 0,this));const h=this.records.get(Do);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(m0.multi,We,st.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Ur(this),c=Wn(void 0);try{return s()}finally{Ur(a),Wn(c)}}get(s,a=xn,c=st.Default){this.assertNotDestroyed(),c=wt(c);const d=Ur(this),h=Wn(void 0);try{if(!(c&st.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function uD(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(s)&&dn(s);w=E&&this.injectableDefInScope(E)?es(Hm(s),Yu):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&st.Self?eh():this.parent).get(s,a=c&st.Optional&&a===xn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ir]=y[Ir]||[]).unshift(ae(s)),d)throw y;return function $(i,s,a,c){const d=i[Ir];throw s[Si]&&d.unshift(s[Si]),i.message=function j(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Lt?i.slice(2):i;let d=ae(s);if(Array.isArray(s))d=s.map(ae).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):ae(w)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Ci,"\n  ")}`}("\n"+i.message,d,a,c),i[er]=d,i[Ir]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Wn(h),Ur(d)}}resolveInjectorInitializers(){const s=Ur(this),a=Wn(void 0);try{const c=this.get(Jd.multi,We,st.Self);for(const d of c)d()}finally{Ur(s),Wn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ae(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(s){let a=cl(s=q(s))?s:q(s&&s.provide);const c=function I0(i){return wp(i)?es(void 0,i.useValue):es(function th(i,s,a){let c;if(cl(i)){const d=q(i);return Ss(d)||Hm(d)}if(wp(i))c=()=>q(i.useValue);else if(function jm(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ct(i.deps||[]));else if(function Bm(i){return!(!i||!i.useExisting)}(i))c=()=>Ve(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function Xt(i){return!!i.deps}(i))return Ss(d)||Hm(d);c=()=>new d(...Ct(i.deps))}return c}(i),Yu)}(s);if(cl(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=es(void 0,Yu,!0),d.factory=()=>Ct(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Yu&&(a.value=aD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Hm(i){const s=dn(i),a=null!==s?s.factory:Ss(i);if(null!==a)return a;if(i instanceof hn)throw new pe(204,!1);if(i instanceof Function)return function w0(i){const s=i.length;if(s>0)throw function gs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new pe(204,!1);const a=function Fr(i){const s=i&&(i[pi]||i[yn]);return s?(function ki(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),s):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new pe(204,!1)}function es(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ha(i,s){for(const a of i)Array.isArray(a)?ha(a,s):a&&Te(a)?ha(a.\u0275providers,s):s(a)}class cD{}class ll{}class rh{resolveComponentFactory(s){throw function Gm(i){const s=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let dl=(()=>{class i{}return i.NULL=new rh,i})();function Ep(){return hl(rr(),he())}function hl(i,s){return new Xu(fr(i,s))}let Xu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Ep,i})();function Dp(i){return i instanceof Xu?i.nativeElement:i}class Wm{}let D0=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function lD(){const i=he(),a=nr(rr().index,i);return(ei(a)?a:i)[Ht]}(),i})(),dD=(()=>{class i{}return i.\u0275prov=it({token:i,providedIn:"root",factory:()=>null}),i})();class b0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ih=new b0("15.2.1"),qm={},Km="ngOriginalError";function Zm(i){return i[Km]}class sh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Zm(s);for(;a&&Zm(a);)a=Zm(a);return a||null}}function fa(i){return i instanceof Function?i():i}function tc(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===c||i.charCodeAt(d+h)<=32)return d}a=d+1}}const C0="ng-template";function mD(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==tc(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Jm(i){return 4===i.type&&i.value!==C0}function yD(i,s,a){return s===(4!==i.type||a?i.value:C0)}function ey(i,s,a){let c=4;const d=i.attrs||[],h=function S0(i){for(let s=0;s<i.length;s++)if(Ps(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!y)if(4&c){if(c=2|1&c,""!==E&&!yD(i,E,a)||""===E&&1===s.length){if(Ii(c))return!1;y=!0}}else{const C=8&c?E:s[++w];if(8&c&&null!==i.attrs){if(!mD(i.attrs,C,a)){if(Ii(c))return!1;y=!0}continue}const U=vD(8&c?"class":E,d,Jm(i),a);if(-1===U){if(Ii(c))return!1;y=!0;continue}if(""!==C){let W;W=U>h?"":d[U+1].toLowerCase();const X=8&c?W:null;if(X&&-1!==tc(X,C,0)||2&c&&C!==W){if(Ii(c))return!1;y=!0}}}}else{if(!y&&!Ii(c)&&!Ii(E))return!1;if(y&&Ii(E))continue;y=!1,c=E|1&c}}return Ii(c)||y}function Ii(i){return 0==(1&i)}function vD(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let h=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=h?1:2}return-1}return function A0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Tp(i,s,a=!1){for(let c=0;c<s.length;c++)if(ey(i,s[c],a))return!0;return!1}function zs(i,s){return i?":not("+s.trim()+")":s}function ty(i){let s=i[0],a=1,c=2,d="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Ii(y)&&(s+=zs(h,d),d=""),c=y,h=h||!Ii(c);a++}return""!==d&&(s+=zs(h,d)),s}const Ot={};function Sp(i){x0(Yt(),he(),jr()+i,!1)}function x0(i,s,a,c){if(!c)if(3==(3&s[Nt])){const h=i.preOrderCheckHooks;null!==h&&Zo(s,h,a)}else{const h=i.preOrderHooks;null!==h&&ho(s,h,0,a)}Zi(a)}function P0(i,s=null,a=null,c){const d=ny(i,s,a,c);return d.resolveInjectorInitializers(),d}function ny(i,s=null,a=null,c,d=new Set){const h=[a||We,Gt(i)];return c=c||("object"==typeof i?void 0:ae(i)),new $m(h,s||eh(),c||null,d)}let rc=(()=>{class i{static create(a,c){if(Array.isArray(a))return P0({name:""},c,a,"");{const d=a.name??"";return P0({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=xn,i.NULL=new y0,i.\u0275prov=it({token:i,providedIn:"any",factory:()=>Ve(Um)}),i.__NG_ELEMENT_ID__=-1,i})();function bo(i,s=st.Default){const a=he();return null===a?Ve(i,s):qc(rr(),a,q(i),s)}function lh(){throw new Error("invalid")}function B0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const h=a[c+1];if(-1!==h){const y=i.data[h];Ru(a[c]),y.contentQueries(2,s[h],h)}}}function dh(i,s,a,c,d,h,y,w,E,C,M){const U=s.blueprint.slice();return U[Xr]=d,U[Nt]=76|c,(null!==M||i&&1024&i[Nt])&&(U[Nt]|=1024),Su(U),U[Cn]=U[$i]=i,U[_n]=a,U[Fi]=y||i&&i[Fi],U[Ht]=w||i&&i[Ht],U[Fo]=E||i&&i[Fo]||null,U[Ca]=C||i&&i[Ca]||null,U[tr]=h,U[mi]=function Od(){return Za++}(),U[Eu]=M,U[lr]=2==s.type?i[lr]:U,U}function hh(i,s,a,c,d){let h=i.data[s];if(null===h)h=function j0(i,s,a,c,d){const h=xu(),y=ao(),E=i.data[s]=function z0(i,s,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==h&&(y?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E,E.prev=h)),E}(i,s,a,c,d),function Uc(){return Pt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const y=function oo(){const i=Pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return xi(h,!0),h}function Pp(i,s,a,c){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function $0(i,s,a){Va(s);try{const c=i.viewQuery;null!==c&&_y(1,c,a);const d=i.template;null!==d&&H0(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&B0(i,s),i.staticViewQueries&&_y(2,i.viewQuery,a);const h=i.components;null!==h&&function dy(i,s){for(let a=0;a<s.length;a++)vy(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Nt]&=-5,jf()}}function ml(i,s,a,c){const d=s[Nt];if(128!=(128&d)){Va(s);try{Su(s),function co(i){return Pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&H0(i,s,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&Zo(s,C,null)}else{const C=i.preOrderHooks;null!==C&&ho(s,C,0,null),fo(s,0)}if(function zD(i){for(let s=Bi(i);null!==s;s=ys(s)){if(!s[Aa])continue;const a=s[yi];for(let c=0;c<a.length;c++){const d=a[c];512&d[Nt]||Rs(d[Cn],1),d[Nt]|=512}}}(s),function GD(i){for(let s=Bi(i);null!==s;s=ys(s))for(let a=dr;a<s.length;a++){const c=s[a],d=c[nt];Ms(c)&&ml(d,c,d.template,c[_n])}}(s),null!==i.contentQueries&&B0(i,s),y){const C=i.contentCheckHooks;null!==C&&Zo(s,C)}else{const C=i.contentHooks;null!==C&&ho(s,C,1),fo(s,1)}!function ly(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Zi(~d);else{const h=d,y=a[++c],w=a[++c];Mu(y,h),w(2,s[h])}}}finally{Zi(-1)}}(i,s);const w=i.components;null!==w&&function ND(i,s){for(let a=0;a<s.length;a++)Q0(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&_y(2,E,c),y){const C=i.viewCheckHooks;null!==C&&Zo(s,C)}else{const C=i.viewHooks;null!==C&&ho(s,C,2),fo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Nt]&=-41,512&s[Nt]&&(s[Nt]&=-513,Rs(s[Cn],-1))}finally{jf()}}}function H0(i,s,a,c,d){const h=jr(),y=2&c;try{Zi(-1),y&&s.length>wn&&x0(i,s,wn,!1),Br(y?2:0,d),a(c,d)}finally{Zi(h),Br(y?3:1,d)}}function hy(i,s,a){if(zi(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}function fy(i,s,a){kc()&&(function UD(i,s,a,c){const d=a.directiveStart,h=a.directiveEnd;Vo(a)&&function jD(i,s,a){const c=fr(s,i),d=ts(a),h=i[Fi],y=_l(i,dh(i,d,null,a.onPush?32:16,c,s,h,h.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||hs(a,s),gn(c,s);const y=a.initialInputs;for(let w=d;w<h;w++){const E=i.data[w],C=Vi(s,i,w,a);gn(C,s),null!==y&&$D(0,w-d,C,E,0,y),hr(E)&&(nr(a.index,s)[_n]=Vi(s,i,w,a))}}(i,s,a,fr(a,s)),64==(64&a.flags)&&Z0(i,s,a))}function fh(i,s,a=fr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let h=0;h<c.length;h+=2){const y=c[h+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function ts(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Op(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Op(i,s,a,c,d,h,y,w,E,C){const M=wn+c,U=M+d,W=function ph(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ot);return a}(M,U),X="function"==typeof C?C():C;return W[nt]={type:i,blueprint:W,template:a,queries:null,viewQuery:w,declTNode:s,data:W.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function G0(i,s,a,c){const d=mh(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&wy(i).push(c,d.length-1))}function gh(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const h=i[d];null===c?W0(a,s,d,h):c.hasOwnProperty(d)&&W0(a,s,c[d],h)}return a}function W0(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function oi(i,s,a,c,d,h,y,w){const E=fr(s,a);let M,C=s.inputs;!w&&null!=C&&(M=C[c])?(Il(i,a,M,c,d),Vo(s)&&q0(a,s.index)):3&s.type&&(c=function yl(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,h.setProperty(E,c,d))}function q0(i,s){const a=nr(s,i);16&a[Nt]||(a[Nt]|=32)}function sc(i,s,a,c){if(kc()){const d=null===c?null:{"":-1},h=function LS(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];if(Tp(s,y.selectors,!1))if(c||(c=[]),hr(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),c.unshift(...w,y),py(i,s,w.length)}else c.unshift(y),py(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,w;null===h?y=w=null:[y,w]=h,null!==y&&K0(i,s,a,y,d,w),d&&function gy(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new pe(-301,!1);c.push(s[d],h)}}}(a,c,d)}a.mergedAttrs=Mi(a.mergedAttrs,a.attrs)}function K0(i,s,a,c,d,h){for(let C=0;C<c.length;C++)za(hs(a,s),i,c[C].type);!function vl(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const M=c[C];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,E=Pp(i,s,c.length,null);for(let C=0;C<c.length;C++){const M=c[C];a.mergedAttrs=Mi(a.mergedAttrs,M.hostAttrs),BD(i,a,s,E,M),Lp(E,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const U=M.type.prototype;!y&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!w&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),E++}!function OD(i,s,a){const d=s.directiveEnd,h=i.data,y=s.attrs,w=[];let E=null,C=null;for(let M=s.directiveStart;M<d;M++){const U=h[M],W=a?a.get(U):null,_e=W?W.outputs:null;E=gh(U.inputs,M,E,W?W.inputs:null),C=gh(U.outputs,M,C,_e);const Be=null===E||null===y||Jm(s)?null:HD(E,M,y);w.push(Be)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=8),E.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=w,s.inputs=E,s.outputs=C}(i,a,h)}function Z0(i,s,a){const c=a.directiveStart,d=a.directiveEnd,h=a.index,y=function vd(){return Pt.lFrame.currentDirectiveIndex}();try{Zi(h);for(let w=c;w<d;w++){const E=i.data[w],C=s[w];ds(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&VD(E,C)}}finally{Zi(-1),ds(y)}}function VD(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function py(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function Lp(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;hr(s)&&(a[""]=i)}}function BD(i,s,a,c,d){i.data[c]=d;const h=d.factory||(d.factory=Ss(d.type)),y=new Ns(h,hr(d),bo);i.blueprint[c]=y,a[c]=y,function LD(i,s,a,c,d){const h=d.hostBindings;if(h){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function FD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,c,h)}}(i,s,c,Pp(i,a,d.hostVars,Ot),d)}function To(i,s,a,c,d,h){const y=fr(i,s);!function my(i,s,a,c,d,h,y){if(null==h)i.removeAttribute(s,d,a);else{const w=null==y?Ie(h):y(h,c||"",d);i.setAttribute(s,d,w,a)}}(s[Ht],y,h,i.value,a,c,d)}function $D(i,s,a,c,d,h){const y=h[s];if(null!==y){const w=c.setInput;for(let E=0;E<y.length;){const C=y[E++],M=y[E++],U=y[E++];null!==w?c.setInput(a,U,C,M):a[M]=U}}}function HD(i,s,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===c&&(c=[]);const y=i[h];for(let w=0;w<y.length;w+=2)if(y[w]===s){c.push(h,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Y0(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function Q0(i,s){const a=nr(s,i);if(Ms(a)){const c=a[nt];48&a[Nt]?ml(c,a,c.template,a[_n]):a[Li]>0&&yy(a)}}function yy(i){for(let c=Bi(i);null!==c;c=ys(c))for(let d=dr;d<c.length;d++){const h=c[d];if(Ms(h))if(512&h[Nt]){const y=h[nt];ml(y,h,y.template,h[_n])}else h[Li]>0&&yy(h)}const a=i[nt].components;if(null!==a)for(let c=0;c<a.length;c++){const d=nr(a[c],i);Ms(d)&&d[Li]>0&&yy(d)}}function vy(i,s){const a=nr(s,i),c=a[nt];(function X0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),$0(c,a,a[_n])}function _l(i,s){return i[Js]?i[Uo][Dr]=s:i[Js]=s,i[Uo]=s,s}function wl(i){for(;i;){i[Nt]|=32;const s=dt(i);if(Pf(i)&&!s)return i;i=s}return null}function Fp(i,s,a,c=!0){const d=s[Fi];d.begin&&d.begin();try{ml(i,s,i.template,a)}catch(y){throw c&&yh(s,y),y}finally{d.end&&d.end()}}function _y(i,s,a){Ru(0),s(i,a)}function mh(i){return i[us]||(i[us]=[])}function wy(i){return i.cleanup||(i.cleanup=[])}function yh(i,s){const a=i[Ca],c=a?a.get(sh,null):null;c&&c.handleError(s)}function Il(i,s,a,c,d){for(let h=0;h<a.length;){const y=a[h++],w=a[h++],E=s[y],C=i.data[y];null!==C.setInput?C.setInput(E,d,c,w):E[w]=d}}function Co(i,s,a){const c=function cs(i,s){return Mn(s[i])}(s,i);!function Gu(i,s,a){i.setValue(s,a)}(i[Ht],c,a)}function Ja(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?h=w:1==h?d=de(d,w):2==h&&(c=de(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function vh(i,s,a,c,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(Mn(h)),ti(h))for(let w=dr;w<h.length;w++){const E=h[w],C=E[nt].firstChild;null!==C&&vh(E[nt],E,C,c)}const y=a.type;if(8&y)vh(i,s,a.child,c);else if(32&y){const w=Ce(a,s);let E;for(;E=w();)c.push(E)}else if(16&y){const w=Q_(s,a);if(Array.isArray(w))c.push(...w);else{const E=dt(s[lr]);vh(E[nt],E,w,c,!0)}}a=d?a.projectionNext:a.next}return c}class _h{get rootNodes(){const s=this._lView,a=s[nt];return vh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(s){this._lView[_n]=s}get destroyed(){return 128==(128&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[Cn];if(ti(s)){const a=s[Gi],c=a?a.indexOf(this):-1;c>-1&&($d(s,c),vo(a,c))}this._attachedToViewContainer=!1}G_(this._lView[nt],this._lView)}onDestroy(s){G0(this._lView[nt],this._lView,null,s)}markForCheck(){wl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-65}reattach(){this._lView[Nt]|=64}detectChanges(){Fp(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zu(i,s){Wu(i,s,s[Ht],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=s}}class WD extends _h{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Fp(s[nt],s,s[_n],!1)}checkNoChanges(){}get context(){return null}}class J0 extends dl{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=tn(s);return new wh(a,this.ngModule)}}function ew(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class tw{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=wt(c);const d=this.injector.get(s,qm,c);return d!==qm||a===qm?d:this.parentInjector.get(s,a,c)}}class wh extends ll{get inputs(){return ew(this.componentDef.inputs)}get outputs(){return ew(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function nc(i){return i.map(ty).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let h=(d=d||this.ngModule)instanceof Qu?d:d?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new tw(s,h):s,w=y.get(Wm,null);if(null===w)throw new pe(407,!1);const E=y.get(dD,null),C=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",U=c?function PD(i,s,a){return i.selectRootElement(s,a===me.ShadowDom)}(C,c,this.componentDef.encapsulation):Gs(C,M,function qD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),W=this.componentDef.onPush?288:272,X=Op(0,null,null,1,0,null,null,null,null,null),_e=dh(null,X,null,W,null,null,w,C,E,y,null);let Be,Qe;Va(_e);try{const lt=this.componentDef;let xt,Pe=null;lt.findHostDirectiveDefs?(xt=[],Pe=new Map,lt.findHostDirectiveDefs(lt,xt,Pe),xt.push(lt)):xt=[lt];const Ut=function ZD(i,s){const a=i[nt],c=wn;return i[c]=s,hh(a,c,2,"#host",null)}(_e,U),zn=function YD(i,s,a,c,d,h,y,w){const E=d[nt];!function QD(i,s,a,c){for(const d of i)s.mergedAttrs=Mi(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Ja(s,s.mergedAttrs,!0),null!==a&&Nm(c,a,s))}(c,i,s,y);const C=h.createRenderer(s,a),M=dh(d,ts(a),null,a.onPush?32:16,d[i.index],i,h,C,w||null,null,null);return E.firstCreatePass&&py(E,i,c.length-1),_l(d,M),d[i.index]=M}(Ut,U,lt,xt,_e,w,C);Qe=La(X,wn),U&&function nw(i,s,a,c){if(c)ja(i,a,["ng-version",ih.full]);else{const{attrs:d,classes:h}=function Cp(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++c]):8===d&&a.push(h);else{if(!Ii(d))break;d=h}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&ja(i,a,d),h&&h.length>0&&Rm(i,a,h.join(" "))}}(C,lt,U,c),void 0!==a&&function JD(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const h=a[d];c.push(null!=h?Array.from(h):null)}}(Qe,this.ngContentSelectors,a),Be=function XD(i,s,a,c,d,h){const y=rr(),w=d[nt],E=fr(y,d);K0(w,d,y,a,null,c);for(let M=0;M<a.length;M++)gn(Vi(d,w,y.directiveStart+M,y),d);Z0(w,d,y),E&&gn(E,d);const C=Vi(d,w,y.directiveStart+y.componentOffset,y);if(i[_n]=d[_n]=C,null!==h)for(const M of h)M(C,s);return hy(w,y,i),C}(zn,lt,xt,Pe,_e,[rw]),$0(X,_e,null)}finally{jf()}return new KD(this.componentType,Be,hl(Qe,_e),_e,Qe)}}class KD extends cD{constructor(s,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new WD(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const h=this._rootLView;Il(h[nt],h,d,s,a),q0(h,this._tNode.index)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function rw(){const i=rr();Ko(he()[nt],i)}function Eh(i){return!!Hp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Hp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ei(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Dy(i,s,a,c){const d=he();return Ei(d,Ki(),s)&&(Yt(),To(pn(),d,i,s,a,c)),Dy}function eu(i,s,a,c){return Ei(i,Ki(),a)?s+Ie(a)+c:Ot}function lb(i,s,a,c,d,h,y,w){const E=he(),C=Yt(),M=i+wn,U=C.firstCreatePass?function Al(i,s,a,c,d,h,y,w,E){const C=s.consts,M=hh(s,i,4,y||null,Ai(C,w));sc(s,a,M,Ai(C,E)),Ko(s,M);const U=M.tViews=Op(2,M,c,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,M),U.queries=s.queries.embeddedTView(M)),M}(M,C,E,s,a,c,d,h,y):C.data[M];xi(U,!1);const W=E[Ht].createComment("");lp(C,E,W,U),gn(W,E),_l(E,E[M]=Y0(W,E,W,U)),bu(U)&&fy(C,E,U),null!=y&&fh(E,U,w)}function ga(i){return function qi(i,s){return i[s]}(function Ua(){return Pt.lFrame.contextLView}(),wn+i)}function bh(i,s,a){const c=he();return Ei(c,Ki(),s)&&oi(Yt(),pn(),c,i,s,c[Ht],a,!1),bh}function Cy(i,s,a,c,d){const y=d?"class":"style";Il(i,a,s.inputs[y],y,c)}function Sy(i,s,a,c){const d=he(),h=Yt(),y=wn+i,w=d[Ht],E=h.firstCreatePass?function jS(i,s,a,c,d,h){const y=s.consts,E=hh(s,i,2,c,Ai(y,d));return sc(s,a,E,Ai(y,h)),null!==E.attrs&&Ja(E,E.attrs,!1),null!==E.mergedAttrs&&Ja(E,E.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,E),E}(y,h,d,s,a,c):h.data[y],C=d[y]=Gs(w,s,function $f(){return Pt.lFrame.currentNamespace}()),M=bu(E);return xi(E,!0),Nm(w,C,E),32!=(32&E.flags)&&lp(h,d,C,E),0===function zo(){return Pt.lFrame.elementDepthCount}()&&gn(C,d),function pd(){Pt.lFrame.elementDepthCount++}(),M&&(fy(h,d,E),hy(h,E,d)),null!==c&&fh(d,E),Sy}function Th(){let i=rr();ao()?function Fc(){Pt.lFrame.isParent=!1}():(i=i.parent,xi(i,!1));const s=i;!function Wo(){Pt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(Ko(a,i),zi(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Gc(i){return 0!=(8&i.flags)}(s)&&Cy(a,s,he(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Xo(i){return 0!=(16&i.flags)}(s)&&Cy(a,s,he(),s.stylesWithoutHost,!1),Th}function Wp(i,s,a,c){return Sy(i,s,a,c),Th(),Wp}function Ry(){return he()}function Ny(i){return!!i&&"function"==typeof i.then}function db(i){return!!i&&"function"==typeof i.subscribe}const hb=db;function pw(i,s,a,c){const d=he(),h=Yt(),y=rr();return function Py(i,s,a,c,d,h,y){const w=bu(c),C=i.firstCreatePass&&wy(i),M=s[_n],U=mh(s);let W=!0;if(3&c.type||y){const Be=fr(c,s),Qe=y?y(Be):Be,lt=U.length,xt=y?Ut=>y(Mn(Ut[c.index])):c.index;let Pe=null;if(!y&&w&&(Pe=function $S(i,s,a,c){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const y=d[h];if(y===a&&d[h+1]===c){const w=s[us],E=d[h+2];return w.length>E?w[E]:null}"string"==typeof y&&(h+=2)}return null}(i,s,d,c.index)),null!==Pe)(Pe.__ngLastListenerFn__||Pe).__ngNextListenerFn__=h,Pe.__ngLastListenerFn__=h,W=!1;else{h=mw(c,s,M,h,!1);const Ut=a.listen(Qe,d,h);U.push(h,Ut),C&&C.push(d,xt,lt,lt+1)}}else h=mw(c,s,M,h,!1);const X=c.outputs;let _e;if(W&&null!==X&&(_e=X[d])){const Be=_e.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const zn=s[_e[Qe]][_e[Qe+1]].subscribe(h),vr=U.length;U.push(h,zn),C&&C.push(d,c.index,vr,-(vr+1))}}}(h,d,d[Ht],y,i,s,c),pw}function gw(i,s,a,c){try{return Br(6,s,a),!1!==a(c)}catch(d){return yh(i,d),!1}finally{Br(7,s,a)}}function mw(i,s,a,c,d){return function h(y){if(y===Function)return c;wl(i.componentOffset>-1?nr(i.index,s):s);let E=gw(s,a,c,y),C=h.__ngNextListenerFn__;for(;C;)E=gw(s,a,C,y)&&E,C=C.__ngNextListenerFn__;return d&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function Oy(i,s,a){return ky(i,"",s,"",a),Oy}function ky(i,s,a,c,d){const h=he(),y=eu(h,s,a,c);return y!==Ot&&oi(Yt(),pn(),h,i,y,h[Ht],d,!1),ky}function eg(i,s=""){const a=he(),c=Yt(),d=i+wn,h=c.firstCreatePass?hh(c,d,1,s,null):c.data[d],y=a[d]=function Qa(i,s){return i.createText(s)}(a[Ht],s);lp(c,a,y,h),xi(h,!1)}function tg(i){return ng("",i,""),tg}function ng(i,s,a){const c=he(),d=eu(c,i,s,a);return d!==Ot&&Co(c,jr(),d),ng}const Ks=void 0;var Vw=["en",[["a","p"],["AM","PM"],Ks],[["AM","PM"],Ks,Ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ks,"{1} 'at' {0}",Ks],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Uw(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let uc={};function sv(i){const s=function jw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Bw(s);if(a)return a;const c=s.split("-")[0];if(a=Bw(c),a)return a;if("en"===c)return Vw;throw new pe(701,!1)}function cc(i){return sv(i)[It.PluralCase]}function Bw(i){return i in uc||(uc[i]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[i]),uc[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const xo="en-US";let av=xo;class Bl{}class bv{}function Hh(i,s){return new Tv(i,s??null)}class Tv extends Bl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new J0(this);const c=Vr(s);this._bootstrapComponents=fa(c.bootstrap),this._r3Injector=ny(s,a,[{provide:Bl,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],ae(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Gh extends bv{constructor(s){super(),this.moduleType=s}create(s){return new Tv(this.moduleType,s)}}class Cv extends Bl{constructor(s,a,c){super(),this.componentFactoryResolver=new J0(this),this.instance=null;const d=new $m([...s,{provide:Bl,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],a||eh(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Sg(i,s,a=null){return new Cv(i,s,a).injector}let Ag=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=ul(0,a.type),d=c.length>0?Sg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=it({token:i,providedIn:"environment",factory:()=>new i(Ve(Qu))}),i})();function Sv(i){i.getStandaloneInjector=s=>s.get(Ag).getOrCreateStandaloneInjector(i)}function Pg(i){return s=>{setTimeout(i,void 0,s)}}const Ro=class Xb extends m.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,h=a||(()=>null),y=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),h=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(h=Pg(h),d&&(d=Pg(d)),y&&(y=Pg(y)));const w=super.subscribe({next:d,error:h,complete:y});return s instanceof B.w0&&s.add(w),w}};function qS(){return this._results[Symbol.iterator]()}class Ov{get changes(){return this._changes||(this._changes=new Ro)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ov.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=qS)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Nr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Xc(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],h=s[c];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $l=(()=>{class i{}return i.__NG_ELEMENT_ID__=vI,i})();const Ft=$l,Hl=class extends Ft{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=dh(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[Sa]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[Jr];return null!==y&&(d[Jr]=y.createEmbeddedView(c)),$0(c,d,s),new _h(d)}};function vI(){return bn(rr(),he())}function bn(i,s){return 4&i.type?new Hl(s,i,hl(i,s)):null}let vt=(()=>{class i{}return i.__NG_ELEMENT_ID__=qh,i})();function qh(){return Kh(rr(),he())}const cn=vt,_I=class extends cn{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return hl(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ga(this._hostTNode,this._hostLView);if(Pu(s)){const a=ks(s,this._hostLView),c=go(s);return new ps(a[nt].data[c+8],a)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Zn(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(s,a,c){let d,h;"number"==typeof c?d=c:null!=c&&(d=c.index,h=c.injector);const y=s.createEmbeddedView(a||{},h);return this.insert(y,d),y}createComponent(s,a,c,d,h){const y=s&&!function Ka(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const U=a||{};w=U.index,c=U.injector,d=U.projectableNodes,h=U.environmentInjector||U.ngModuleRef}const E=y?s:new wh(tn(s)),C=c||this.parentInjector;if(!h&&null==E.ngModule){const W=(y?C:this.parentInjector).get(Qu,null);W&&(h=W)}const M=E.create(C,d,void 0,h);return this.insert(M.hostView,w),M}insert(s,a){const c=s._lView,d=c[nt];if(function hd(i){return ti(i[Cn])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const U=c[Cn],W=new _I(U,U[tr],U[Cn]);W.detach(W.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function Bd(i,s,a,c){const d=dr+c,h=a.length;c>0&&(a[d-1][Dr]=s),c<h-dr?(s[Dr]=a[d],ju(a,dr+c,s)):(a.push(s),s[Dr]=null),s[Cn]=a;const y=s[Sa];null!==y&&a!==y&&function il(i,s){const a=i[yi];s[lr]!==s[Cn][Cn][lr]&&(i[Aa]=!0),null===a?i[yi]=[s]:a.push(s)}(y,s);const w=s[Jr];null!==w&&w.insertView(i),s[Nt]|=64}(d,c,y,h);const w=sl(h,y),E=c[Ht],C=Gd(E,y[xa]);return null!==C&&function rl(i,s,a,c,d,h){c[Xr]=d,c[tr]=s,Wu(i,c,a,1,d,h)}(d,y[tr],E,c,C,w),s.attachToViewContainerRef(),ju(qe(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Zn(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=$d(this._lContainer,a);c&&(vo(qe(this._lContainer),a),G_(c[nt],c))}detach(s){const a=this._adjustIndex(s,-1),c=$d(this._lContainer,a);return c&&null!=vo(qe(this._lContainer),a)?new _h(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Zn(i){return i[Gi]}function qe(i){return i[Gi]||(i[Gi]=[])}function Kh(i,s){let a;const c=s[i.index];if(ti(c))a=c;else{let d;if(8&i.type)d=Mn(c);else{const h=s[Ht];d=h.createComment("");const y=fr(i,s);la(h,Gd(h,y),d,function ZE(i,s){return i.nextSibling(s)}(h,y),!1)}s[i.index]=a=Y0(c,s,d,i),_l(s,a)}return new _I(a,i,s)}class Zh{constructor(s){this.queryList=s,this.matches=null}clone(){return new Zh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ia{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<c;h++){const y=a.getByIndex(h);d.push(this.queries[y.indexInDeclarationView].clone())}return new Ia(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ea(s,a).matches&&this.queries[a].setDirty()}}class wI{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Gl{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,d);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new Gl(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class kv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new kv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const h=c[d];this.matchTNodeWithReadOption(s,a,Yh(a,h)),this.matchTNodeWithReadOption(s,a,fs(a,s,h,!1,!1))}else c===$l?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,fs(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Xu||d===vt||d===$l&&4&a.type)this.addMatch(a.index,-2);else{const h=fs(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Yh(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function EI(i,s,a,c){return-1===a?function II(i,s){return 11&i.type?hl(i,s):4&i.type?bn(i,s):null}(s,i):-2===a?function rs(i,s,a){return a===Xu?hl(s,i):a===$l?bn(s,i):a===vt?Kh(s,i):void 0}(i,s,c):Vi(i,i[nt],a,s)}function Og(i,s,a,c){const d=s[Jr].queries[c];if(null===d.matches){const h=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const C=y[E];w.push(C<0?null:EI(s,h[C],y[E+1],a.metadata.read))}d.matches=w}return d.matches}function kg(i,s,a,c){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const y=Og(i,s,d,a);for(let w=0;w<h.length;w+=2){const E=h[w];if(E>0)c.push(y[w/2]);else{const C=h[w+1],M=s[-E];for(let U=dr;U<M.length;U++){const W=M[U];W[Sa]===W[Cn]&&kg(W[nt],W,C,c)}if(null!==M[yi]){const U=M[yi];for(let W=0;W<U.length;W++){const X=U[W];kg(X[nt],X,C,c)}}}}}return c}function Lv(i){const s=he(),a=Yt(),c=_d();Ru(c+1);const d=Ea(a,c);if(i.dirty&&function Fa(i){return 4==(4&i[Nt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?kg(a,s,c,[]):Og(a,s,d,c);i.reset(h,Dp),i.notifyOnChanges()}return!0}return!1}function Lg(i,s,a,c){const d=Yt();if(d.firstCreatePass){const h=rr();(function DI(i,s,a){null===i.queries&&(i.queries=new Gl),i.queries.track(new kv(s,a))})(d,new wI(s,a,c),h.index),function Qh(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Is(i,s,a){const c=new Ov(4==(4&a));G0(i,s,c,c.destroy),null===s[Jr]&&(s[Jr]=new Ia),s[Jr].queries.push(new Zh(c))}(d,he(),a)}function oe(){return function Fg(i,s){return i[Jr].queries[s].queryList}(he(),_d())}function Ea(i,s){return i.queries.getByIndex(s)}function Xh(i){return!!Vr(i)}function sf(...i){}const UI=new hn("Application Initializer");let Hg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=sf,this.reject=sf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(Ny(h))a.push(h);else if(hb(h)){const y=new Promise((w,E)=>{h.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ve(UI,8))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VI=new hn("AppId",{providedIn:"root",factory:function Gv(){return`${Gg()}${Gg()}${Gg()}`}});function Gg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const BI=new hn("Platform Initializer"),oT=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vc=new hn("appBootstrapListener");let zg=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const mn=new hn("LocaleId",{providedIn:"root",factory:()=>et(mn,st.Optional|st.SkipSelf)||function ci(){return typeof $localize<"u"&&$localize.locale||xo}()}),jI=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $I{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Pn=(()=>{class i{compileModuleSync(a){return new Gh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=fa(Vr(a).declarations).reduce((y,w)=>{const E=tn(w);return E&&y.push(new wh(E)),y},[]);return new $I(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const GI=(()=>Promise.resolve(0))();function Zs(i){typeof Zone>"u"?GI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ss{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function zI(){let i=Mt.requestAnimationFrame,s=Mt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function wc(i){const s=()=>{!function qv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Mt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,di(i),i.isCheckStableRunning=!0,Ql(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),di(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,y,w)=>{try{return Wg(i),a.invokeTask(d,h,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),lf(i)}},onInvoke:(a,c,d,h,y,w,E)=>{try{return Wg(i),a.invoke(d,h,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),lf(i)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,di(i),Ql(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new pe(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+d,s,Wv,sf,sf);try{return h.runTask(y,a,c)}finally{h.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Wv={};function Ql(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function di(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Wg(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function lf(i){i._nesting--,Ql(i)}class df{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Kv=new hn(""),qg=new hn("");let Yv,hf=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yv||(function WI(i){Yv=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Zs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zs(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ve(ss),Ve(Zv),Ve(qg))},i.\u0275prov=it({token:i,factory:i.\u0275fac}),i})(),Zv=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Yv?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),ba=null;const Qv=new hn("AllowMultipleToken"),Kg=new hn("PlatformDestroyListeners"),bs=!1;class Xl{constructor(s,a){this.name=s,this.token=a}}function Ec(i,s,a=[]){const c=`Platform: ${s}`,d=new hn(c);return(h=[])=>{let y=Jv();if(!y||y.injector.get(Qv,!1)){const w=[...a,...h,{provide:d,useValue:!0}];i?i(w):function Ic(i){if(ba&&!ba.get(Qv,!1))throw new pe(400,!1);ba=i;const s=i.get(YI);(function fu(i){const s=i.get(BI,null);s&&s.forEach(a=>a())})(i)}(function Xv(i=[],s){return rc.create({name:s,providers:[{provide:Do,useValue:"platform"},{provide:Kg,useValue:new Set([()=>ba=null])},...i]})}(w,c))}return function ZI(i){const s=Jv();if(!s)throw new pe(401,!1);return s}()}}function Jv(){return ba?.get(YI)??null}let YI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function ff(i,s){let a;return a="noop"===i?new df:("zone.js"===i?void 0:i)||new ss(s),a}(c?.ngZone,function On(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),h=[{provide:ss,useValue:d}];return d.run(()=>{const y=rc.create({providers:h,parent:this.injector,name:a.moduleType.name}),w=a.create(y),E=w.injector.get(sh,null);if(!E)throw new pe(402,!1);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:M=>{E.handleError(M)}});w.onDestroy(()=>{pu(this._modules,w),C.unsubscribe()})}),function pf(i,s,a){try{const c=a();return Ny(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const C=w.injector.get(Hg);return C.runInitializers(),C.donePromise.then(()=>(function fg(i){Je(i,"Expected localeId to be defined"),"string"==typeof i&&(av=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(mn,xo)||xo),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const d=e_({},c);return function uT(i,s,a){const c=new Gh(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(Yg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Kg,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ve(rc))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function e_(i,s){return Array.isArray(s)?s.reduce(e_,i):{...i,...s}}let Yg=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new N.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new N.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Zs(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),C.unsubscribe()}});this.isStable=(0,J.T)(h,y.pipe((0,ne.B)()))}bootstrap(a,c){const d=a instanceof ll;if(!this._injector.get(Hg).done){!d&&Bn(a);throw new pe(405,bs)}let y;y=d?a:this._injector.get(dl).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function qI(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Bl),C=y.create(rc.NULL,[],c||y.selector,w),M=C.location.nativeElement,U=C.injector.get(Kv,null);return U?.registerApplication(M),C.onDestroy(()=>{this.detachView(C.hostView),pu(this.components,C),U?.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;pu(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(vc,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>pu(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Ve(ss),Ve(Qu),Ve(sh))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function pu(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function Jl(){return!1}let ed=(()=>{class i{}return i.__NG_ELEMENT_ID__=n_,i})();function n_(i){return function hT(i,s,a){if(Vo(i)&&!a){const c=nr(i.index,s);return new _h(c,c)}return 47&i.type?new _h(s[lr],s):null}(rr(),he(),16==(16&i))}class u_{constructor(){}supports(s){return Eh(s)}create(s){return new vT(s)}}const eE=(i,s)=>s;class vT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||eE}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const y=!c||a&&a.currentIndex<iE(c,d,h)?a:c,w=iE(y,d,h),E=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{h||(h=[]);const C=w-d,M=E-d;if(C!=M){for(let W=0;W<C;W++){const X=W<h.length?h[W]:h[W]=0,_e=X+W;M<=_e&&_e<C&&(h[W]=X+1)}h[y.previousIndex]=M-C}}w!==E&&s(y,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Eh(s))throw new pe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)h=s[w],y=this._trackByFn(w,h),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,h,y,w)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,w),c=!0),a=a._next}else d=0,function $p(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new tE(a,c),h,d),s}_verifyReinsertion(s,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new rE),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class tE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nE{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class rE{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new nE,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iE(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class sE{constructor(){}supports(s){return s instanceof Map||Hp(s)}create(){return new _T}}class _T{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Hp(s)))throw new pe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,y=d._next;return h&&(h._next=y),y&&(y._prev=h),d._next=null,d._prev=null,d}const c=new td(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class td{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c_(){return new l_([new u_])}let l_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||c_()),deps:[[i,new T,new Hn]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new pe(901,!1)}}return i.\u0275prov=it({token:i,providedIn:"root",factory:c_}),i})();function Jg(){return new em([new sE])}let em=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Jg()),deps:[[i,new T,new Hn]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new pe(901,!1)}}return i.\u0275prov=it({token:i,providedIn:"root",factory:Jg}),i})();const yf=Ec(null,"core",[]);let aE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ve(Yg))},i.\u0275mod=Qs({type:i}),i.\u0275inj=kn({}),i})();function uE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(pt,be,F)=>{F.d(be,{Z:()=>Ge});var m=F(2090),B=F(4859),N=F(9681),J=F(1877);class ne{constructor(pe,Ee){this._delegate=pe,this.firebase=Ee,(0,N._addComponent)(pe,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(pe,Ee=N._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(pe);return!Re.isInitialized()&&"EXPLICIT"===(null===(Ie=Re.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:Ee})}_removeServiceInstance(pe,Ee=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ee)}_addComponent(pe){(0,N._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,N._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function de(){const ot=function ae(ot){const pe={},Ee={__esModule:!0,initializeApp:function Se(Z,se={}){const ye=N.initializeApp(Z,se);if((0,m.r3)(pe,ye.name))return pe[ye.name];const ze=new ot(ye,Ee);return pe[ye.name]=ze,ze},app:Re,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(Z){const se=Z.name,ye=se.replace("-compat","");if(N._registerComponent(Z)&&"PUBLIC"===Z.type){const ze=(je=Re())=>{if("function"!=typeof je[ye])throw fe.create("invalid-app-argument",{appName:se});return je[ye]()};void 0!==Z.serviceProps&&(0,m.ZB)(ze,Z.serviceProps),Ee[ye]=ze,ot.prototype[ye]=function(...je){return this._getService.bind(this,se).apply(this,Z.multipleInstances?je:[])}}return"PUBLIC"===Z.type?Ee[ye]:null},removeApp:function Ie(Z){delete pe[Z]},useAsService:function $e(Z,se){return"serverAuth"===se?null:se},modularAPIs:N}};function Re(Z){if(!(0,m.r3)(pe,Z=Z||N._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Z});return pe[Z]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function xe(){return Object.keys(pe).map(Z=>pe[Z])}}),Re.App=ot,Ee}(ne);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function pe(Ee){(0,m.ZB)(ot,Ee)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),ot}(),G=new J.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=H;!function Te(ot){(0,N.registerVersion)("@firebase/app-compat","0.2.4",ot)}()},9681:(pt,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>ke,_addComponent:()=>rn,_addOrOverwriteComponent:()=>_t,_apps:()=>Je,_clearComponents:()=>kn,_components:()=>Ke,_getProvider:()=>it,_registerComponent:()=>yt,_removeServiceInstance:()=>en,deleteApp:()=>gi,getApp:()=>Ln,getApps:()=>pi,initializeApp:()=>ki,onLog:()=>st,registerVersion:()=>ar,setLogLevel:()=>_r});var m=F(5861),B=F(4859),N=F(1877),J=F(2090),ne=F(8766);class ie{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function fe(Ve){return"VERSION"===Ve.getComponent()?.type}(et)){const wt=et.getImmediate();return`${wt.library}/${wt.version}`}return null}).filter(et=>et).join(" ")}}const ae="@firebase/app",H=new N.Yd("@firebase/app"),ke="[DEFAULT]",Le={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Je=new Map,Ke=new Map;function rn(Ve,we){try{Ve.container.addComponent(we)}catch(et){H.debug(`Component ${we.name} failed to register with FirebaseApp ${Ve.name}`,et)}}function _t(Ve,we){Ve.container.addOrOverwriteComponent(we)}function yt(Ve){const we=Ve.name;if(Ke.has(we))return H.debug(`There were multiple attempts to register component ${we}.`),!1;Ke.set(we,Ve);for(const et of Je.values())rn(et,Ve);return!0}function it(Ve,we){const et=Ve.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Ve.container.getProvider(we)}function en(Ve,we,et=ke){it(Ve,we).clearInstance(et)}function kn(){Ke.clear()}const sn=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jn{constructor(we,et,wt){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=wt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const Fr="9.17.2";function ki(Ve,we={}){let et=Ve;"object"!=typeof we&&(we={name:we});const wt=Object.assign({name:ke,automaticDataCollectionEnabled:!1},we),Ct=wt.name;if("string"!=typeof Ct||!Ct)throw sn.create("bad-app-name",{appName:String(Ct)});if(et||(et=(0,J.aH)()),!et)throw sn.create("no-options");const Kt=Je.get(Ct);if(Kt){if((0,J.vZ)(et,Kt.options)&&(0,J.vZ)(wt,Kt.config))return Kt;throw sn.create("duplicate-app",{appName:Ct})}const Vn=new B.H0(Ct);for(const j of Ke.values())Vn.addComponent(j);const $=new Jn(et,wt,Vn);return Je.set(Ct,$),$}function Ln(Ve=ke){const we=Je.get(Ve);if(!we&&Ve===ke)return ki();if(!we)throw sn.create("no-app",{appName:Ve});return we}function pi(){return Array.from(Je.values())}function gi(Ve){return yn.apply(this,arguments)}function yn(){return(yn=(0,m.Z)(function*(Ve){const we=Ve.name;Je.has(we)&&(Je.delete(we),yield Promise.all(Ve.container.getProviders().map(et=>et.delete())),Ve.isDeleted=!0)})).apply(this,arguments)}function ar(Ve,we,et){var wt;let Ct=null!==(wt=Le[Ve])&&void 0!==wt?wt:Ve;et&&(Ct+=`-${et}`);const Kt=Ct.match(/\s|\//),Vn=we.match(/\s|\//);if(Kt||Vn){const $=[`Unable to register library "${Ct}" with version "${we}":`];return Kt&&$.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),Kt&&Vn&&$.push("and"),Vn&&$.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void H.warn($.join(" "))}yt(new B.wA(`${Ct}-version`,()=>({library:Ct,version:we}),"VERSION"))}function st(Ve,we){if(null!==Ve&&"function"!=typeof Ve)throw sn.create("invalid-log-argument");(0,N.Am)(Ve,we)}function _r(Ve){(0,N.Ub)(Ve)}const wr="firebase-heartbeat-database",Wn=1,Fn="firebase-heartbeat-store";let Qr=null;function Mt(){return Qr||(Qr=(0,ne.X3)(wr,Wn,{upgrade:(Ve,we)=>{0===we&&Ve.createObjectStore(Fn)}}).catch(Ve=>{throw sn.create("idb-open",{originalErrorMessage:Ve.message})})),Qr}function At(){return(At=(0,m.Z)(function*(Ve){try{return(yield Mt()).transaction(Fn).objectStore(Fn).get(qn(Ve))}catch(we){if(we instanceof J.ZR)H.warn(we.message);else{const et=sn.create("idb-get",{originalErrorMessage:we?.message});H.warn(et.message)}}})).apply(this,arguments)}function vn(Ve,we){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(Ve,we){try{const wt=(yield Mt()).transaction(Fn,"readwrite");return yield wt.objectStore(Fn).put(we,qn(Ve)),wt.done}catch(et){if(et instanceof J.ZR)H.warn(et.message);else{const wt=sn.create("idb-set",{originalErrorMessage:et?.message});H.warn(wt.message)}}})).apply(this,arguments)}function qn(Ve){return`${Ve.name}!${Ve.options.appId}`}class Ci{constructor(we){this.container=we,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new jt(et),this._heartbeatsCachePromise=this._storage.read().then(wt=>(this._heartbeatsCache=wt,wt))}triggerHeartbeat(){var we=this;return(0,m.Z)(function*(){const wt=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=Lt();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!we._heartbeatsCache.heartbeats.some(Kt=>Kt.date===Ct))return we._heartbeatsCache.heartbeats.push({date:Ct,agent:wt}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(Kt=>{const Vn=new Date(Kt.date).valueOf();return Date.now()-Vn<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,m.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const et=Lt(),{heartbeatsToSend:wt,unsentEntries:Ct}=function Si(Ve,we=1024){const et=[];let wt=Ve.slice();for(const Ct of Ve){const Kt=et.find(Vn=>Vn.agent===Ct.agent);if(Kt){if(Kt.dates.push(Ct.date),Ur(et)>we){Kt.dates.pop();break}}else if(et.push({agent:Ct.agent,dates:[Ct.date]}),Ur(et)>we){et.pop();break}wt=wt.slice(1)}return{heartbeatsToSend:et,unsentEntries:wt}}(we._heartbeatsCache.heartbeats),Kt=(0,J.L)(JSON.stringify({version:2,heartbeats:wt}));return we._heartbeatsCache.lastSentHeartbeatDate=et,Ct.length>0?(we._heartbeatsCache.heartbeats=Ct,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),Kt})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class jt{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,m.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function ht(Ve){return At.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var et=this;return(0,m.Z)(function*(){var wt;if(yield et._canUseIndexedDBPromise){const Kt=yield et.read();return vn(et.app,{lastSentHeartbeatDate:null!==(wt=we.lastSentHeartbeatDate)&&void 0!==wt?wt:Kt.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var et=this;return(0,m.Z)(function*(){var wt;if(yield et._canUseIndexedDBPromise){const Kt=yield et.read();return vn(et.app,{lastSentHeartbeatDate:null!==(wt=we.lastSentHeartbeatDate)&&void 0!==wt?wt:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...we.heartbeats]})}})()}}function Ur(Ve){return(0,J.L)(JSON.stringify({version:2,heartbeats:Ve})).length}!function Un(Ve){yt(new B.wA("platform-logger",we=>new ie(we),"PRIVATE")),yt(new B.wA("heartbeat",we=>new Ci(we),"PRIVATE")),ar(ae,"0.9.4",Ve),ar(ae,"0.9.4","esm2017"),ar("fire-js","")}("")},4859:(pt,be,F)=>{F.d(be,{H0:()=>ae,wA:()=>N});var m=F(5861),B=F(2090);class N{constructor(H,G,q){this.name=H,this.instanceFactory=G,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const J="[DEFAULT]";class ne{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const q=new B.BH;if(this.instancesDeferred.set(G,q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:G});Ue&&q.resolve(Ue)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const q=this.normalizeInstanceIdentifier(H?.identifier),Ue=null!==(G=H?.optional)&&void 0!==G&&G;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Te){if(Ue)return null;throw Te}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function fe(de){return"EAGER"===de.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[G,q]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(G);try{const Te=this.getOrInitializeService({instanceIdentifier:Ue});q.resolve(Te)}catch{}}}}clearInstance(H=J){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,m.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...G.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=J){return this.instances.has(H)}getOptions(H=J){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:q,options:G});for(const[Te,Ge]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Te)&&Ge.resolve(Ue);return Ue}onInit(H,G){var q;const Ue=this.normalizeInstanceIdentifier(G),Te=null!==(q=this.onInitCallbacks.get(Ue))&&void 0!==q?q:new Set;Te.add(H),this.onInitCallbacks.set(Ue,Te);const Ge=this.instances.get(Ue);return Ge&&H(Ge,Ue),()=>{Te.delete(H)}}invokeOnInitCallbacks(H,G){const q=this.onInitCallbacks.get(G);if(q)for(const Ue of q)try{Ue(H,G)}catch{}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let q=this.instances.get(H);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(de=H,de===J?void 0:de),options:G}),this.instances.set(H,q),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,q)}catch{}var de;return q||null}normalizeInstanceIdentifier(H=J){return this.component?this.component.multipleInstances?H:J:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new ne(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,be,F)=>{F.d(be,{Am:()=>de,Ub:()=>ae,Yd:()=>fe,in:()=>B});const m=[];var B=(()=>{return(H=B||(B={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",B;var H})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},J=B.INFO,ne={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ie=(H,G,...q)=>{if(G<H.logLevel)return;const Ue=(new Date).toISOString(),Te=ne[G];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Te](`[${Ue}]  ${H.name}:`,...q)};class fe{constructor(G){this.name=G,this._logLevel=J,this._logHandler=ie,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?N[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function ae(H){m.forEach(G=>{G.setLogLevel(H)})}function de(H,G){for(const q of m){let Ue=null;G&&G.level&&(Ue=N[G.level]),q.userLogHandler=null===H?null:(Te,Ge,...ot)=>{const pe=ot.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");Ge>=(Ue??Te.logLevel)&&H({level:B[Ge].toLowerCase(),message:pe,args:ot,type:Te.name})}}}},259:(pt,be,F)=>{F.d(be,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=F(9681);(0,m.registerVersion)("firebase","9.17.2","app")},9260:(pt,be,F)=>{F.d(be,{Z:()=>m.Z});var m=F(3942);m.Z.registerVersion("firebase","9.17.2","app-compat")},9568:(pt,be,F)=>{F.r(be);var m=F(5861),B=F(3942),N=F(8401),J=F(2090),fe=(F(9681),F(1877),F(4859));function ae(){return window}const de=2e3;function G(){return G=(0,m.Z)(function*(P,k,R){var Y;const{BuildInfo:me}=ae();(0,N.ap)(k.sessionId,"AuthEvent did not contain a session ID");const Ze=yield function Ee(P){return Ie.apply(this,arguments)}(k.sessionId),We={};return(0,N.aq)()?We.ibi=me.packageName:(0,N.ar)()?We.apn=me.packageName:(0,N.as)(P,"operation-not-supported-in-this-environment"),me.displayName&&(We.appDisplayName=me.displayName),We.sessionId=Ze,(0,N.at)(P,R,k.type,void 0,null!==(Y=k.eventId)&&void 0!==Y?Y:void 0,We)}),G.apply(this,arguments)}function Ue(){return(Ue=(0,m.Z)(function*(P){const{BuildInfo:k}=ae(),R={};(0,N.aq)()?R.iosBundleId=k.packageName:(0,N.ar)()?R.androidPackageName=k.packageName:(0,N.as)(P,"operation-not-supported-in-this-environment"),yield(0,N.au)(P,R)})).apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(P,k,R){const{cordova:Y}=ae();let me=()=>{};try{yield new Promise((Ze,We)=>{let bt=null;function $t(){var Tt;Ze();const ur=null===(Tt=Y.plugins.browsertab)||void 0===Tt?void 0:Tt.close;"function"==typeof ur&&ur(),"function"==typeof R?.close&&R.close()}function Rt(){bt||(bt=window.setTimeout(()=>{We((0,N.aw)(P,"redirect-cancelled-by-user"))},de))}function Tn(){"visible"===document?.visibilityState&&Rt()}k.addPassiveListener($t),document.addEventListener("resume",Rt,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",Tn,!1),me=()=>{k.removePassiveListener($t),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",Tn,!1),bt&&window.clearTimeout(bt)}})}finally{me()}})).apply(this,arguments)}function Ie(){return(Ie=(0,m.Z)(function*(P){const k=function Re(P){if((0,N.ap)(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const k=new ArrayBuffer(P.length),R=new Uint8Array(k);for(let Y=0;Y<P.length;Y++)R[Y]=P.charCodeAt(Y);return R}(P),R=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(R)).map(me=>me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Se=20;class xe extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(k)),super.onEvent(k)}initialized(){var k=this;return(0,m.Z)(function*(){yield k.initPromise})()}}function Z(P){return se.apply(this,arguments)}function se(){return(se=(0,m.Z)(function*(P){const k=yield je()._get(Dt(P));return k&&(yield je()._remove(Dt(P))),k})).apply(this,arguments)}function ze(){const P=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<Se;R++){const Y=Math.floor(Math.random()*k.length);P.push(k.charAt(Y))}return P.join("")}function je(){return(0,N.az)(N.b)}function Dt(P){return(0,N.aA)("authEvent",P.config.apiKey,P.name)}function le(P){if(!P?.includes("?"))return{};const[k,...R]=P.split("?");return(0,J.zd)(R.join("?"))}const ke=class Ae{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(k){var R=this;return(0,m.Z)(function*(){const Y=k._key();let me=R.eventManagers.get(Y);return me||(me=new xe(k),R.eventManagers.set(Y,me),R.attachCallbackListeners(k,me)),me})()}_openPopup(k){(0,N.as)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,R,Y,me){var Ze=this;return(0,m.Z)(function*(){!function pe(P){var k,R,Y,me,Ze,We,bt,$t,Rt,Tn;const Tt=ae();(0,N.ax)("function"==typeof(null===(k=Tt?.universalLinks)||void 0===k?void 0:k.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(R=Tt?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(Ze=null===(me=null===(Y=Tt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===me?void 0:me.browsertab)||void 0===Ze?void 0:Ze.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===($t=null===(bt=null===(We=Tt?.cordova)||void 0===We?void 0:We.plugins)||void 0===bt?void 0:bt.browsertab)||void 0===$t?void 0:$t.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Tn=null===(Rt=Tt?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===Tn?void 0:Tn.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const We=yield Ze._initialize(k);yield We.initialized(),We.resetRedirect(),(0,N.aD)(),yield Ze._originValidation(k);const bt=function De(P,k,R=null){return{type:k,eventId:R,urlResponse:null,sessionId:ze(),postBody:null,tenantId:P.tenantId,error:(0,N.aw)(P,"no-auth-event")}}(k,Y,me);yield function $e(P,k){return je()._set(Dt(P),k)}(k,bt);const $t=yield function H(P,k,R){return G.apply(this,arguments)}(k,bt,R),Rt=yield function Te(P){const{cordova:k}=ae();return new Promise(R=>{k.plugins.browsertab.isAvailable(Y=>{let me=null;Y?k.plugins.browsertab.openUrl(P):me=k.InAppBrowser.open(P,(0,N.av)()?"_blank":"_system","location=yes"),R(me)})})}($t);return function Ge(P,k,R){return ot.apply(this,arguments)}(k,We,Rt)})()}_isIframeWebStorageSupported(k,R){throw new Error("Method not implemented.")}_originValidation(k){const R=k._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function q(P){return Ue.apply(this,arguments)}(k)),this.originValidationPromises[R]}attachCallbackListeners(k,R){const{universalLinks:Y,handleOpenURL:me,BuildInfo:Ze}=ae(),We=setTimeout((0,m.Z)(function*(){yield Z(k),R.onEvent(Le())}),500),bt=function(){var Tn=(0,m.Z)(function*(Tt){clearTimeout(We);const ur=yield Z(k);let vu=null;ur&&Tt?.url&&(vu=function ye(P,k){var R,Y;const me=function re(P){const k=le(P),R=k.link?decodeURIComponent(k.link):void 0,Y=le(R).link,me=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return le(me).link||me||Y||R||P}(k);if(me.includes("/__/auth/callback")){const Ze=le(me),We=Ze.firebaseError?function Xe(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(Ze.firebaseError)):null,bt=null===(Y=null===(R=We?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Y?void 0:Y[1],$t=bt?(0,N.aw)(bt):null;return $t?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:me,postBody:null}}return null}(ur,Tt.url)),R.onEvent(vu||Le())});return function(ur){return Tn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,bt);const $t=me,Rt=`${Ze.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var Tn=(0,m.Z)(function*(Tt){if(Tt.toLowerCase().startsWith(Rt)&&bt({url:Tt}),"function"==typeof $t)try{$t(Tt)}catch(ur){console.error(ur)}});return function(Tt){return Tn.apply(this,arguments)}}()}};function Le(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}const _t=1e3;function yt(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function en(P=(0,J.z$)()){return!("file:"!==yt()&&"ionic:"!==yt()&&"capacitor:"!==yt()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fr(){try{const P=self.localStorage,k=N.aI();if(P)return P.setItem(k,"1"),P.removeItem(k),!function Jn(P=(0,J.z$)()){return function dn(){return(0,J.w1)()&&11===document?.documentMode}()||function sn(P=(0,J.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,J.hl)()}catch{return ki()&&(0,J.hl)()}return!1}function ki(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function it(){return"http:"===yt()||"https:"===yt()}()||(0,J.ru)()||en())&&!function kn(){return(0,J.b$)()||(0,J.UG)()}()&&Fr()&&!ki()}function pi(){return en()&&typeof document<"u"}function yn(){return(yn=(0,m.Z)(function*(){return!!pi()&&new Promise(P=>{const k=setTimeout(()=>{P(!1)},_t);document.addEventListener("deviceready",()=>{clearTimeout(k),P(!0)})})})).apply(this,arguments)}const st={LOCAL:"local",NONE:"none",SESSION:"session"},_r=N.ax,wr="persistence";function Fn(P){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,m.Z)(function*(P){yield P._initializationPromise;const k=ht(),R=N.aA(wr,P.config.apiKey,P.name);k&&k.setItem(R,P._getPersistence())})).apply(this,arguments)}function ht(){var P;try{return(null===(P=function ar(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const At=N.ax;class vn{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(ke),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(k){var R=this;return(0,m.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,R,Y,me){var Ze=this;return(0,m.Z)(function*(){return yield Ze.selectUnderlyingResolver(),Ze.assertedUnderlyingResolver._openPopup(k,R,Y,me)})()}_openRedirect(k,R,Y,me){var Ze=this;return(0,m.Z)(function*(){return yield Ze.selectUnderlyingResolver(),Ze.assertedUnderlyingResolver._openRedirect(k,R,Y,me)})()}_isIframeWebStorageSupported(k,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,R)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return pi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return At(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,m.Z)(function*(){if(k.underlyingResolver)return;const R=yield function gi(){return yn.apply(this,arguments)}();k.underlyingResolver=R?k.cordovaResolver:k.browserResolver})()}}function xn(P){return P.unwrap()}function Ir(P){return Ci(P)}function Ci(P){const{_tokenResponse:k}=P instanceof J.ZR?P.customData:P;if(!k)return null;if(!(P instanceof J.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return N.P.credentialFromResult(P);const R=k.providerId;if(!R||R===N.o.PASSWORD)return null;let Y;switch(R){case N.o.GOOGLE:Y=N.Q;break;case N.o.FACEBOOK:Y=N.N;break;case N.o.GITHUB:Y=N.T;break;case N.o.TWITTER:Y=N.W;break;default:const{oauthIdToken:me,oauthAccessToken:Ze,oauthTokenSecret:We,pendingToken:bt,nonce:$t}=k;return Ze||We||me||bt?bt?R.startsWith("saml.")?N.aL._create(R,bt):N.J._fromParams({providerId:R,signInMethod:R,pendingToken:bt,idToken:me,accessToken:Ze}):new N.U(R).credential({idToken:me,accessToken:Ze,rawNonce:$t}):null}return P instanceof J.ZR?Y.credentialFromError(P):Y.credentialFromResult(P)}function Lt(P,k){return k.catch(R=>{throw R instanceof J.ZR&&function er(P,k){var R;const Y=null===(R=k.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new Ur(P,N.an(P,k));else if(Y){const me=Ci(k),Ze=k;me&&(Ze.credential=me,Ze.tenantId=Y.tenantId||void 0,Ze.email=Y.email||void 0,Ze.phoneNumber=Y.phoneNumber||void 0)}}(P,R),R}).then(R=>{const me=R.user;return{operationType:R.operationType,credential:Ir(R),additionalUserInfo:N.al(R),user:Un.getOrCreate(me)}})}function Si(P,k){return jt.apply(this,arguments)}function jt(){return(jt=(0,m.Z)(function*(P,k){const R=yield k;return{verificationId:R.verificationId,confirm:Y=>Lt(P,R.confirm(Y))}})).apply(this,arguments)}class Ur{constructor(k,R){this.resolver=R,this.auth=function qn(P){return P.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return Lt(xn(this.auth),this.resolver.resolveSignIn(k))}}class Un{constructor(k){this._delegate=k,this.multiFactor=N.ao(k)}static getOrCreate(k){return Un.USER_MAP.has(k)||Un.USER_MAP.set(k,new Un(k)),Un.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var R=this;return(0,m.Z)(function*(){return Lt(R.auth,N.Z(R._delegate,k))})()}linkWithPhoneNumber(k,R){var Y=this;return(0,m.Z)(function*(){return Si(Y.auth,N.l(Y._delegate,k,R))})()}linkWithPopup(k){var R=this;return(0,m.Z)(function*(){return Lt(R.auth,N.d(R._delegate,k,vn))})()}linkWithRedirect(k){var R=this;return(0,m.Z)(function*(){return yield Fn(N.aE(R.auth)),N.g(R._delegate,k,vn)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var R=this;return(0,m.Z)(function*(){return Lt(R.auth,N._(R._delegate,k))})()}reauthenticateWithPhoneNumber(k,R){return Si(this.auth,N.r(this._delegate,k,R))}reauthenticateWithPopup(k){return Lt(this.auth,N.e(this._delegate,k,vn))}reauthenticateWithRedirect(k){var R=this;return(0,m.Z)(function*(){return yield Fn(N.aE(R.auth)),N.h(R._delegate,k,vn)})()}sendEmailVerification(k){return N.ab(this._delegate,k)}unlink(k){var R=this;return(0,m.Z)(function*(){return yield N.ak(R._delegate,k),R})()}updateEmail(k){return N.ag(this._delegate,k)}updatePassword(k){return N.ah(this._delegate,k)}updatePhoneNumber(k){return N.u(this._delegate,k)}updateProfile(k){return N.af(this._delegate,k)}verifyBeforeUpdateEmail(k,R){return N.ac(this._delegate,k,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const Ve=N.ax;let we=(()=>{class P{constructor(R,Y){if(this.app=R,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:me}=R.options;Ve(me,"invalid-api-key",{appName:R.name}),Ve(me,"invalid-api-key",{appName:R.name});const Ze=typeof window<"u"?vn:void 0;this._delegate=Y.initialize({options:{persistence:wt(me,R.name),popupRedirectResolver:Ze}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Y){N.G(this._delegate,R,Y)}applyActionCode(R){return N.a2(this._delegate,R)}checkActionCode(R){return N.a3(this._delegate,R)}confirmPasswordReset(R,Y){return N.a1(this._delegate,R,Y)}createUserWithEmailAndPassword(R,Y){var me=this;return(0,m.Z)(function*(){return Lt(me._delegate,N.a5(me._delegate,R,Y))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return N.aa(this._delegate,R)}isSignInWithEmailLink(R){return N.a8(this._delegate,R)}getRedirectResult(){var R=this;return(0,m.Z)(function*(){Ve(Ln(),R._delegate,"operation-not-supported-in-this-environment");const Y=yield N.j(R._delegate,vn);return Y?Lt(R._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Je(P,k){(0,N.aE)(P)._logFramework(k)}(this._delegate,R)}onAuthStateChanged(R,Y,me){const{next:Ze,error:We,complete:bt}=et(R,Y,me);return this._delegate.onAuthStateChanged(Ze,We,bt)}onIdTokenChanged(R,Y,me){const{next:Ze,error:We,complete:bt}=et(R,Y,me);return this._delegate.onIdTokenChanged(Ze,We,bt)}sendSignInLinkToEmail(R,Y){return N.a7(this._delegate,R,Y)}sendPasswordResetEmail(R,Y){return N.a0(this._delegate,R,Y||void 0)}setPersistence(R){var Y=this;return(0,m.Z)(function*(){let me;switch(function Wn(P,k){_r(Object.values(st).includes(k),P,"invalid-persistence-type"),(0,J.b$)()?_r(k!==st.SESSION,P,"unsupported-persistence-type"):(0,J.UG)()?_r(k===st.NONE,P,"unsupported-persistence-type"):ki()?_r(k===st.NONE||k===st.LOCAL&&(0,J.hl)(),P,"unsupported-persistence-type"):_r(k===st.NONE||Fr(),P,"unsupported-persistence-type")}(Y._delegate,R),R){case st.SESSION:me=N.a;break;case st.LOCAL:me=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case st.NONE:me=N.L;break;default:return N.as("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(me)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Lt(this._delegate,N.X(this._delegate))}signInWithCredential(R){return Lt(this._delegate,N.Y(this._delegate,R))}signInWithCustomToken(R){return Lt(this._delegate,N.$(this._delegate,R))}signInWithEmailAndPassword(R,Y){return Lt(this._delegate,N.a6(this._delegate,R,Y))}signInWithEmailLink(R,Y){return Lt(this._delegate,N.a9(this._delegate,R,Y))}signInWithPhoneNumber(R,Y){return Si(this._delegate,N.s(this._delegate,R,Y))}signInWithPopup(R){var Y=this;return(0,m.Z)(function*(){return Ve(Ln(),Y._delegate,"operation-not-supported-in-this-environment"),Lt(Y._delegate,N.c(Y._delegate,R,vn))})()}signInWithRedirect(R){var Y=this;return(0,m.Z)(function*(){return Ve(Ln(),Y._delegate,"operation-not-supported-in-this-environment"),yield Fn(Y._delegate),N.f(Y._delegate,R,vn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return N.a4(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=st,P})();function et(P,k,R){let Y=P;"function"!=typeof P&&({next:Y,error:k,complete:R}=P);const me=Y;return{next:We=>me(We&&Un.getOrCreate(We)),error:k,complete:R}}function wt(P,k){const R=function Mt(P,k){const R=ht();if(!R)return[];const Y=N.aA(wr,P,k);switch(R.getItem(Y)){case st.NONE:return[N.L];case st.LOCAL:return[N.i,N.a];case st.SESSION:return[N.a];default:return[]}}(P,k);if(typeof self<"u"&&!R.includes(N.i)&&R.push(N.i),typeof window<"u")for(const Y of[N.b,N.a])R.includes(Y)||R.push(Y);return R.includes(N.L)||R.push(N.L),R}class Ct{constructor(){this.providerId="phone",this._delegate=new N.P(xn(B.Z.auth()))}static credential(k,R){return N.P.credential(k,R)}verifyPhoneNumber(k,R){return this._delegate.verifyPhoneNumber(k,R)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=N.P.PROVIDER_ID;const Kt=N.ax;class Vn{constructor(k,R,Y=B.Z.app()){var me;Kt(null===(me=Y.options)||void 0===me?void 0:me.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new N.R(k,R,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function j(P){P.INTERNAL.registerComponent(new fe.wA("auth-compat",k=>{const R=k.getProvider("app-compat").getImmediate(),Y=k.getProvider("auth");return new we(R,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:Vn,TwitterAuthProvider:N.W,Auth:we,AuthCredential:N.H,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.3.4")}(B.Z)},8766:(pt,be,F)=>{F.d(be,{Lj:()=>Se,X3:()=>Re});var m=F(5861);const B=(se,ye)=>ye.some(ze=>se instanceof ze);let N,J;const fe=new WeakMap,ae=new WeakMap,de=new WeakMap,H=new WeakMap,G=new WeakMap;let Te={get(se,ye,ze){if(se instanceof IDBTransaction){if("done"===ye)return ae.get(se);if("objectStoreNames"===ye)return se.objectStoreNames||de.get(se);if("store"===ye)return ze.objectStoreNames[1]?void 0:ze.objectStore(ze.objectStoreNames[0])}return Ee(se[ye])},set:(se,ye,ze)=>(se[ye]=ze,!0),has:(se,ye)=>se instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in se};function pe(se){return"function"==typeof se?function ot(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ye){return se.apply(Ie(this),ye),Ee(fe.get(this))}:function(...ye){return Ee(se.apply(Ie(this),ye))}:function(ye,...ze){const je=se.call(Ie(this),ye,...ze);return de.set(je,ye.sort?ye.sort():[ye]),Ee(je)}}(se):(se instanceof IDBTransaction&&function Ue(se){if(ae.has(se))return;const ye=new Promise((ze,je)=>{const Dt=()=>{se.removeEventListener("complete",Xe),se.removeEventListener("error",re),se.removeEventListener("abort",re)},Xe=()=>{ze(),Dt()},re=()=>{je(se.error||new DOMException("AbortError","AbortError")),Dt()};se.addEventListener("complete",Xe),se.addEventListener("error",re),se.addEventListener("abort",re)});ae.set(se,ye)}(se),B(se,function ne(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,Te):se)}function Ee(se){if(se instanceof IDBRequest)return function q(se){const ye=new Promise((ze,je)=>{const Dt=()=>{se.removeEventListener("success",Xe),se.removeEventListener("error",re)},Xe=()=>{ze(Ee(se.result)),Dt()},re=()=>{je(se.error),Dt()};se.addEventListener("success",Xe),se.addEventListener("error",re)});return ye.then(ze=>{ze instanceof IDBCursor&&fe.set(ze,se)}).catch(()=>{}),G.set(ye,se),ye}(se);if(H.has(se))return H.get(se);const ye=pe(se);return ye!==se&&(H.set(se,ye),G.set(ye,se)),ye}const Ie=se=>G.get(se);function Re(se,ye,{blocked:ze,upgrade:je,blocking:Dt,terminated:Xe}={}){const re=indexedDB.open(se,ye),le=Ee(re);return je&&re.addEventListener("upgradeneeded",ve=>{je(Ee(re.result),ve.oldVersion,ve.newVersion,Ee(re.transaction))}),ze&&re.addEventListener("blocked",()=>ze()),le.then(ve=>{Xe&&ve.addEventListener("close",()=>Xe()),Dt&&ve.addEventListener("versionchange",()=>Dt())}).catch(()=>{}),le}function Se(se,{blocked:ye}={}){const ze=indexedDB.deleteDatabase(se);return ye&&ze.addEventListener("blocked",()=>ye()),Ee(ze).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],$e=new Map;function Z(se,ye){if(!(se instanceof IDBDatabase)||ye in se||"string"!=typeof ye)return;if($e.get(ye))return $e.get(ye);const ze=ye.replace(/FromIndex$/,""),je=ye!==ze,Dt=De.includes(ze);if(!(ze in(je?IDBIndex:IDBObjectStore).prototype)||!Dt&&!xe.includes(ze))return;const Xe=function(){var re=(0,m.Z)(function*(le,...ve){const Ae=this.transaction(le,Dt?"readwrite":"readonly");let ke=Ae.store;return je&&(ke=ke.index(ve.shift())),(yield Promise.all([ke[ze](...ve),Dt&&Ae.done]))[0]});return function(ve){return re.apply(this,arguments)}}();return $e.set(ye,Xe),Xe}!function Ge(se){Te=se(Te)}(se=>({...se,get:(ye,ze,je)=>Z(ye,ze)||se.get(ye,ze,je),has:(ye,ze)=>!!Z(ye,ze)||se.has(ye,ze)}))},5861:(pt,be,F)=>{function m(N,J,ne,ie,fe,ae,de){try{var H=N[ae](de),G=H.value}catch(q){return void ne(q)}H.done?J(G):Promise.resolve(G).then(ie,fe)}function B(N){return function(){var J=this,ne=arguments;return new Promise(function(ie,fe){var ae=N.apply(J,ne);function de(G){m(ae,ie,fe,de,H,"next",G)}function H(G){m(ae,ie,fe,de,H,"throw",G)}de(void 0)})}}F.d(be,{Z:()=>B})}},pt=>{pt(pt.s=1456)}]);